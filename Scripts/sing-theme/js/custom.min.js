!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","./util"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./util"));else{var n={exports:{}};t(n.exports,n,e.Util),e.modal=n.exports}}(this,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n),a=function(e){var t="modal",n="4.0.0-alpha",i="bs.modal",a="."+i,l=".data-api",c=e.fn[t],h=300,d=150,u={backdrop:!0,keyboard:!0,focus:!0,show:!0},p={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},f={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,FOCUSIN:"focusin"+a,RESIZE:"resize"+a,CLICK_DISMISS:"click.dismiss"+a,KEYDOWN_DISMISS:"keydown.dismiss"+a,MOUSEUP_DISMISS:"mouseup.dismiss"+a,MOUSEDOWN_DISMISS:"mousedown.dismiss"+a,CLICK_DATA_API:"click"+a+l},m={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},g={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},v=function(){function l(t,n){s(this,l),this._config=this._getConfig(n),this._element=t,this._dialog=e(t).find(g.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return o(l,[{key:"toggle",value:function(e){return this._isShown?this.hide():this.show(e)}},{key:"show",value:function(t){var n=this,i=e.Event(f.SHOW,{relatedTarget:t});e(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),e(document.body).addClass(m.OPEN),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(f.CLICK_DISMISS,g.DATA_DISMISS,e.proxy(this.hide,this)),e(this._dialog).on(f.MOUSEDOWN_DISMISS,function(){e(n._element).one(f.MOUSEUP_DISMISS,function(t){e(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(e.proxy(this._showElement,this,t)))}},{key:"hide",value:function(t){t&&t.preventDefault();var n=e.Event(f.HIDE);e(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),e(document).off(f.FOCUSIN),e(this._element).removeClass(m.IN),e(this._element).off(f.CLICK_DISMISS),e(this._dialog).off(f.MOUSEDOWN_DISMISS),r.default.supportsTransitionEnd()&&e(this._element).hasClass(m.FADE)?e(this._element).one(r.default.TRANSITION_END,e.proxy(this._hideModal,this)).emulateTransitionEnd(h):this._hideModal())}},{key:"dispose",value:function(){e.removeData(this._element,i),e(window).off(a),e(document).off(a),e(this._element).off(a),e(this._backdrop).off(a),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(n){return n=e.extend({},u,n),r.default.typeCheckConfig(t,n,p),n}},{key:"_showElement",value:function(t){var n=this,i=r.default.supportsTransitionEnd()&&e(this._element).hasClass(m.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.scrollTop=0,i&&r.default.reflow(this._element),e(this._element).addClass(m.IN),this._config.focus&&this._enforceFocus();var s=e.Event(f.SHOWN,{relatedTarget:t}),o=function(){n._config.focus&&n._element.focus(),e(n._element).trigger(s)};i?e(this._dialog).one(r.default.TRANSITION_END,o).emulateTransitionEnd(h):o()}},{key:"_enforceFocus",value:function(){var t=this;e(document).off(f.FOCUSIN).on(f.FOCUSIN,function(n){t._element===n.target||e(t._element).has(n.target).length||t._element.focus()})}},{key:"_setEscapeEvent",value:function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(f.KEYDOWN_DISMISS,function(e){27===e.which&&t.hide()}):this._isShown||e(this._element).off(f.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?e(window).on(f.RESIZE,e.proxy(this._handleUpdate,this)):e(window).off(f.RESIZE)}},{key:"_hideModal",value:function(){var t=this;this._element.style.display="none",this._showBackdrop(function(){e(document.body).removeClass(m.OPEN),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(f.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(t){var n=this,i=e(this._element).hasClass(m.FADE)?m.FADE:"";if(this._isShown&&this._config.backdrop){var s=r.default.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=m.BACKDROP,i&&e(this._backdrop).addClass(i),e(this._backdrop).appendTo(document.body),e(this._element).on(f.CLICK_DISMISS,function(e){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),s&&r.default.reflow(this._backdrop),e(this._backdrop).addClass(m.IN),!t)return;if(!s)return void t();e(this._backdrop).one(r.default.TRANSITION_END,t).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(m.IN);var o=function(){n._removeBackdrop(),t&&t()};r.default.supportsTransitionEnd()&&e(this._element).hasClass(m.FADE)?e(this._backdrop).one(r.default.TRANSITION_END,o).emulateTransitionEnd(d):o()}else t&&t()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px~")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this._isBodyOverflowing=document.body.clientWidth<e,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var t=parseInt(e(g.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=t+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var e=document.createElement("div");e.className=m.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}}],[{key:"_jQueryInterface",value:function(t,n){return this.each(function(){var s=e(this).data(i),o=e.extend({},l.Default,e(this).data(),"object"==typeof t&&t);if(s||(s=new l(this,o),e(this).data(i,s)),"string"==typeof t){if(void 0===s[t])throw new Error('No method named "'+t+'"');s[t](n)}else o.show&&s.show(n)})}},{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return u}}]),l}();return e(document).on(f.CLICK_DATA_API,g.DATA_TOGGLE,function(t){var n=this,s=void 0,o=r.default.getSelectorFromElement(this);o&&(s=e(o)[0]);var a=e(s).data(i)?"toggle":e.extend({},e(s).data(),e(this).data());"A"===this.tagName&&t.preventDefault();var l=e(s).one(f.SHOW,function(t){t.isDefaultPrevented()||l.one(f.HIDDEN,function(){e(n).is(":visible")&&n.focus()})});v._jQueryInterface.call(e(s),a,this)}),e.fn[t]=v._jQueryInterface,e.fn[t].Constructor=v,e.fn[t].noConflict=function(){return e.fn[t]=c,v._jQueryInterface},v}(jQuery);t.exports=a}),!function(e){"use strict";function t(t){var n=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return e.each(n,function(){t=t.replace(this.re,this.ch)}),t}function n(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n="(?:"+Object.keys(t).join("|")+")",i=new RegExp(n),s=new RegExp(n,"g"),o=null==e?"":""+e;return i.test(o)?o.replace(s,function(e){return t[e]}):o}function i(t,n){var i=arguments,o=t,r=n;[].shift.apply(i);var a,l=this.each(function(){var t=e(this);if(t.is("select")){var n=t.data("selectpicker"),l="object"==typeof o&&o;if(n){if(l)for(var c in l)l.hasOwnProperty(c)&&(n.options[c]=l[c])}else{var h=e.extend({},s.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),l);t.data("selectpicker",n=new s(this,h,r))}"string"==typeof o&&(a=n[o]instanceof Function?n[o].apply(n,i):n.options[o])}});return"undefined"!=typeof a?a:l}String.prototype.includes||!function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),n="".indexOf,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var s=i.length,o=String(t),r=o.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;l!=l&&(l=0);var c=Math.min(Math.max(l,0),s);return!(r+c>s)&&-1!=n.call(i,o,l)};t?t(String.prototype,"includes",{value:i,configurable:!0,writable:!0}):String.prototype.includes=i}(),String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=n.length,s=String(e),o=s.length,r=arguments.length>1?arguments[1]:void 0,a=r?Number(r):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),i);if(o+l>i)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(l+c)!=s.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),e.expr[":"].icontains=function(t,n,i){var s=e(t),o=(s.data("tokens")||s.text()).toUpperCase();return o.includes(i[3].toUpperCase())},e.expr[":"].ibegins=function(t,n,i){var s=e(t),o=(s.data("tokens")||s.text()).toUpperCase();return o.startsWith(i[3].toUpperCase())},e.expr[":"].aicontains=function(t,n,i){var s=e(t),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase();return o.includes(o,i[3])},e.expr[":"].aibegins=function(t,n,i){var s=e(t),o=(s.data("tokens")||s.data("normalizedText")||s.text()).toUpperCase();return o.startsWith(i[3].toUpperCase())};var s=function(t,n,i){i&&(i.stopPropagation(),i.preventDefault()),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=n,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=s.prototype.val,this.render=s.prototype.render,this.refresh=s.prototype.refresh,this.setStyle=s.prototype.setStyle,this.selectAll=s.prototype.selectAll,this.deselectAll=s.prototype.deselectAll,this.destroy=s.prototype.remove,this.remove=s.prototype.remove,this.show=s.prototype.show,this.hide=s.prototype.hide,this.init()};s.VERSION="1.6.5",s.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},s.prototype={constructor:s,init:function(){var t=this,n=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof n&&(this.$button.attr("data-id",n),e('label[for="'+n+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",r=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+n(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",c='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown"'+s+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+o+r+a+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>";return e(c)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var i=this,s=[],o=0,r=function(e,t,n,i){return"<li"+("undefined"!=typeof n&""!==n?' class="'+n+'"':"")+("undefined"!=typeof t&null!==t?' data-original-index="'+t+'"':"")+("undefined"!=typeof i&null!==i?'data-optgroup="'+i+'"':"")+">"+e+"</li>"},a=function(e,s,o,r){return'<a tabindex="0"'+("undefined"!=typeof s?' class="'+s+'"':"")+("undefined"!=typeof o?' style="'+o+'"':"")+' data-normalized-text="'+t(n(e))+'"'+("undefined"!=typeof r||null!==r?' data-tokens="'+r+'"':"")+">"+e+'<span class="'+i.options.iconBase+" "+i.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(t){var n=e(this),l=n.attr("class")||"",c=n.attr("style"),h=n.data("content")?n.data("content"):n.html(),d=n.data("tokens")?n.data("tokens"):null,u="undefined"!=typeof n.data("subtext")?'<small class="text-muted">'+n.data("subtext")+"</small>":"",p="undefined"!=typeof n.data("icon")?'<span class="'+i.options.iconBase+" "+n.data("icon")+'"></span> ':"",f=n.is(":disabled")||n.parent().is(":disabled");if(""!==p&&f&&(p="<span>"+p+"</span>"),n.data("content")||(h=p+'<span class="text">'+h+u+"</span>"),!i.options.hideDisabled||!f)if(n.parent().is("optgroup")&&n.data("divider")!==!0){if(0===n.index()){o+=1;var m=n.parent().attr("label"),g="undefined"!=typeof n.parent().data("subtext")?'<small class="text-muted">'+n.parent().data("subtext")+"</small>":"",v=n.parent().data("icon")?'<span class="'+i.options.iconBase+" "+n.parent().data("icon")+'"></span> ':"";m=v+'<span class="text">'+m+g+"</span>",0!==t&&s.length>0&&s.push(r("",null,"divider",o+"div")),s.push(r(m,null,"dropdown-header",o))}s.push(r(a(h,"opt "+l,c,d),t,"",o))}else n.data("divider")===!0?s.push(r("",t,"divider")):n.data("hidden")===!0?s.push(r(a(h,l,c,d),t,"hidden is-hidden")):(n.prev().is("optgroup")&&s.push(r("",null,"divider",o+"div")),s.push(r(a(h,l,c,d),t)))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(s.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var n=this;t!==!1&&this.$element.find("option").each(function(t){n.setDisabled(t,e(this).is(":disabled")||e(this).parent().is(":disabled")),n.setSelected(t,e(this).is(":selected"))}),this.tabIndex();var i=this.options.hideDisabled?":enabled":"",s=this.$element.find("option:selected"+i).map(function(){var t,i=e(this),s=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"","undefined"!=typeof i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content"):s+i.html()+t}).toArray(),o=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var r=this.options.selectedTextFormat.split(">");if(r.length>1&&s.length>r[1]||1==r.length&&s.length>=2){i=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(s.length,a):this.options.countSelectedText;o=l.replace("{0}",s.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(o=this.options.title),o||(o="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",e.trim(o.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(o)},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var n=e?e:this.options.style;"add"==t?this.$button.addClass(n):"remove"==t?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(){if(this.options.size!==!1){var e=this.$menu.parent().clone().children(".dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),t=e.addClass("open").children(".dropdown-menu"),n=t.find("li").not(".divider, .dropdown-header").filter(":visible").children("a").outerHeight(),i=this.options.header?t.find(".popover-title").outerHeight():0,s=this.options.liveSearch?t.find(".bs-searchbox").outerHeight():0,o=this.options.actionsBox?t.find(".bs-actionsbox").outerHeight():0,r=this.multiple?t.find(".bs-donebutton").outerHeight():0;e.remove(),this.$newElement.data("liHeight",n).data("headerHeight",i).data("searchHeight",s).data("actionsHeight",o).data("doneButtonHeight",r)}},setSize:function(){this.findLis();var t,n,i,s=this,o=this.$menu,r=o.children(".inner"),a=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),h=this.$newElement.data("searchHeight"),d=this.$newElement.data("actionsHeight"),u=this.$newElement.data("doneButtonHeight"),p=this.$lis.filter(".divider").outerHeight(!0),f=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),m=this.options.hideDisabled?".disabled":"",g=e(window),v=f+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,y=function(){n=s.$newElement.offset().top-g.scrollTop(),i=g.height()-n-a};if(y(),this.options.header&&o.css("padding-top",0),"auto"==this.options.size){var b=function(){var e,a=s.$lis.not(".hidden");y(),t=i-v,s.options.dropupAuto&&s.$newElement.toggleClass("dropup",n>i&&t-v<o.height()),s.$newElement.hasClass("dropup")&&(t=n-v),e=a.length+a.filter(".dropdown-header").length>3?3*l+v-2:0,o.css({"max-height":t+"px",overflow:"hidden","min-height":e+c+h+d+u+"px"}),r.css({"max-height":t-c-h-d-u-f+"px","overflow-y":"auto","min-height":Math.max(e-f,0)+"px"})};b(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",b),g.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",b)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li").not(m).length>this.options.size){var w=this.$lis.not(".divider").not(m).children().slice(0,this.options.size).last().parent().index(),C=this.$lis.slice(0,w+1).filter(".divider").length;t=l*this.options.size+C*p+f,s.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>i&&t<o.height()),o.css({"max-height":t+c+h+d+u+"px",overflow:"hidden"}),r.css({"max-height":t-f+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body"),t=e.children(".dropdown-menu").css("width"),n=e.css("width","auto").children("button").css("width");e.remove(),this.$newElement.css("width",Math.max(parseInt(t),parseInt(n))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,n,i=this,s="<div />",o=e(s),r=function(e){o.addClass(e.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),n=e.hasClass("dropup")?0:e[0].offsetHeight,o.css({top:t.top+n,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){i.isDisabled()||(r(e(this)),o.appendTo(i.options.container),o.toggleClass("open",!e(this).hasClass("open")),o.append(i.$menu))}),e(window).on("resize scroll",function(){r(i.$newElement)}),e("html").on("click",function(t){e(t.target).closest(i.$newElement).length<1&&o.removeClass("open")})},setSelected:function(e,t){this.findLis(),this.$lis.filter('[data-original-index="'+e+'"]').toggleClass("selected",t)},setDisabled:function(e,t){this.findLis(),t?this.$lis.filter('[data-original-index="'+e+'"]').addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+e+'"]').removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){t.setSize(),t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(n){var i=e(this),s=i.parent().data("originalIndex"),o=t.$element.val(),r=t.$element.prop("selectedIndex");if(t.multiple&&n.stopPropagation(),n.preventDefault(),!t.isDisabled()&&!i.parent().hasClass("disabled")){var a=t.$element.find("option"),l=a.eq(s),c=l.prop("selected"),h=l.parent("optgroup"),d=t.options.maxOptions,u=h.data("maxOptions")||!1;if(t.multiple){if(l.prop("selected",!c),t.setSelected(s,!c),i.blur(),d!==!1||u!==!1){var p=d<a.filter(":selected").length,f=u<h.find("option:selected").length;if(d&&p||u&&f)if(d&&1==d)a.prop("selected",!1),l.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(s,!0);else if(u&&1==u){h.find("option:selected").prop("selected",!1),l.prop("selected",!0);var m=i.data("optgroup");t.$menu.find(".selected").has('a[data-optgroup="'+m+'"]').removeClass("selected"),t.setSelected(s,!0)}else{var g="function"==typeof t.options.maxOptionsText?t.options.maxOptionsText(d,u):t.options.maxOptionsText,v=g[0].replace("{n}",d),y=g[1].replace("{n}",u),b=e('<div class="notify"></div>');g[2]&&(v=v.replace("{var}",g[2][d>1?0:1]),y=y.replace("{var}",g[2][u>1?0:1])),l.prop("selected",!1),t.$menu.append(b),d&&p&&(b.append(e("<div>"+v+"</div>")),t.$element.trigger("maxReached.bs.select")),u&&f&&(b.append(e("<div>"+y+"</div>")),t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(s,!1)},10),b.delay(750).fadeOut(300,function(){e(this).remove()})}}}else a.prop("selected",!1),l.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(s,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus(),(o!=t.$element.val()&&t.multiple||r!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){t.$button.focus()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(n){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),n.preventDefault(),n.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll(),t.$element.change()}),this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var i=this,s=e('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){i.$menu.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove()),i.multiple||i.$menu.find(".selected").addClass("active"),setTimeout(function(){i.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(i.$searchbox.val()){var o=i.$lis.not(".is-hidden").removeClass("hidden").children("a");o=o.not(i.options.liveSearchNormalize?":a"+i._searchStyle()+"("+t(i.$searchbox.val())+")":":"+i._searchStyle()+"("+i.$searchbox.val()+")"),o.parent().addClass("hidden"),i.$lis.filter(".dropdown-header").each(function(){var t=e(this),n=t.data("optgroup");0===i.$lis.filter("[data-optgroup="+n+"]").not(t).not(".hidden").length&&(t.addClass("hidden"),i.$lis.filter("[data-optgroup="+n+"div]").addClass("hidden"))});var r=i.$lis.not(".hidden");r.each(function(t){var n=e(this);n.hasClass("divider")&&(n.index()===r.eq(0).index()||n.index()===r.last().index()||r.eq(t+1).hasClass("divider"))&&n.addClass("hidden")}),i.$lis.not(".hidden, .no-results").length?s.parent().length&&s.remove():(s.parent().length&&s.remove(),s.html(i.options.noneResultsText.replace("{0}",'"'+n(i.$searchbox.val())+'"')).show(),i.$menu.append(s))}else i.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove();i.$lis.filter(".active").removeClass("active"),i.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),e(this).focus()})},_searchStyle:function(){var e="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":e="ibegins";break;case"contains":}return e},val:function(e){return"undefined"!=typeof e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected"),this.render(!1)},keydown:function(n){var i,s,o,r,a,l,c,h,d,u=e(this),p=u.is("input")?u.parent().parent():u.parent(),f=p.data("this"),m={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(p=u.parent().parent()),f.options.container&&(p=f.$menu),i=e("[role=menu] li a",p),d=f.$menu.parent().hasClass("open"),!d&&/([0-9]|[A-z])/.test(String.fromCharCode(n.keyCode))&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),d=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(n.keyCode.toString(10))&&d&&0===f.$menu.find(".active").length&&(n.preventDefault(),f.$menu.parent().removeClass("open"),f.$button.focus()),i=e("[role=menu] li:not(.divider):not(.dropdown-header):visible a",p),u.val()||/(38|40)/.test(n.keyCode.toString(10))||0===i.filter(".active").length&&(i=f.$newElement.find("li a"),i=i.filter(f.options.liveSearchNormalize?":a"+f._searchStyle()+"("+t(m[n.keyCode])+")":":"+f._searchStyle()+"("+m[n.keyCode]+")"))),i.length){if(/(38|40)/.test(n.keyCode.toString(10)))s=i.index(i.filter(":focus")),r=i.parent(":not(.disabled):visible").first().index(),a=i.parent(":not(.disabled):visible").last().index(),o=i.eq(s).parent().nextAll(":not(.disabled):visible").eq(0).index(),l=i.eq(s).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=i.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),f.options.liveSearch&&(i.each(function(t){e(this).hasClass("disabled")||e(this).data("index",t)}),s=i.index(i.filter(".active")),r=i.filter(":not(.disabled):visible").first().data("index"),a=i.filter(":not(.disabled):visible").last().data("index"),o=i.eq(s).nextAll(":not(.disabled):visible").eq(0).data("index"),l=i.eq(s).prevAll(":not(.disabled):visible").eq(0).data("index"),c=i.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index")),h=u.data("prevIndex"),38==n.keyCode?(f.options.liveSearch&&(s-=1),s!=c&&s>l&&(s=l),r>s&&(s=r),s==h&&(s=a)):40==n.keyCode&&(f.options.liveSearch&&(s+=1),-1==s&&(s=0),s!=c&&o>s&&(s=o),s>a&&(s=a),s==h&&(s=r)),u.data("prevIndex",s),f.options.liveSearch?(n.preventDefault(),u.hasClass("dropdown-toggle")||(i.removeClass("active"),i.eq(s).addClass("active").children("a").focus(),u.focus())):i.eq(s).focus();else if(!u.is("input")){var g,v,y=[];i.each(function(){
e(this).parent().hasClass("disabled")||e.trim(e(this).text().toLowerCase()).substring(0,1)==m[n.keyCode]&&y.push(e(this).parent().index())}),g=e(document).data("keycount"),g++,e(document).data("keycount",g),v=e.trim(e(":focus").text().toLowerCase()).substring(0,1),v!=m[n.keyCode]?(g=1,e(document).data("keycount",g)):g>=y.length&&(e(document).data("keycount",0),g>y.length&&(g=1)),i.eq(y[g-1]).focus()}if((/(13|32)/.test(n.keyCode.toString(10))||/(^9$)/.test(n.keyCode.toString(10))&&f.options.selectOnTab)&&d){if(/(32)/.test(n.keyCode.toString(10))||n.preventDefault(),f.options.liveSearch)/(32)/.test(n.keyCode.toString(10))||(f.$menu.find(".active a").click(),u.focus());else{var b=e(":focus");b.click(),b.focus(),n.preventDefault()}e(document).data("keycount",0)}(/(^9$|27)/.test(n.keyCode.toString(10))&&d&&(f.multiple||f.options.liveSearch)||/(27)/.test(n.keyCode.toString(10))&&!d)&&(f.$menu.parent().removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var o=e.fn.selectpicker;e.fn.selectpicker=i,e.fn.selectpicker.Constructor=s,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=o,this},e(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",s.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),!function(e){var t,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],s=e('<textarea tabindex="-1"/>').data("autosize",!0)[0];s.style.cssText="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;",s.style.lineHeight="99px","99px"===e(s).css("lineHeight")&&i.push("lineHeight"),s.style.lineHeight="",e.fn.autosize=function(o){return this.length?(o=e.extend({},n,o||{}),s.parentNode!==document.body&&e(document.body).append(s),this.each(function(){function n(){var t,n=window.getComputedStyle?window.getComputedStyle(u,null):null;n?(t=parseFloat(n.width),("border-box"===n.boxSizing||"border-box"===n.webkitBoxSizing||"border-box"===n.mozBoxSizing)&&e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,i){t-=parseFloat(n[i])})):t=p.width(),s.style.width=Math.max(t,0)+"px"}function r(){var r={};if(t=u,s.className=o.className,s.id=o.id,c=parseFloat(p.css("maxHeight")),e.each(i,function(e,t){r[t]=p.css(t)}),e(s).css(r).attr("wrap",p.attr("wrap")),n(),window.chrome){var a=u.style.width;u.style.width="0px",u.offsetWidth,u.style.width=a}}function a(){var e,i;t!==u?r():n(),s.value=!u.value&&o.placeholder?p.attr("placeholder")||"":u.value,s.value+=o.append||"",s.style.overflowY=u.style.overflowY,i=parseFloat(u.style.height)||0,s.scrollTop=0,s.scrollTop=9e4,e=s.scrollTop,c&&e>c?(u.style.overflowY="scroll",e=c):(u.style.overflowY="hidden",h>e&&(e=h)),e+=f,Math.abs(i-e)>.01&&(u.style.height=e+"px",s.className=s.className,m&&o.callback.call(u,u),p.trigger("autosize.resized"))}function l(){clearTimeout(d),d=setTimeout(function(){var e=p.width();e!==v&&(v=e,a())},parseInt(o.resizeDelay,10))}var c,h,d,u=this,p=e(u),f=0,m=e.isFunction(o.callback),g={height:u.style.height,overflow:u.style.overflow,overflowY:u.style.overflowY,wordWrap:u.style.wordWrap,resize:u.style.resize},v=p.width(),y=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(f=p.outerHeight()-p.height()),h=Math.max(parseFloat(p.css("minHeight"))-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===y?p.css("resize","none"):"both"===y&&p.css("resize","horizontal"),"onpropertychange"in u?"oninput"in u?p.on("input.autosize keyup.autosize",a):p.on("propertychange.autosize",function(){"value"===event.propertyName&&a()}):p.on("input.autosize",a),o.resizeDelay!==!1&&e(window).on("resize.autosize",l),p.on("autosize.resize",a),p.on("autosize.resizeIncludeStyle",function(){t=null,a()}),p.on("autosize.destroy",function(){t=null,clearTimeout(d),e(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),a())})):this}}(jQuery||$);var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function e(e,t){var n=typeof e[t];return n==c||!(n!=l||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=l||!e[t])}function n(e,t){return typeof e[t]!=h}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function s(e){return e&&m(e,f)&&v(e,p)}function o(e){window.alert("Rangy not supported in your browser. Reason: "+e),y.initialized=!0,y.supported=!1}function r(){if(!y.initialized){var n,i=!1,r=!1;for(e(document,"createRange")&&(n=document.createRange(),m(n,u)&&v(n,d)&&(i=!0),n.detach()),(n=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(n,"createTextRange")&&(n=n.createTextRange(),s(n)&&(r=!0)),!i&&!r&&o("Neither Range nor TextRange are implemented"),y.initialized=!0,y.features={implementsDomRange:i,implementsTextRange:r},i=w.concat(b),r=0,n=i.length;r<n;++r)try{i[r](y)}catch(n){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",n)}}}function a(e){this.name=e,this.supported=this.initialized=!1}var l="object",c="function",h="undefined",d="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),u="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),p="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),f="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),m=i(e),g=i(t),v=i(n),y={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:m,areHostObjects:g,areHostProperties:v,isTextRange:s},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};y.fail=o,y.warn=function(e){e="Rangy warning: "+e,y.config.alertOnWarn?window.alert(e):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(e)},{}.hasOwnProperty?y.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:o("hasOwnProperty not supported");var b=[],w=[];y.init=r,y.addInitListener=function(e){y.initialized?e(y):b.push(e)};var C=[];y.addCreateMissingNativeApiListener=function(e){C.push(e)},y.createMissingNativeApi=function(e){e=e||window,r();for(var t=0,n=C.length;t<n;++t)C[t](e)},a.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},a.prototype.warn=function(e){y.warn("Module "+this.name+": "+e)},a.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)},y.createModule=function(e,t){var n=new a(e);y.modules[e]=n,w.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},y.requireModules=function(e){for(var t,n,i=0,s=e.length;i<s;++i){if(n=e[i],t=y.modules[n],!(t&&t instanceof a))throw Error("Module '"+n+"' not found");if(!t.supported)throw Error("Module '"+n+"' not supported")}};var x=!1,g=function(){x||(x=!0,y.initialized||r())};if(typeof window==h)o("No window found");else{if(typeof document!=h)return e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",g,!1),e(window,"addEventListener")?window.addEventListener("load",g,!1):e(window,"attachEvent")?window.attachEvent("onload",g):o("Window does not have required addEventListener or attachEvent method"),y;o("No document found")}}(),rangy.createModule("DomUtil",function(e,t){function n(e){for(var t=0;e=e.previousSibling;)t++;return t}function i(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(m(i,n))return n;return null}function s(e,t,n){for(n=n?e:e.parentNode;n;){if(e=n.parentNode,e===t)return n;n=e}return null}function o(e){return e=e.nodeType,3==e||4==e||8==e}function r(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function a(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=u)return e.ownerDocument;if(typeof e.document!=u)return e.document;if(e.parentNode)return a(e.parentNode);throw Error("getDocument: no document found for node")}function l(e){return e?o(e)?'"'+e.data+'"':1==e.nodeType?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName:"[No node]"}function c(e){this._next=this.root=e}function h(e,t){this.node=e,this.offset=t}function d(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var u="undefined",p=e.util;p.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),p.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var f=document.createElement("div");p.areHostMethods(f,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),p.isHostProperty(f,"innerHTML")||t.fail("Element is missing innerHTML property"),f=document.createTextNode("test"),p.areHostMethods(f,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var m=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t=this._current=this._next;if(this._current){if(e=t.firstChild,!e)for(e=null;t!==this.root&&!(e=t.nextSibling);)t=t.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},h.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+l(this.node)+":"+this.offset+")]"}},d.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},d.prototype.toString=function(){return this.message},e.dom={arrayContains:m,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==u||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){return e=e.parentNode,1==e.nodeType?e:null},getNodeIndex:n,getNodeLength:function(e){var t;return o(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:i,isAncestorOf:function(e,t,n){for(t=n?t:t.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},getClosestAncestorIn:s,isCharacterDataNode:o,insertAfter:r,splitDataNode:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),r(n,e),n},getDocument:a,getWindow:function(e){if(e=a(e),typeof e.defaultView!=u)return e.defaultView;if(typeof e.parentWindow!=u)return e.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if(typeof e.contentWindow!=u)return e.contentWindow;if(typeof e.contentDocument!=u)return e.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if(typeof e.contentDocument!=u)return e.contentDocument;if(typeof e.contentWindow!=u)return e.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return p.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,o,r){var a;if(e==o)return t===r?0:t<r?-1:1;if(a=s(o,e,!0))return t<=n(a)?-1:1;if(a=s(e,o,!0))return n(a)<r?-1:1;if(t=i(e,o),e=e===t?t:s(e,t,!0),o=o===t?t:s(o,t,!0),e===o)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(t=t.firstChild;t;){if(t===e)return-1;if(t===o)return 1;t=t.nextSibling}throw Error("Should not be here!")},inspectNode:l,fragmentFromNodeChildren:function(e){for(var t,n=a(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new c(e)},DomPosition:h},e.DOMException=d}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(A.isAncestorOf(e,t.startContainer,!0)||A.isAncestorOf(e,t.endContainer,!0))}function n(e){return A.getDocument(e.startContainer)}function i(e,t,n){if(t=e._listeners[t])for(var i=0,s=t.length;i<s;++i)t[i].call(e,{target:e,args:n})}function s(e){return new R(e.parentNode,A.getNodeIndex(e))}function o(e){return new R(e.parentNode,A.getNodeIndex(e)+1)}function r(e,t,n){var i=11==e.nodeType?e.firstChild:e;return A.isCharacterDataNode(t)?n==t.length?A.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:A.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function a(e){for(var t,i,s=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(t=e.getSubtreeIterator(),i.appendChild(a(t)),t.detach(!0)),10==i.nodeType)throw new L("HIERARCHY_REQUEST_ERR");s.appendChild(i)}return s}function l(e,t,n){for(var i,s,n=n||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i)){n.stop=!0;break}if(i=e.getSubtreeIterator(),l(i,t,n),i.detach(!0),n.stop)break}else for(i=A.createIterator(i);s=i.next();)if(!1===t(s))return void(n.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function h(e){for(var t,i,s=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(h(i)),i.detach(!0)):e.remove(),10==t.nodeType)throw new L("HIERARCHY_REQUEST_ERR");s.appendChild(t)}return s}function d(e,t,n){var i,s=!(!t||!t.length),o=!!n;s&&(i=RegExp("^("+t.join("|")+")$"));var r=[];return l(new p(e,(!1)),function(e){(!s||i.test(e.nodeType))&&(!o||n(e))&&r.push(e)}),r}function u(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+A.inspectNode(e.startContainer)+":"+e.startOffset+", "+A.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&A.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||A.isCharacterDataNode(this.sc)?A.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||A.isCharacterDataNode(this.ec)?A.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=d(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var i,s=n?t:t.parentNode;s;){if(i=s.nodeType,A.arrayContains(e,i))return s;s=s.parentNode}return null}}function v(e,t){if(W(e,t))throw new f("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new L("INVALID_STATE_ERR")}function b(e,t){if(!A.arrayContains(t,e.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(A.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new L("INDEX_SIZE_ERR")}function C(e,t){if($(e,!0)!==$(t,!0))throw new L("WRONG_DOCUMENT_ERR")}function x(e){if(Y(e,!0))throw new L("NO_MODIFICATION_ALLOWED_ERR")}function _(e,t){if(!e)throw new L(t)}function S(e){if(y(e),!((A.arrayContains(H,e.startContainer.nodeType)||$(e.startContainer,!0))&&(A.arrayContains(H,e.endContainer.nodeType)||$(e.endContainer,!0))&&e.startOffset<=(A.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(A.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function k(){}function E(e){e.START_TO_START=V,e.START_TO_END=G,e.END_TO_END=K,e.END_TO_START=Q,e.NODE_BEFORE=X,e.NODE_AFTER=Z,e.NODE_BEFORE_AND_AFTER=J,e.NODE_INSIDE=ee}function T(e){E(e),E(e.prototype)}function N(e,t){return function(){S(this);var n=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer,r=new p(this,(!0));return n!==s&&(n=A.getClosestAncestorIn(n,s,!0),i=o(n),n=i.node,i=i.offset),l(r,x),r.reset(),s=e(r),r.detach(),t(this,n,i,n,i),s}}function D(n,i,r){function a(e,t){return function(n){y(this),b(n,P),b(B(n),H),n=(e?s:o)(n),(t?l:d)(this,n.node,n.offset)}}function l(e,t,n){var s=e.endContainer,o=e.endOffset;t===e.startContainer&&n===e.startOffset||(B(t)==B(s)&&1!=A.comparePoints(t,n,s,o)||(s=t,o=n),i(e,t,n,s,o))}function d(e,t,n){var s=e.startContainer,o=e.startOffset;t===e.endContainer&&n===e.endOffset||(B(t)==B(s)&&-1!=A.comparePoints(t,n,s,o)||(s=t,o=n),i(e,s,o,t,n))}n.prototype=new k,e.util.extend(n.prototype,{setStart:function(e,t){y(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),w(e,t),d(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){S(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),i(this,e,0,e,A.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,P);var t=s(e),e=o(e);i(this,t.node,t.offset,e.node,e.offset)},extractContents:N(h,i),deleteContents:N(c,i),canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new p(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){r(this)},splitBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,s=this.endOffset,o=e===n;A.isCharacterDataNode(n)&&0<s&&s<n.length&&A.splitDataNode(n,s),A.isCharacterDataNode(e)&&0<t&&t<e.length&&(e=A.splitDataNode(e,t),o?(s-=t,n=e):n==e.parentNode&&s>=A.getNodeIndex(e)&&s++,t=0),i(this,e,t,n,s)},normalizeBoundaries:function(){S(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,s=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,s=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},r=function(i){var o=i.previousSibling;if(o&&o.nodeType==i.nodeType){e=i;var r=i.length;t=o.length,i.insertData(0,o.data),o.parentNode.removeChild(o),e==n?(s+=t,n=e):n==i.parentNode&&(o=A.getNodeIndex(i),s==o?(n=i,s=r):s>o&&s--)}},a=!0;A.isCharacterDataNode(n)?n.length==s&&o(n):(0<s&&(a=n.childNodes[s-1])&&A.isCharacterDataNode(a)&&o(a),a=!this.collapsed),a?A.isCharacterDataNode(e)?0==t&&r(e):t<e.childNodes.length&&(o=e.childNodes[t])&&A.isCharacterDataNode(o)&&r(o):(e=n,t=s),i(this,e,t,n,s)},collapseToPoint:function(e,t){y(this),v(e,!0),w(e,t),(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)&&i(this,e,t,e,t)}}),T(n)}function O(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:A.getCommonAncestor(e.startContainer,e.endContainer)}function M(e,t,n,s,o){var r=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==s||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=s,e.endOffset=o,O(e),i(e,"boundarychange",{startMoved:r,endMoved:a})}function I(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},O(this)}e.requireModules(["DomUtil"]);var A=e.dom,R=A.DomPosition,L=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,A.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!A.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new I(n(this.range));var t=this._current,i=t,s=0,o=t,r=A.getNodeLength(t);A.isAncestorOf(t,this.sc,!0)&&(i=this.sc,s=this.so),A.isAncestorOf(t,this.ec,!0)&&(o=this.ec,r=this.eo),M(e,i,s,o,r)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var P=[1,3,4,5,7,8,10],H=[2,9,11],F=[1,3,4,5,7,8,10,11],z=[1,3,4,5,7,8],B=A.getRootContainer,$=g([9,11]),Y=g([5,6,10,12]),W=g([6,10,12]),j=document.createElement("style"),U=!1;try{j.innerHTML="<b>x</b>",U=3==j.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=U;var q="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),V=0,G=1,K=2,Q=3,X=0,Z=1,J=2,ee=3;k.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){S(this),C(this.startContainer,t.startContainer);var n=e==Q||e==V?"start":"end",i=e==G||e==V?"start":"end";return A.comparePoints(this[n+"Container"],this[n+"Offset"],t[i+"Container"],t[i+"Offset"])},insertNode:function(e){if(S(this),b(e,F),x(this.startContainer),A.isAncestorOf(e,this.startContainer,!0))throw new L("HIERARCHY_REQUEST_ERR");this.setStartBefore(r(e,this.startContainer,this.startOffset))},cloneContents:function(){S(this);var e,t;return this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&A.isCharacterDataNode(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(t=new p(this,(!0)),e=a(t),t.detach(),e)},canSurroundContents:function(){S(this),x(this.startContainer),x(this.endContainer);var e=new p(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,z),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new I(n(this)),i=q.length;i--;)e=q[i],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&A.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],e=new p(this,(!0));return l(e,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),e.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=A.getNodeIndex(e);if(!t)throw new L("NOT_FOUND_ERR");return e=this.comparePoint(t,n),t=this.comparePoint(t,n+1),0>e?0<t?J:X:0<t?Z:ee},comparePoint:function(e,t){return S(this),_(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),0>A.comparePoints(e,t,this.startContainer,this.startOffset)?-1:0<A.comparePoints(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:U?function(e){var t=this.startContainer,n=A.getDocument(t);if(!t)throw new L("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:A.isCharacterDataNode(t)&&(i=A.parentElement(t)),i=null===i||"HTML"==i.nodeName&&A.isHtmlNamespace(A.getDocument(i).documentElement)&&A.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=e,A.fragmentFromNodeChildren(i)}:function(e){y(this);var t=n(this).createElement("body");return t.innerHTML=e,A.fragmentFromNodeChildren(t)},toHtml:function(){S(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(S(this),_(e,"NOT_FOUND_ERR"),A.getDocument(e)!==n(this))return!1;var i=e.parentNode,s=A.getNodeIndex(e);_(i,"NOT_FOUND_ERR");var o=A.comparePoints(i,s,this.endContainer,this.endOffset),i=A.comparePoints(i,s+1,this.startContainer,this.startOffset);return t?0>=o&&0<=i:0>o&&0<i},isPointInRange:function(e,t){return S(this),_(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),0<=A.comparePoints(e,t,this.startContainer,this.startOffset)&&0>=A.comparePoints(e,t,this.endContainer,this.endOffset)},intersectsRange:function(e,t){if(S(this),n(e)!=n(this))throw new L("WRONG_DOCUMENT_ERR");var i=A.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),s=A.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=i&&0<=s:0>i&&0<s},intersection:function(e){if(this.intersectsRange(e)){var t=A.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=A.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==A.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==A.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new f("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ee},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&0>=this.comparePoint(e,A.getNodeLength(e))},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);return 0<n.length?(t.setStart(n[0],0),e=n.pop(),t.setEnd(e,e.length),e=this.containsRange(t),t.detach(),e):this.containsNodeContents(e)},createNodeIterator:function(e,t){return S(this),new m(this,e,t)},getNodes:function(e,t){return S(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return I.rangesEqual(this,e)},inspect:function(){return u(this)}},D(I,M,function(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,i(e,"detach",null),e._listeners=null}),e.rangePrototype=k.prototype,I.rangeProperties=q,I.RangeIterator=p,I.copyComparisonConstants=T,I.createPrototypeRange=D,I.inspect=u,I.getRangeDocument=n,I.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=I,e.RangeException=f}),rangy.createModule("WrappedRange",function(e){function t(e,t,n,i){var r=e.duplicate();r.collapse(n);var a=r.parentElement();if(s.isAncestorOf(t,a,!0)||(a=t),!a.canHaveHTML)return new o(a.parentNode,s.getNodeIndex(a));var l,t=s.getDocument(a).createElement("span"),c=n?"StartToStart":"StartToEnd";do a.insertBefore(t,t.previousSibling),r.moveToElementText(t);while(0<(l=r.compareEndPoints(c,e))&&t.previousSibling);if(c=t.nextSibling,-1==l&&c&&s.isCharacterDataNode(c)){if(r.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(c.data))for(a=r.duplicate(),n=a.text.replace(/\r\n/g,"\r").length,n=a.moveStart("character",n);-1==a.compareEndPoints("StartToEnd",a);)n++,a.moveStart("character",1);else n=r.text.length;a=new o(c,n)}else c=(i||!n)&&t.previousSibling,a=(n=(i||n)&&t.nextSibling)&&s.isCharacterDataNode(n)?new o(n,0):c&&s.isCharacterDataNode(c)?new o(c,c.length):new o(a,s.getNodeIndex(t));return t.parentNode.removeChild(t),a}function n(e,t){var n,i,o=e.offset,r=s.getDocument(e.node),a=r.body.createTextRange(),l=s.isCharacterDataNode(e.node);return l?(n=e.node,i=n.parentNode):(n=e.node.childNodes,n=o<n.length?n[o]:null,i=e.node),r=r.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),a.moveToElementText(r),a.collapse(!t),i.removeChild(r),l&&a[t?"moveStart":"moveEnd"]("character",o),a}e.requireModules(["DomUtil","DomRange"]);var i,s=e.dom,o=s.DomPosition,r=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){i=function(e){this.textRange=e,this.refresh()},i.prototype=new r(document),i.prototype.refresh=function(){var e,n,i=this.textRange;e=i.parentElement();var o=i.duplicate();o.collapse(!0),n=o.parentElement(),o=i.duplicate(),o.collapse(!1),i=o.parentElement(),n=n==i?n:s.getCommonAncestor(n,i),n=n==e?n:s.getCommonAncestor(e,n),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?n=e=t(this.textRange,n,!0,!0):(e=t(this.textRange,n,!0,!1),n=t(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(n.node,n.offset)},r.copyComparisonConstants(i);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=i),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else(function(){function t(e){for(var t,n=a.length;n--;)t=a[n],e[t]=e.nativeRange[t]}var n,o,a=r.rangeProperties;i=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e,t(this)},r.createPrototypeRange(i,function(e,t,n,i,s){var o=e.endContainer!==i||e.endOffset!=s;(e.startContainer!==t||e.startOffset!=n||o)&&(e.setEnd(i,s),e.setStart(t,n))},function(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=a.length;n--;)t=a[n],e[t]=null}),n=i.prototype,n.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},n.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},n.collapse=function(e){this.nativeRange.collapse(e),t(this)},n.cloneRange=function(){
return new i(this.nativeRange.cloneRange())},n.refresh=function(){t(this)},n.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");s.getBody(document).appendChild(l);var c=document.createRange();c.setStart(l,0),c.setEnd(l,0);try{c.setStart(l,1),n.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},n.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},o=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(e){n.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(t){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},n.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(t){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},o=function(e,n){return function(i){try{this.nativeRange[e](i)}catch(t){this.nativeRange[n](i),this.nativeRange[e](i)}t(this)}}}n.setStartBefore=o("setStartBefore","setEndBefore"),n.setStartAfter=o("setStartAfter","setEndAfter"),n.setEndBefore=o("setEndBefore","setStartBefore"),n.setEndAfter=o("setEndAfter","setStartAfter"),c.selectNodeContents(l),n.selectNodeContents=c.startContainer==l&&c.endContainer==l&&0==c.startOffset&&c.endOffset==l.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,r.getEndOffset(e))},c.selectNodeContents(l),c.setEnd(l,3),o=document.createRange(),o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),n.compareBoundaryPoints=-1==c.compareBoundaryPoints(c.START_TO_END,o)&1==c.compareBoundaryPoints(c.END_TO_START,o)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(c,"createContextualFragment")&&(n.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.getBody(document).removeChild(l),c.detach(),o.detach()})(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(i.rangeToTextRange=function(e){if(e.collapsed)return n(new o(e.startContainer,e.startOffset),!0);var t=n(new o(e.startContainer,e.startOffset),!0),i=n(new o(e.endContainer,e.endOffset),!1),e=s.getDocument(e.startContainer).body.createTextRange();return e.setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",i),e}),i.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=i,e.createRange=function(t){return t=t||document,new i(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new r(e)},e.createIframeRange=function(t){return e.createRange(s.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(s.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){t=t.document,"undefined"==typeof t.createRange&&(t.createRange=function(){return e.createRange(this)}),t=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function i(e){return(e||window).document.selection}function s(e,t,n){var i=n?"end":"start",n=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function o(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function r(t){var n;return t instanceof b?(n=t._selectionNativeRange,n||(n=e.createNativeRange(v.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof w?n=t.nativeRange:e.features.implementsDomRange&&t instanceof v.getWindow(t.startContainer).Range&&(n=t),n}function a(e){var t,n=e.getNodes();e:if(n.length&&1==n[0].nodeType){t=1;for(var i=n.length;t<i;++t)if(!v.isAncestorOf(n[0],n[t])){t=!1;break e}t=!0}else t=!1;if(!t)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function l(e,t){var n=new w(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function c(t){if(t._ranges.length=0,"None"==t.docSelection.type)o(t);else{var n=t.docSelection.createRange();if(n&&"undefined"!=typeof n.text)l(t,n);else{t.rangeCount=n.length;for(var i,r=v.getDocument(n.item(0)),a=0;a<t.rangeCount;++a)i=e.createRange(r),i.selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function h(e,t){for(var n=e.docSelection.createRange(),i=a(t),s=v.getDocument(n.item(0)),s=v.getBody(s).createControlRange(),o=0,r=n.length;o<r;++o)s.add(n.item(o));try{s.add(i)}catch(e){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}s.select(),c(e)}function d(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function u(e,t){for(var n,i=v.getDocument(t[0].startContainer),i=v.getBody(i).createControlRange(),s=0;s<rangeCount;++s){n=a(t[s]);try{i.add(n)}catch(e){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),c(e)}function p(e,t){if(e.anchorNode&&v.getDocument(e.anchorNode)!==v.getDocument(t))throw new C("WRONG_DOCUMENT_ERR")}function f(e){var t=[],n=new x(e.anchorNode,e.anchorOffset),i=new x(e.focusNode,e.focusOffset),s="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var o=0,r=e.rangeCount;o<r;++o)t[o]=b.inspect(e.getRangeAt(o));return"["+s+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var m,g,v=e.dom,y=e.util,b=e.DomRange,w=e.WrappedRange,C=e.DOMException,x=v.DomPosition,_=e.util.isHostMethod(window,"getSelection"),S=e.util.isHostObject(document,"selection"),k=S&&(!_||e.config.preferTextRange);k?(m=i,e.isSelectionValid=function(e){var e=(e||window).document,t=e.selection;return"None"!=t.type||v.getDocument(t.createRange().parentElement())==e}):_?(m=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=m;var _=m(),E=e.createNativeRange(document),T=v.getBody(document),N=y.areHostObjects(_,y.areHostProperties(_,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=N;var D=y.isHostMethod(_,"extend");e.features.selectionHasExtend=D;var O="number"==typeof _.rangeCount;e.features.selectionHasRangeCount=O;var M=!1,I=!0;y.areHostMethods(_,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof _.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");T.appendChild(e);var t=v.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=v.getIframeWindow(e).getSelection(),i=t.documentElement.lastChild.firstChild,t=t.createRange();t.setStart(i,1),t.collapse(!0),n.addRange(t),I=1==n.rangeCount,n.removeAllRanges();var s=t.cloneRange();t.setStart(i,0),s.setEnd(i,2),n.addRange(t),n.addRange(s),M=2==n.rangeCount,t.detach(),s.detach(),T.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=M,e.features.collapsedNonEditableSelectionsSupported=I;var A,R=!1;T&&y.isHostMethod(T,"createControlRange")&&(A=T.createControlRange(),y.areHostProperties(A,["item","add"])&&(R=!0)),e.features.implementsControlRange=R,g=N?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var L;if(y.isHostMethod(_,"getRangeAt")?L=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:N&&(L=function(t){var n=v.getDocument(t.anchorNode),n=e.createRange(n);return n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(t.focusNode,t.focusOffset),n.setEnd(t.anchorNode,t.anchorOffset)),n}),e.getSelection=function(e){var e=e||window,t=e._rangySelection,n=m(e),s=S?i(e):null;return t?(t.nativeSelection=n,t.docSelection=s,t.refresh(e)):(t=new d(n,s,e),e._rangySelection=t),t},e.getIframeSelection=function(t){return e.getSelection(v.getIframeWindow(t))},A=d.prototype,!k&&N&&y.areHostMethods(_,["removeAllRanges","addRange"])){A.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),o(this)};var P=function(t,n){var i=b.getRangeDocument(n),i=e.createRange(i);i.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(r(i)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};A.addRange=O?function(t,n){if(R&&S&&"Control"==this.docSelection.type)h(this,t);else if(n&&D)P(this,t);else{var i;M?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(r(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1?(e.config.checkSelectionRanges&&(i=L(this.nativeSelection,this.rangeCount-1))&&!b.rangesEqual(i,t)&&(t=new w(i)),this._ranges[this.rangeCount-1]=t,s(this,t,z(this.nativeSelection)),this.isCollapsed=g(this)):this.refresh()}}:function(e,t){t&&D?P(this,e):(this.nativeSelection.addRange(r(e)),this.refresh())},A.setRanges=function(e){if(R&&e.length>1)u(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(y.isHostMethod(_,"empty")&&y.isHostMethod(E,"select")&&R&&k))return t.fail("No means of selecting a Range or TextRange was found"),!1;A.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=v.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=v.getDocument(t.item(0)).body.createTextRange())}e&&(e.body.createTextRange().select(),this.docSelection.empty())}}catch(e){}o(this)},A.addRange=function(e){"Control"==this.docSelection.type?h(this,e):(w.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,e,!1))},A.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?u(this,e):t&&this.addRange(e[0])}}A.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new C("INDEX_SIZE_ERR");return this._ranges[e]};var H;if(k)H=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=v.getBody(t.win.document).createTextRange(),n.collapse(!0)),"Control"==t.docSelection.type?c(t):n&&"undefined"!=typeof n.text?l(t,n):o(t)};else if(y.isHostMethod(_,"getRangeAt")&&"number"==typeof _.rangeCount)H=function(t){if(R&&S&&"Control"==t.docSelection.type)c(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;n<i;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],z(t.nativeSelection)),t.isCollapsed=g(t)}else o(t)};else{if(!N||"boolean"!=typeof _.isCollapsed||"boolean"!=typeof E.collapsed||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;H=function(e){var t;t=e.nativeSelection,t.anchorNode?(t=L(t,0),e._ranges=[t],e.rangeCount=1,t=e.nativeSelection,e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset,e.isCollapsed=g(e)):o(e)}}A.refresh=function(e){var t=e?this._ranges.slice(0):null;if(H(this),e){if(e=t.length,e!=this._ranges.length)return!1;for(;e--;)if(!b.rangesEqual(t[e],this._ranges[e]))return!1;return!0}};var F=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var s=0,r=n.length;s<r;++s)i||t!==n[s]?e.addRange(n[s]):i=!0;e.rangeCount||o(e)};A.removeRange=R?function(e){if("Control"==this.docSelection.type){for(var t,n=this.docSelection.createRange(),e=a(e),i=v.getDocument(n.item(0)),i=v.getBody(i).createControlRange(),s=!1,o=0,r=n.length;o<r;++o)t=n.item(o),t!==e||s?i.add(n.item(o)):s=!0;i.select(),c(this)}else F(this,e)}:function(e){F(this,e)};var z;!k&&N&&e.features.implementsDomRange?(z=function(e){var t=!1;return e.anchorNode&&(t=1==v.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},A.isBackwards=function(){return z(this)}):z=A.isBackwards=function(){return!1},A.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},A.collapse=function(t,n){p(this,t);var i=e.createRange(v.getDocument(t));i.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},A.collapseToStart=function(){if(!this.rangeCount)throw new C("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},A.collapseToEnd=function(){if(!this.rangeCount)throw new C("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},A.selectAllChildren=function(t){p(this,t);var n=e.createRange(v.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},A.deleteFromDocument=function(){if(R&&S&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){t=this.getAllRanges(),this.removeAllRanges(),e=0;for(var n=t.length;e<n;++e)t[e].deleteContents();this.addRange(t[n-1])}},A.getAllRanges=function(){return this._ranges.slice(0)},A.setSingleRange=function(e){this.setRanges([e])},A.containsNode=function(e,t){for(var n=0,i=this._ranges.length;n<i;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},A.toHtml=function(){var e="";if(this.rangeCount){for(var e=b.getRangeDocument(this._ranges[0]).createElement("div"),t=0,n=this._ranges.length;t<n;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e},A.getName=function(){return"WrappedSelection"},A.inspect=function(){return f(this)},A.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},d.inspect=f,e.Selection=d,e.selectionPrototype=A,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var s=i.constructor,o=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return"object"==e?o:s.valueOf()},n.call(o,t),"function"==typeof o.init&&o.init(),o},Base.prototype={extend:function(e,t){if(1<arguments.length){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf(),t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t};t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var s=Base.prototype.extend;!Base._prototyping&&"function"!=typeof this&&(s=this.extend||s);for(var o={toSource:null},r=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=r[a++];)e[l]!=o[l]&&s.call(this,l,e[l]);for(var l in e)o[l]||s.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(e){this.extend(e)}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return""+this.valueOf()}}),wysihtml5.browser=function(){var e=navigator.userAgent,t=document.createElement("div"),n=-1!==e.indexOf("MSIE")&&-1===e.indexOf("Opera"),i=-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),s=-1!==e.indexOf("AppleWebKit/"),o=-1!==e.indexOf("Chrome/"),r=-1!==e.indexOf("Opera/");return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),n="contentEditable"in t,i=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,s=document.querySelector&&document.querySelectorAll,e=this.isIos()&&5>(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return n&&i&&s&&!e},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!i},hasCurrentStyleProperty:function(){return"currentStyle"in t},insertsLineBreaksOnReturn:function(){return i},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){var n;return(n="on"+e in t)||(t.setAttribute("on"+e,"return;"),n="function"==typeof t["on"+e]),n},supportsEventsInIframeCorrectly:function(){return!r},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return s||i},supportsDataTransfer:function(){try{return s&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){return e=e.createElement("div"),e.innerHTML="<article>foo</article>","<article>foo</article>"===e.innerHTML.toLowerCase()},supportsCommand:function(){var e={formatBlock:n,insertUnorderedList:n||r||s,insertOrderedList:n||r||s},t={insertHTML:i};return function(n,i){if(!e[i]){try{return n.queryCommandSupported(i)}catch(e){}try{return n.queryCommandEnabled(i)}catch(e){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return i||r||s},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return i||n||r},clearsListsInContentEditableCorrectly:function(){return i||n||s},autoScrollsToCaret:function(){return!s},autoClosesUnclosedTags:function(){var e,n=t.cloneNode(!1);return n.innerHTML="<p><div></div>",n=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===n||"<p><div></div></p>"===n,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==(""+document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in t},needsSpaceAfterLineBreak:function(){return r},supportsSpeechApiOn:function(t){return 11<=(e.match(/Chrome\/(\d+)/)||[,0])[1]&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(e){return n&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return i||o||r}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1},without:function(t){for(var t=wysihtml5.lang.array(t),n=[],i=0,s=e.length;i<s;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];t<n;t++)i.push(e[t]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,s=0;if(e){for(n=this.events[e]||[],i=[];s<n.length;s++)n[s]!==t&&t&&i.push(n[s]);this.events[e]=i}else this.events={};return this}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){return n=""+n,{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}}(),function(e){function t(e){return e.replace(s,function(e,t){var n=(t.match(o)||[])[1]||"",i=a[n],t=t.replace(o,"");t.split(i).length>t.split(n).length&&(t+=n,n="");var s=i=t;return t.length>r&&(s=s.substr(0,r)+"..."),"www."===i.substr(0,4)&&(i="http://"+i),'<a href="'+i+'">'+s+"</a>"+n})}function n(o){if(!i.contains(o.nodeName)){if(o.nodeType!==e.TEXT_NODE||!o.data.match(s)){for(a=e.lang.array(o.childNodes).get(),r=a.length,l=0;l<r;l++)n(a[l]);return o}var r,a=o.parentNode;r=a.ownerDocument;var l=r._wysihtml5_tempElement;for(l||(l=r._wysihtml5_tempElement=r.createElement("div")),r=l,r.innerHTML="<span></span>"+t(o.data),r.removeChild(r.firstChild);r.firstChild;)a.insertBefore(r.firstChild,o);a.removeChild(o)}}var i=e.lang.array("CODE PRE A SCRIPT HEAD TITLE STYLE".split(" ")),s=/((https?:\/\/|www\.)[^\s<]{3,})/gi,o=/([^\w\/\-](,?))$/i,r=100,a={")":"(","]":"[","}":"{"};e.dom.autoLink=function(e){var t;e:{t=e;for(var s;t.parentNode;){if(t=t.parentNode,s=t.nodeName,i.contains(s)){t=!0;break e}if("body"===s)break}t=!1}return t?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),n(e))},e.dom.autoLink.URL_REG_EXP=s}(wysihtml5),function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,i){return t?e.classList.add(i):void(n.hasClass(e,i)||(e.className+=" "+i))},n.removeClass=function(e,n){return t?e.classList.remove(n):void(e.className=e.className.replace(RegExp("(^|\\s+)"+n+"(\\s+|$)")," "))},n.hasClass=function(e,n){if(t)return e.classList.contains(n);var i=e.className;return 0<i.length&&(i==n||RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}return function(t,n){if("UL"===t.nodeName||"OL"===t.nodeName||"MENU"===t.nodeName)return t;var i,s,o,r,a,l=t.ownerDocument,c=l.createElement(n),h=t.querySelectorAll("br"),d=h.length;for(a=0;a<d;a++)for(i=h[a];(s=i.parentNode)&&s!==t&&s.lastChild===i;){if("block"===wysihtml5.dom.getStyle("display").from(s)){s.removeChild(i);break}wysihtml5.dom.insert(i).after(i.parentNode)}for(h=wysihtml5.lang.array(t.childNodes).get(),d=h.length,a=0;a<d;a++)r=r||e(l,c),i=h[a],s="block"===wysihtml5.dom.getStyle("display").from(i),o="BR"===i.nodeName,s?(r=r.firstChild?e(l,c):r,r.appendChild(i),r=null):o?r=r.firstChild?null:r:r.appendChild(i);return t.parentNode.replaceChild(c,t),c}}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,s=0,o=e.length;s<o;s++)i=e[s],"undefined"!=typeof t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(n){var i;e:for(var s=0,o=t.length;s<o;s++)if("border-box"===e.getStyle(t[s]).from(n)){i=t[s];break e}return!!i&&parseInt(e.getStyle("width").from(n),10)<n.offsetWidth};e.copyStyles=function(i){return{from:function(s){n(s)&&(i=wysihtml5.lang.array(i).without(t));for(var o,r="",a=i.length,l=0;l<a;l++)o=i[l],r+=o+":"+e.getStyle(o).from(s)+";";return{to:function(t){return e.setStyles(r).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,s){return e.dom.observe(t,i,function(i){for(var o=i.target,r=e.lang.array(t.querySelectorAll(n));o&&o!==t;){if(r.contains(o)){s.call(o,i);break}o=o.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e="abbr article aside audio bdi canvas command datalist details figcaption figure footer header hgroup keygen mark meter nav output progress rp rt ruby svg section source summary time track video wbr".split(" ");return function(t,n){var i,n=n||document;if("object"==typeof t&&t.nodeType)i=n.createElement("div"),i.appendChild(t);else if(wysihtml5.browser.supportsHTML5Tags(n))i=n.createElement("div"),i.innerHTML=t;else{if(i=n,!i._wysihtml5_supportsHTML5Tags){for(var s=0,o=e.length;s<o;s++)i.createElement(e[s]);i._wysihtml5_supportsHTML5Tags=!0}i=n,s=i.createElement("div"),s.style.display="none",i.body.appendChild(s);try{s.innerHTML=t}catch(e){}i.body.removeChild(s),i=s}return i}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return!t||!t.length||("string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e))}return function(t,n,i){if(i=i||50,n.className||n.classRegExp){e:{for(var s=n.nodeName,o=n.className,n=n.classRegExp;i--&&t&&"BODY"!==t.nodeName;){var r;if((r=t.nodeType===wysihtml5.ELEMENT_NODE)&&(r=e(t.nodeName,s))){r=o;var a=(t.className||"").match(n)||[];r=r?a[a.length-1]===r:!!a.length}if(r)break e;t=t.parentNode}t=null}return t}e:{for(s=n.nodeName,o=i;o--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,s))break e;t=t.parentNode}t=null}return t}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var s=i.ownerDocument,o=t[n]||e(n),r=i.style,a=i.currentStyle,l=r[o];if(l)return l;if(a)try{return a[o]}catch(e){}var c,o=s.defaultView||s.parentWindow,s=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;if(o.getComputedStyle)return s&&(c=r.overflow,r.overflow="hidden"),i=o.getComputedStyle(i,null).getPropertyValue(n),s&&(r.overflow=c||""),i}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){var e={},t=1;return function(n,i){var s=(n._wysihtml5_identifier||(n._wysihtml5_identifier=t++))+":"+i,o=e[s];return o||(o=e[s]=n.getElementsByTagName(i)),0<o.length}}(),function(e){var t={},n=1;e.dom.hasElementWithClassName=function(i,s){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+s);var o=(i._wysihtml5_identifier||(i._wysihtml5_identifier=n++))+":"+s,r=t[o];return r||(r=t[o]=i.getElementsByClassName(s)),0<r.length}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(e,t,n){for(var i,s,t="string"==typeof t?[t]:t,o=0,r=t.length;o<r;o++)s=t[o],e.addEventListener?e.addEventListener(s,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+s,i));return{stop:function(){for(var s,o=0,r=t.length;o<r;o++)s=t[o],e.removeEventListener?e.removeEventListener(s,n,!1):e.detachEvent("on"+s,i)}}},wysihtml5.dom.parse=function(){function e(t,s){var o,r=t.childNodes,a=r.length;o=n[t.nodeType];var l=0;if(o=o&&o(t),!o)return null;for(l=0;l<a;l++)(newChild=e(r[l],s))&&o.appendChild(newChild);return s&&1>=o.childNodes.length&&o.nodeName.toLowerCase()===i&&!o.attributes.length?o.firstChild:o}function t(e,t){var n,t=t.toLowerCase();if((n="IMG"==e.nodeName)&&(n="src"==t)){var i;try{i=e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){e.complete&&"complete"===e.readyState&&(i=!0)}n=!0===i}return n?e.src:a&&"outerHTML"in e?-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null:e.getAttribute(t)}var n={1:function(e){var n,o,a=r.tags;if(o=e.nodeName.toLowerCase(),n=e.scopeName,e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(n&&"HTML"!=n&&(o=n+":"+o),"outerHTML"in e&&!wysihtml5.browser.autoClosesUnclosedTags()&&"P"===e.nodeName&&"</p>"!==e.outerHTML.slice(-4).toLowerCase()&&(o="div"),o in a){if(n=a[o],!n||n.remove)return null;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:i}}o=e.ownerDocument.createElement(n.rename_tag||o);var a={},h=n.set_class,d=n.add_class,u=n.set_attributes,p=n.check_attributes,f=r.classes,m=0,g=[];n=[];var v,y=[],b=[];if(u&&(a=wysihtml5.lang.object(u).clone()),p)for(v in p)(u=l[p[v]])&&(u=u(t(e,v)),"string"==typeof u&&(a[v]=u));if(h&&g.push(h),d)for(v in d)(u=c[d[v]])&&(h=u(t(e,v)),"string"==typeof h&&g.push(h));for(f["_wysihtml5-temp-placeholder"]=1,(b=e.getAttribute("class"))&&(g=g.concat(b.split(s))),d=g.length;m<d;m++)e=g[m],f[e]&&n.push(e);for(f=n.length;f--;)e=n[f],wysihtml5.lang.array(y).contains(e)||y.unshift(e);y.length&&(a.class=y.join(" "));for(v in a)try{o.setAttribute(v,a[v])}catch(e){}return a.src&&("undefined"!=typeof a.width&&o.setAttribute("width",a.width),"undefined"!=typeof a.height&&o.setAttribute("height",a.height)),o},3:function(e){return e.ownerDocument.createTextNode(e.data)}},i="span",s=/\s+/,o={tags:{},classes:{}},r={},a=!wysihtml5.browser.supportsGetAttributeCorrectly(),l={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}()},c={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[(""+t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[(""+t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[(""+t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[(""+t).charAt(0)]}}()};return function(t,n,i,s){wysihtml5.lang.object(r).merge(o).merge(n).get();for(var i=i||t.ownerDocument||document,n=i.createDocumentFragment(),a="string"==typeof t,t=a?wysihtml5.dom.getAsDom(t,i):t;t.firstChild;)i=t.firstChild,t.removeChild(i),(i=e(i,s))&&n.appendChild(i);return t.innerHTML="",t.appendChild(n),a?wysihtml5.quirks.getCorrectInnerHTML(t):t}}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t=wysihtml5.lang.array(e.childNodes).get(),n=t.length,i=0;i<n;i++)e=t[i],e.nodeType===wysihtml5.TEXT_NODE&&""===e.data&&e.parentNode.removeChild(e)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),
i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode)if(e.firstChild){for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}else e.parentNode.removeChild(e)},function(e){function t(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}e.resolveList=function(n){if("MENU"===n.nodeName||"UL"===n.nodeName||"OL"===n.nodeName){var i,s,o,r=n.ownerDocument.createDocumentFragment(),a=n.previousElementSibling||n.previousSibling;for(a&&"block"!==e.getStyle("display").from(a)&&t(r);o=n.firstChild;){for(i=o.lastChild;a=o.firstChild;)s=(s=a===i)&&"block"!==e.getStyle("display").from(a)&&"BR"!==a.nodeName,r.appendChild(a),s&&t(r);o.parentNode.removeChild(o)}n.parentNode.replaceChild(r,n)}}}(wysihtml5.dom),function(e){var t=document,n="parent top opener frameElement frames localStorage globalStorage sessionStorage indexedDB".split(" "),i="open close openDialog showModalDialog alert confirm prompt openDatabase postMessage XMLHttpRequest XDomainRequest".split(" "),s=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(o){if(e.dom.contains(t.documentElement,o)){var r=this,a=o.contentWindow,l=o.contentWindow.document,c=this._getHtml({charset:t.characterSet||t.charset||"utf-8",stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return o.contentWindow},this.getDocument=function(){return o.contentWindow.document},a.onerror=function(e,t,n){throw Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var h,c=0;for(h=n.length;c<h;c++)this._unset(a,n[c]);for(c=0,h=i.length;c<h;c++)this._unset(a,i[c],e.EMPTY_FUNCTION);for(c=0,h=s.length;c<h;c++)this._unset(l,s[c]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){r.callback(r)},0)}},_getHtml:function(t){var n,i=t.stylesheets,s="",o=0;if(i="string"==typeof i?[i]:i)for(n=i.length;o<n;o++)s+='<link rel="stylesheet" href="'+i[o]+'">';return t.stylesheets=s,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,s){try{t[n]=i}catch(e){}try{t.__defineGetter__(n,function(){return i})}catch(e){}if(s)try{t.__defineSetter__(n,function(){})}catch(e){}if(!e.browser.crashesWhenDefineProperty(n))try{var o={get:function(){return i}};s&&(o.set=function(){}),Object.defineProperty(t,n,o)}catch(e){}}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){if(t=t.style,"string"==typeof e)t.cssText+=";"+e;else for(var n in e)"float"===n?(t.cssFloat=e[n],t.styleFloat=e[n]):t[n]=e[n]}}},function(e){e.simulatePlaceholder=function(t,n,i){var s=function(){n.hasPlaceholderSet()&&n.clear(),e.removeClass(n.element,"placeholder")},o=function(){n.isEmpty()&&(n.setValue(i),e.addClass(n.element,"placeholder"))};t.observe("set_placeholder",o).observe("unset_placeholder",s).observe("focus:composer",s).observe("paste:composer",s).observe("blur:composer",o),o()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){var e={"a u":wysihtml5.dom.replaceWithChildNodes};return function(t,n,i){var s,o,r,n=n||e,i=i||t.ownerDocument||document,a="string"==typeof t,l=0,t=a?wysihtml5.dom.getAsDom(t,i):t;for(r in n)for(s=t.querySelectorAll(r),i=n[r],o=s.length;l<o;l++)i(s[l]);return a?t.innerHTML:t}}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();"<p>&nbsp;</p>"!=t&&"<p>&nbsp;</p><p>&nbsp;</p>"!=t||(e.innerHTML="")},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"];return function(i){t.observe(i.element,"keydown",function(s){if(s.keyCode===e.BACKSPACE_KEY){var o=i.selection.getSelectedNode(),s=i.element;s.firstChild&&e.lang.array(n).contains(s.firstChild.nodeName)&&(o=t.getParentElement(o,{nodeName:n}))&&o==s.firstChild&&1>=o.childNodes.length&&(o.firstChild?""===o.firstChild.innerHTML:1)&&o.parentNode.removeChild(o)}})}}()}(wysihtml5),function(e){e.quirks.getCorrectInnerHTML=function(t){var n=t.innerHTML;if(-1===n.indexOf("%7E"))return n;var i,s,o,r,t=t.querySelectorAll("[href*='~'], [src*='~']");for(r=0,o=t.length;r<o;r++)i=t[r].href||t[r].src,s=e.lang.string(i).replace("~").by("%7E"),n=e.lang.string(n).replace(s).by(i);return n}}(wysihtml5),function(e){var t=e.dom,n="LI P H1 H2 H3 H4 H5 H6".split(" "),i=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(s){function o(n){if(n=t.getParentElement(n,{nodeName:["P","DIV"]},2)){var i=document.createTextNode(e.INVISIBLE_SPACE);t.insert(i).before(n),t.replaceWithChildNodes(n),s.selection.selectNode(i)}}t.observe(s.element.ownerDocument,"keydown",function(r){var a=r.keyCode;if(!(r.shiftKey||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var l=s.selection.getSelectedNode();(l=t.getParentElement(l,{nodeName:n},4))?"LI"!==l.nodeName||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY?l.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY&&setTimeout(function(){o(s.selection.getSelectedNode())},0):setTimeout(function(){var e,n=s.selection.getSelectedNode();n&&((e=t.getParentElement(n,{nodeName:i},2))||o(n))},0):a===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()&&(s.commands.exec("insertLineBreak"),r.preventDefault())}})}}(wysihtml5),function(e){e.quirks.redraw=function(t){e.dom.addClass(t,"wysihtml5-quirks-redraw"),e.dom.removeClass(t,"wysihtml5-quirks-redraw");try{var n=t.ownerDocument;n.execCommand("italic",!1,null),n.execCommand("italic",!1,null)}catch(e){}}}(wysihtml5),function(e){var t=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(n){var i=rangy.createRange(this.doc),s=n.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in n?n.canHaveHTML:"IMG"!==n.nodeName,r=s?n.innerHTML:n.data,r=""===r||r===e.INVISIBLE_SPACE,a=t.getStyle("display").from(n),a="block"===a||"list-item"===a;if(r&&s&&o)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}o?i.selectNodeContents(n):i.selectNode(n),o&&r&&s?i.collapse(a):o&&r&&(i.setStartAfter(n),i.setEndAfter(n)),this.setSelection(i)},getSelectedNode:function(e){return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(e=this.doc.selection.createRange())&&e.length?e.item(0):(e=this.getSelection(this.doc),e.focusNode===e.anchorNode?e.focusNode:(e=this.getRange(this.doc))?e.commonAncestorContainer:this.doc.body)},executeAndRestore:function(t,n){var i=this.doc.body,s=n&&i.scrollTop,o=n&&i.scrollLeft,r='<span class="_wysihtml5-temp-placeholder">'+e.INVISIBLE_SPACE+"</span>",a=this.getRange(this.doc);if(a){r=a.createContextualFragment(r),a.insertNode(r);try{t(a.startContainer,a.endContainer)}catch(e){setTimeout(function(){throw e},0)}(caretPlaceholder=this.doc.querySelector("._wysihtml5-temp-placeholder"))?(a=rangy.createRange(this.doc),a.selectNode(caretPlaceholder),a.deleteContents(),this.setSelection(a)):i.focus(),n&&(i.scrollTop=s,i.scrollLeft=o);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(e){}}else t(i,i)},executeAndRestoreSimple:function(e){var t,n,i,s=this.getRange(),o=this.doc.body;if(s){t=s.getNodes([3]),o=t[0]||s.startContainer,i=t[t.length-1]||s.endContainer,t=o===s.startContainer?s.startOffset:0,n=i===s.endContainer?s.endOffset:i.length;try{e(s.startContainer,s.endContainer)}catch(e){setTimeout(function(){throw e},0)}e=rangy.createRange(this.doc);try{e.setStart(o,t)}catch(e){}try{e.setEnd(i,n)}catch(e){}try{this.setSelection(e)}catch(e){}}else e(o,o)},insertHTML:function(e){var e=rangy.createRange(this.doc).createContextualFragment(e),t=e.lastChild;this.insertNode(e),t&&this.setAfter(t)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var t,n=this.doc,i=n.documentElement.scrollHeight>n.documentElement.offsetHeight;if((t=n._wysihtml5ScrollIntoViewElement)||(t=n.createElement("span"),t.innerHTML=e.INVISIBLE_SPACE),t=n._wysihtml5ScrollIntoViewElement=t,i){this.insertNode(t);var i=t,s=0;if(i.parentNode)do s+=i.offsetTop||0,i=i.offsetParent;while(i);i=s,t.parentNode.removeChild(t),i>n.body.scrollTop&&(n.body.scrollTop=i)}},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t=this.doc.selection.createRange(),n=t.boundingTop,i=this.doc.body.scrollWidth;if(t.moveToPoint){for(0===n&&(e=this.doc.createElement("span"),this.insertNode(e),n=e.offsetTop,e.parentNode.removeChild(e)),n+=1,e=-10;e<i;e+=2)try{t.moveToPoint(e,n);break}catch(e){}for(e=this.doc.selection.createRange();0<=i;i--)try{e.moveToPoint(i,n);break}catch(e){}t.setEndPoint("EndToEnd",e),t.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow).setSingleRange(e)}})}(wysihtml5),function(e,t){function n(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling:0<n&&n<e.childNodes.length}function i(e,n,s){var o;if(t.dom.isCharacterDataNode(n)&&(0==s?(s=t.dom.getNodeIndex(n),n=n.parentNode):s==n.length?(s=t.dom.getNodeIndex(n)+1,n=n.parentNode):o=t.dom.splitDataNode(n,s)),!o){o=n.cloneNode(!1),o.id&&o.removeAttribute("id");for(var r;r=n.childNodes[s];)o.appendChild(r);t.dom.insertAfter(o,n)}return n==e?o:i(e,o.parentNode,t.dom.getNodeIndex(o))}function s(t){this.firstTextNode=(this.isElementMerge=t.nodeType==e.ELEMENT_NODE)?t.lastChild:t,this.textNodes=[this.firstTextNode]}function o(e,t,n,i){this.tagNames=e||[r],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var r="span",a=/\s+/g;s.prototype={doMerge:function(){for(var e,t,n=[],i=0,s=this.textNodes.length;i<s;++i)e=this.textNodes[i],t=e.parentNode,n[i]=e.data,i&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=n.join("")},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;t<n;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},o.prototype={getAncestorWithClass:function(n){for(var i;n;){if(this.cssClass)if(i=this.cssClass,n.className){var s=n.className.match(this.similarClassRegExp)||[];i=s[s.length-1]===i}else i=!1;else i=!0;if(n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&i)return n;n=n.parentNode}return!1},postApply:function(e,t){for(var n,i,o,r=e[0],a=e[e.length-1],l=[],c=r,h=a,d=0,u=a.length,p=0,f=e.length;p<f;++p)i=e[p],(o=this.getAdjacentMergeableTextNode(i.parentNode,!1))?(n||(n=new s(o),l.push(n)),n.textNodes.push(i),i===r&&(c=n.firstTextNode,d=c.length),i===a&&(h=n.firstTextNode,u=n.getLength())):n=null;if((r=this.getAdjacentMergeableTextNode(a.parentNode,!0))&&(n||(n=new s(a),l.push(n)),n.textNodes.push(r)),l.length){for(p=0,f=l.length;p<f;++p)l[p].doMerge();t.setStart(c,d),t.setEnd(h,u)}},getAdjacentMergeableTextNode:function(t,n){var i=t.nodeType==e.TEXT_NODE,s=i?t.parentNode:t,o=n?"nextSibling":"previousSibling";if(i){if((i=t[o])&&i.nodeType==e.TEXT_NODE)return i}else if((i=s[o])&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){var i;if((i=t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase()))&&(i=t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase()))&&(i=e.className.replace(a," ")==n.className.replace(a," ")))e:if(e.attributes.length!=n.attributes.length)i=!1;else{i=0;for(var s,o,r=e.attributes.length;i<r;++i)if(s=e.attributes[i],o=s.name,"class"!=o&&(o=n.attributes.getNamedItem(o),s.specified!=o.specified||s.specified&&s.nodeValue!==o.nodeValue)){i=!1;break e}i=!0}return i},createContainer:function(e){return e=e.createElement(this.tagNames[0]),this.cssClass&&(e.className=this.cssClass),e},applyToTextNode:function(e){var n=e.parentNode;1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())?this.cssClass&&(e=this.cssClass,n.className?(n.className&&(n.className=n.className.replace(this.similarClassRegExp,"")),n.className+=" "+e):n.className=e):(n=this.createContainer(t.dom.getDocument(e)),e.parentNode.insertBefore(n,e),n.appendChild(e))},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,s){if(t.containsNode(s)||(e=t.cloneRange(),e.selectNode(s),e.isPointInRange(t.endContainer,t.endOffset)&&n(t.endContainer,t.endOffset)&&(i(s,t.endContainer,t.endOffset),t.setEndAfter(s)),e.isPointInRange(t.startContainer,t.startOffset)&&n(t.startContainer,t.startOffset)&&(s=i(s,t.startContainer,t.startOffset))),this.similarClassRegExp&&s.className&&(s.className=s.className.replace(this.similarClassRegExp,"")),this.isRemovable(s)){for(t=s,s=t.parentNode;t.firstChild;)s.insertBefore(t.firstChild,t);s.removeChild(t)}},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(i),void this.selectNode(t,i)}catch(e){}if(t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]),n.length){for(var s=0,o=n.length;s<o;++s)i=n[s],this.getAncestorWithClass(i)||this.applyToTextNode(i);t.setStart(n[0],0),i=n[n.length-1],t.setEnd(i,i.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n,i,s=t.getNodes([e.TEXT_NODE]);s.length?(t.splitBoundaries(),s=t.getNodes([e.TEXT_NODE])):(s=t.endContainer.ownerDocument.createTextNode(e.INVISIBLE_SPACE),t.insertNode(s),t.selectNode(s),s=[s]);for(var o=0,r=s.length;o<r;++o)n=s[o],(i=this.getAncestorWithClass(n))&&this.undoToTextNode(n,t,i);1==r?this.selectNode(t,s[0]):(t.setStart(s[0],0),n=s[s.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(s,t))},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,s=!("canHaveHTML"in n)||n.canHaveHTML,o=i?n.innerHTML:n.data;if((o=""===o||o===e.INVISIBLE_SPACE)&&i&&s)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}t.selectNodeContents(n),o&&i?t.collapse(!1):o&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),i=i?i.toString():"";return n.detach(),i},isAppliedToRange:function(t){var n,i=[],s=t.getNodes([e.TEXT_NODE]);if(!s.length)return!!(n=this.getAncestorWithClass(t.startContainer))&&[n];for(var o,r=0,a=s.length;r<a;++r){if(o=this.getTextSelectedByRange(s[r],t),n=this.getAncestorWithClass(s[r]),""!=o&&!n)return!1;i.push(n)}return i},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=o}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),s=n&&n.exec,o=null;if(this.editor.fire("beforecommand:composer"),s)i.unshift(this.composer),o=s.apply(n,i);else try{o=this.doc.execCommand(e,!1,t)}catch(e){}return this.editor.fire("aftercommand:composer"),o},state:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),s=n&&n.state;if(s)return i.unshift(this.composer),s.apply(n,i);try{return this.doc.queryCommandState(e)}catch(e){return!1}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n)return n.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(e){return null}}}),function(e){e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n){return e.commands.formatInline.state(t,n,"b")},value:function(){}}}(wysihtml5),function(e){function t(t,o){var r,a,l,c=t.doc,h="_wysihtml5-temp-"+ +new Date,d=0;for(e.commands.formatInline.exec(t,n,i,h,/non-matching-class/g),r=c.querySelectorAll(i+"."+h),h=r.length;d<h;d++)for(l in a=r[d],a.removeAttribute("class"),o)a.setAttribute(l,o[l]);d=a,1===h&&(l=s.getTextContent(a),h=!!a.querySelector("*"),l=""===l||l===e.INVISIBLE_SPACE,!h&&l&&(s.setTextContent(a,o.text||a.href),c=c.createTextNode(" "),t.selection.setAfter(a),t.selection.insertNode(c),d=c)),t.selection.setAfter(d)}var n,i="A",s=e.dom;e.commands.createLink={exec:function(e,n,i){var o=this.state(e,n);o?e.selection.executeAndRestore(function(){for(var e,t,n,i=o.length,r=0;r<i;r++)e=o[r],t=s.getParentElement(e,{nodeName:"code"}),n=s.getTextContent(e),n.match(s.autoLink.URL_REG_EXP)&&!t?s.renameElement(e,"code"):s.replaceWithChildNodes(e)}):(i="object"==typeof i?i:{href:i},t(e,i))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return n}}}(wysihtml5),function(e){var t=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(n,i,s){return e.commands.formatInline.exec(n,i,"span","wysiwyg-font-size-"+s,t)},state:function(n,i,s){return e.commands.formatInline.state(n,i,"span","wysiwyg-font-size-"+s,t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(n,i,s){return e.commands.formatInline.exec(n,i,"span","wysiwyg-color-"+s,t)},state:function(n,i,s){return e.commands.formatInline.state(n,i,"span","wysiwyg-color-"+s,t)},value:function(){}}}(wysihtml5),function(e){function t(t){for(t=t.previousSibling;t&&t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim();)t=t.previousSibling;return t}function n(t){for(t=t.nextSibling;t&&t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim();)t=t.nextSibling;return t}function i(e){return"BR"===e.nodeName||"block"===r.getStyle("display").from(e)}function s(t,n,i,s){if(s)var o=r.observe(t,"DOMNodeInserted",function(t){var n,t=t.target;t.nodeType===e.ELEMENT_NODE&&(n=r.getStyle("display").from(t),"inline"!==n.substr(0,6)&&(t.className+=" "+s))});t.execCommand(n,!1,i),o&&o.stop()}function o(e,i){e.selection.selectLine(),e.selection.surround(i);var s=n(i),o=t(i);s&&"BR"===s.nodeName&&s.parentNode.removeChild(s),o&&"BR"===o.nodeName&&o.parentNode.removeChild(o),(s=i.lastChild)&&"BR"===s.nodeName&&s.parentNode.removeChild(s),e.selection.selectNode(i)}var r=e.dom,a="H1 H2 H3 H4 H5 H6 P BLOCKQUOTE DIV".split(" ");e.commands.formatBlock={exec:function(l,c,h,d,u){var p,f=l.doc,m=this.state(l,c,h,d,u),h="string"==typeof h?h.toUpperCase():h;if(m)l.selection.executeAndRestoreSimple(function(){u&&(m.className=m.className.replace(u,""));var s=!!e.lang.string(m.className).trim();if(s||m.nodeName!==(h||"DIV"))s&&r.renameElement(m,"DIV");else{var s=m,o=s.ownerDocument,a=n(s),l=t(s);a&&!i(a)&&s.parentNode.insertBefore(o.createElement("br"),a),l&&!i(l)&&s.parentNode.insertBefore(o.createElement("br"),s),r.replaceWithChildNodes(m)}});else{if((null===h||e.lang.array(a).contains(h))&&(p=l.selection.getSelectedNode(),m=r.getParentElement(p,{nodeName:a})))return void l.selection.executeAndRestoreSimple(function(){if(h&&(m=r.renameElement(m,h)),d){var e=m;e.className?(e.className=e.className.replace(u,""),e.className+=" "+d):e.className=d}});l.commands.support(c)?s(f,c,h||"DIV",d):(m=f.createElement(h||"DIV"),d&&(m.className=d),o(l,m))}},state:function(e,t,n,i,s){return n="string"==typeof n?n.toUpperCase():n,e=e.selection.getSelectedNode(),r.getParentElement(e,{nodeName:n,className:i,classRegExp:s})},value:function(){}}}(wysihtml5),function(e){function t(t,s,o){var r=t+":"+s;if(!i[r]){var a=i,l=e.selection.HTMLApplier,c=n[t],t=c?[t.toLowerCase(),c.toLowerCase()]:[t.toLowerCase()];a[r]=new l(t,s,o,(!0))}return i[r]}var n={strong:"b",em:"i",b:"strong",i:"em"},i={};e.commands.formatInline={exec:function(e,n,i,s,o){return!!(n=e.selection.getRange())&&(t(i,s,o).toggleRange(n),void e.selection.setSelection(n))},state:function(i,s,o,r,a){var s=i.doc,l=n[o]||o;return!(!e.dom.hasElementWithTagName(s,o)&&!e.dom.hasElementWithTagName(s,l)||r&&!e.dom.hasElementWithClassName(s,r))&&(i=i.selection.getRange(),!!i&&t(o,r,a).isAppliedToRange(i))},value:function(){}}}(wysihtml5),function(e){e.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){}}}(wysihtml5),function(e){e.commands.insertImage={exec:function(t,n,i){var s,i="object"==typeof i?i:{src:i},o=t.doc,n=this.state(t);if(n)t.selection.setBefore(n),i=n.parentNode,i.removeChild(n),e.dom.removeEmptyTextNodes(i),"A"===i.nodeName&&!i.firstChild&&(t.selection.setAfter(i),i.parentNode.removeChild(i)),e.quirks.redraw(t.element);else{n=o.createElement("IMG");for(s in i)n[s]=i[s];t.selection.insertNode(n),e.browser.hasProblemsSettingCaretAfterImg()?(i=o.createTextNode(e.INVISIBLE_SPACE),t.selection.insertNode(i),t.selection.setAfter(i)):t.selection.setAfter(n)}},state:function(t){var n;return!!e.dom.hasElementWithTagName(t.doc,"IMG")&&(!!(n=t.selection.getSelectedNode())&&("IMG"===n.nodeName?n:n.nodeType===e.ELEMENT_NODE&&(n=t.selection.getText(),!(n=e.lang.string(n).trim())&&(t=t.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1===t.length&&t[0]))))},value:function(e){return(e=this.state(e))&&e.src}}}(wysihtml5),function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(n,i){n.commands.support(i)?(n.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",t)},state:function(){return!1},value:function(){}}}(wysihtml5),function(e){e.commands.insertOrderedList={exec:function(t,n){var i,s=t.doc,o=t.selection.getSelectedNode(),r=e.dom.getParentElement(o,{nodeName:"OL"}),a=e.dom.getParentElement(o,{nodeName:"UL"}),o="_wysihtml5-temp-"+(new Date).getTime();t.commands.support(n)?s.execCommand(n,!1,null):r?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)}):a?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,"ol")}):(t.commands.exec("formatBlock","div",o),i=s.querySelector("."+o),s=""===i.innerHTML||i.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,"ol")}),s&&t.selection.selectNode(r.querySelector("li")))},state:function(t){return t=t.selection.getSelectedNode(),e.dom.getParentElement(t,{nodeName:"OL"})},value:function(){}}}(wysihtml5),function(e){e.commands.insertUnorderedList={exec:function(t,n){var i,s=t.doc,o=t.selection.getSelectedNode(),r=e.dom.getParentElement(o,{nodeName:"UL"}),a=e.dom.getParentElement(o,{nodeName:"OL"}),o="_wysihtml5-temp-"+(new Date).getTime();t.commands.support(n)?s.execCommand(n,!1,null):r?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)}):a?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,"ul")}):(t.commands.exec("formatBlock","div",o),i=s.querySelector("."+o),s=""===i.innerHTML||i.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,"ul")}),s&&t.selection.selectNode(r.querySelector("li")))},state:function(t){return t=t.selection.getSelectedNode(),e.dom.getParentElement(t,{nodeName:"UL"})},value:function(){}}}(wysihtml5),function(e){e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n){return e.commands.formatInline.state(t,n,"i")},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-center",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-center",t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-left",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-left",t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-right",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-right",t)},value:function(){}}}(wysihtml5),function(e){e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){}}}(wysihtml5),function(e){var t='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",n='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",i=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var s,o=this,r=this.composer.sandbox.getDocument();if(i.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,n=90===t&&e.shiftKey||89===t;90!==t||e.shiftKey?n&&(o.redo(),e.preventDefault()):(o.undo(),e.preventDefault())}}),i.observe(this.element,"keydown",function(e){e=e.keyCode,e!==s&&(s=e,(8===e||46===e)&&o.transact())}),e.browser.hasUndoInContextMenu()){var a,l,c=function(){for(var e;e=r.querySelector("._wysihtml5-temp");)e.parentNode.removeChild(e);clearInterval(a)};i.observe(this.element,"contextmenu",function(){c(),o.composer.selection.executeAndRestoreSimple(function(){o.element.lastChild&&o.composer.selection.setAfter(o.element.lastChild),r.execCommand("insertHTML",!1,t),r.execCommand("insertHTML",!1,n),r.execCommand("undo",!1,null)}),a=setInterval(function(){r.getElementById("_wysihtml5-redo")?(c(),o.redo()):r.getElementById("_wysihtml5-undo")||(c(),o.undo())},400),l||(l=!0,i.observe(document,"mousedown",c),i.observe(r,["mousedown","paste","cut","copy"],c))})}this.editor.observe("newword:composer",function(){o.transact()}).observe("beforecommand:composer",function(){o.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();t!=e&&(40<(this.history.length=this.position)&&(this.history.shift(),this.position--),this.position++,this.history.push(t))},undo:function(){this.transact(),1>=this.position||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(n=this.parent.parse(n)),n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML;return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector("blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea")},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;t.insert(this.iframe).after(i),t.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),
this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes("className spellcheck title lang dir accessKey".split(" ")).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var s=this.config.name;s&&(t.addClass(this.element,s),t.addClass(this.iframe,s)),(s="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder"))&&t.simulatePlaceholder(this.parent,this,s),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),e.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,s=n.canDisableAutoLinking(),o=n.doesAutoLinkingInContentEditable();if(s&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!o||o&&s)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})});var r=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,l=function(n){return n=e.lang.string(t.getTextContent(n)).trim(),"www."===n.substr(0,4)&&(n="http://"+n),n};t.observe(this.element,"keydown",function(e){if(r.length){var n,e=i.selection.getSelectedNode(e.target.ownerDocument),s=t.getParentElement(e,{nodeName:"A"},4);s&&(n=l(s),setTimeout(function(){var e=l(s);e!==n&&e.match(a)&&s.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var i=["width","height"],s=i.length,o=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&t.observe(o,"resizeend",function(t){for(var n,t=t.target||t.srcElement,r=t.style,a=0;a<s;a++)n=i[a],r[n]&&(t.setAttribute(n,parseInt(r[n],10)),r[n]="");e.quirks.redraw(o)}):n.supportsEvent("resizestart")&&t.observe(o,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,s=n.createElement("div"),o="background-color color cursor font-family font-size font-style font-variant font-weight line-height letter-spacing text-align text-decoration text-indent text-rendering word-break word-wrap word-spacing".split(" "),r="background-color border-collapse border-bottom-color border-bottom-style border-bottom-width border-left-color border-left-style border-left-width border-right-color border-right-style border-right-width border-top-color border-top-style border-top-width clear display float margin-bottom margin-left margin-right margin-top outline-color outline-offset outline-width outline-style padding-left padding-right padding-top padding-bottom position top left right bottom z-index vertical-align text-align -webkit-box-sizing -moz-box-sizing -ms-box-sizing box-sizing -webkit-box-shadow -moz-box-shadow -ms-box-shadow box-shadow -webkit-border-top-right-radius -moz-border-radius-topright border-top-right-radius -webkit-border-bottom-right-radius -moz-border-radius-bottomright border-bottom-right-radius -webkit-border-bottom-left-radius -moz-border-radius-bottomleft border-bottom-left-radius -webkit-border-top-left-radius -moz-border-radius-topleft border-top-left-radius width height".split(" "),a="width height top left right bottom".split(" "),l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(e){}else{var s=e.style,o=n.documentElement.scrollTop||n.body.scrollTop,r=n.documentElement.scrollLeft||n.body.scrollLeft,s={position:s.position,top:s.top,left:s.left,WebkitUserSelect:s.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(s).on(e),i.scrollTo&&i.scrollTo(r,o)}};e.views.Composer.prototype.style=function(){var h=this,d=n.querySelector(":focus"),u=this.textarea.element,p=u.hasAttribute("placeholder"),f=p&&u.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||s.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||s.cloneNode(!1),p&&u.removeAttribute("placeholder"),u===d&&u.blur(),t.copyStyles(r).from(u).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(o).from(u).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(u),t.copyStyles(r).from(u).to(this.focusStylesHost),t.copyStyles(o).from(u).to(this.focusStylesHost);var m=e.lang.array(r).without(["display"]);if(d?d.focus():u.blur(),p&&u.setAttribute("placeholder",f),!e.browser.hasCurrentStyleProperty())var g=t.observe(i,"resize",function(){if(t.contains(document.documentElement,h.iframe)){var e=t.getStyle("display").from(u),n=t.getStyle("display").from(h.iframe);u.style.display="",h.iframe.style.display="none",t.copyStyles(a).from(u).to(h.iframe).andTo(h.focusStylesHost).andTo(h.blurStylesHost),h.iframe.style.display=n,u.style.display=e}else g.stop()});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(h.focusStylesHost).to(h.iframe),t.copyStyles(o).from(h.focusStylesHost).to(h.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(h.blurStylesHost).to(h.iframe),t.copyStyles(o).from(h.blurStylesHost).to(h.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var s=this,o=this.getValue(),r=this.sandbox.getIframe(),a=this.element,l=n.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(r,"DOMNodeRemoved",function(){clearInterval(h),s.parent.fire("destroy:composer")});var h=setInterval(function(){t.contains(document.documentElement,r)||(clearInterval(h),s.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){s.parent.fire("focus").fire("focus:composer"),setTimeout(function(){o=s.getValue()},0)}),t.observe(l,"blur",function(){o!==s.getValue()&&s.parent.fire("change").fire("change:composer"),s.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(a,"blur",function(){var e=a.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{s.selection.insertNode(e)}catch(t){a.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),t.observe(a,"dragenter",function(){s.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(a,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(a,c,function(e){var t,i=e.dataTransfer;i&&n.supportsDataTransfer()&&(t=i.getData("text/html")||i.getData("text/plain")),t?(a.focus(),s.commands.exec("insertHTML",t),s.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){s.parent.fire("paste").fire("paste:composer")},0)}),t.observe(a,"keyup",function(t){t=t.keyCode,(t===e.SPACE_KEY||t===e.ENTER_KEY)&&s.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){s.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(a,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(s.selection.selectNode(t),e.preventDefault())}),t.observe(a,"keydown",function(e){var t=i[e.keyCode];(e.ctrlKey||e.metaKey)&&!e.altKey&&t&&(s.commands.exec(t),e.preventDefault())}),t.observe(a,"keydown",function(t){var n=s.selection.getSelectedNode(!0),i=t.keyCode;!n||"IMG"!==n.nodeName||i!==e.BACKSPACE_KEY&&i!==e.DELETE_KEY||(i=n.parentNode,i.removeChild(n),"A"===i.nodeName&&!i.firstChild&&i.parentNode.removeChild(i),setTimeout(function(){e.quirks.redraw(a)},0),t.preventDefault())});var d={IMG:"Image: ",A:"Link: "};t.observe(a,"mouseover",function(e){var e=e.target,t=e.nodeName;!("A"!==t&&"IMG"!==t)&&!e.hasAttribute("title")&&(t=d[t]+(e.getAttribute("href")||e.getAttribute("src")),e.setAttribute("title",t))})}}(wysihtml5),function(e){e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,i=this.textarea.element.form,s=function(){t=setInterval(function(){n.fromComposerToTextarea()},400)},o=function(){clearInterval(t),t=null};s(),i&&(e.dom.observe(i,"submit",function(){n.sync(!0)}),e.dom.observe(i,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||t?"textarea"===e&&(n.fromComposerToTextarea(!0),o()):(n.fromTextareaToComposer(!0),s())}),this.editor.observe("destroy:composer",o)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value;return e&&!n||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){e=n[e.type]||e.type,t.fire(e).fire(e+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom;e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var n=this,i=function(e){var t=n._serialize();t==n.elementToChange?n.fire("edit",t):n.fire("save",t),n.hide(),e.preventDefault(),e.stopPropagation()};t.observe(n.link,"click",function(){t.hasClass(n.link,"wysihtml5-command-dialog-opened")&&setTimeout(function(){n.hide()},0)}),t.observe(this.container,"keydown",function(t){var s=t.keyCode;s===e.ENTER_KEY&&i(t),s===e.ESCAPE_KEY&&n.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",i),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){n.fire("cancel"),n.hide(),e.preventDefault(),e.stopPropagation()});for(var s=this.container.querySelectorAll("input, select, textarea"),o=0,r=s.length,a=function(){clearInterval(n.interval)};o<r;o++)t.observe(s[o],"change",a);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),n=t.length,i=0;i<n;i++)e[t[i].getAttribute("data-wysihtml5-dialog-field")]=t[i].value;return e},_interpolate:function(e){for(var t,n,i=document.querySelector(":focus"),s=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),o=s.length,r=0;r<o;r++)t=s[r],t!==i&&!(e&&"hidden"===t.type)&&(n=t.getAttribute("data-wysihtml5-dialog-field"),n=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=n)},show:function(e){var n=this,i=this.container.querySelector("input, select, textarea");if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){n._interpolate(!0)},500)),t.addClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="",this.fire("show"),i&&!e)try{i.focus()}catch(e){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},s={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},o={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(r,a){var l=document.createElement("input");if(e.browser.supportsSpeechApiOn(l)){var c=document.createElement("div");e.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(a),t.setStyles(s).on(l),t.setAttributes(o).on(l),t.setStyles(i).on(c),t.setStyles(n).on(a),t.observe(l,"onwebkitspeechchange"in l?"webkitspeechchange":"speechchange",function(){r.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}else a.style.display="none"}}(wysihtml5),function(e){var t=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t,this.container="string"==typeof n?document.getElementById(n):n,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),s=i.length,o=0;o<s;o++)new e.toolbar.Speech(this,i[o])},_getLinks:function(t){for(var n,i,s,o,r,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,h=this[t+"Mapping"]={};c<l;c++)n=a[c],s=n.getAttribute("data-wysihtml5-"+t),o=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+s+"']"),r=this._getDialog(n,s),h[s+":"+o]={link:n,group:i,name:s,value:o,dialog:r,state:!1}},_getDialog:function(t,n){var i,s,o=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return r&&(i=new e.toolbar.Dialog(t,r),i.observe("show",function(){s=o.composer.selection.getBookmark(),o.editor.fire("show:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.observe("save",function(e){s&&o.composer.selection.setBookmark(s),o._execCommand(n,e),o.editor.fire("save:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.observe("cancel",function(){o.editor.focus(!1),o.editor.fire("cancel:dialog",{command:n,dialogContainer:r,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,n=this.editor,i=this.container,s=this.commandLinks.concat(this.actionLinks),o=s.length,r=0;r<o;r++)t.setAttributes({href:"javascript:;",unselectable:"on"}).on(s[r]);t.delegate(i,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),t.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this.getAttribute("data-wysihtml5-command"),i=this.getAttribute("data-wysihtml5-command-value");e.execCommand(n,i),t.preventDefault()}),t.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),n.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),n.observe("blur:composer",function(){clearInterval(e.interval)}),n.observe("destroy:composer",function(){clearInterval(e.interval)}),n.observe("change_view",function(n){setTimeout(function(){e.commandsDisabled="composer"!==n,e._updateLinkStates(),e.commandsDisabled?t.addClass(i,"wysihtml5-commands-disabled"):t.removeClass(i,"wysihtml5-commands-disabled")},0)})},_updateLinkStates:function(){var n,i,s,o=this.commandMapping,r=this.actionMapping;for(n in o)s=o[n],this.commandsDisabled?(i=!1,t.removeClass(s.link,"wysihtml5-command-active"),s.group&&t.removeClass(s.group,"wysihtml5-command-active"),s.dialog&&s.dialog.hide()):(i=this.composer.commands.state(s.name,s.value),e.lang.object(i).isArray()&&(i=1!==i.length||i[0]),t.removeClass(s.link,"wysihtml5-command-disabled"),s.group&&t.removeClass(s.group,"wysihtml5-command-disabled")),s.state!==i&&((s.state=i)?(t.addClass(s.link,"wysihtml5-command-active"),s.group&&t.addClass(s.group,"wysihtml5-command-active"),s.dialog&&("object"==typeof i?s.dialog.show(i):s.dialog.hide())):(t.removeClass(s.link,"wysihtml5-command-active"),s.group&&t.removeClass(s.group,"wysihtml5-command-active"),s.dialog&&s.dialog.hide()));for(n in r)o=r[n],"change_view"===o.name&&(o.state=this.editor.currentView===this.editor.textarea,o.state?t.addClass(o.link,"wysihtml5-action-active"):t.removeClass(o.link,"wysihtml5-action-active"))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){var t={name:void 0,style:!0,toolbar:void 0,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:void 0,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(n,i){if(this.textareaElement="string"==typeof n?document.getElementById(n):n,this.config=e.lang.object({}).merge(t).merge(i).get(),this.currentView=this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var s=this;setTimeout(function(){s.fire("beforeload").fire("load")},0)}else{e.dom.addClass(document.body,this.config.bodyClassName),this.currentView=this.composer=new e.views.Composer(this,this.textareaElement,this.config),"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(e){}}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),n},_initParser:function(){this.observe("paste:composer",function(){var t=this;t.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(t.composer.element),t.parse(t.composer.element)},!0)}),this.observe("paste:textarea",function(){this.textarea.setValue(this.parse(this.textarea.getValue()))})}})}(wysihtml5),!function(e,t){"use strict";var n={"font-styles":function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle "+n+" btn-default' data-toggle='dropdown' href='#'><i class='glyphicon glyphicon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li></ul></li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn "+n+" btn-default' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a><a class='btn "+n+" btn-default' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a><a class='btn "+n+" btn-default' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a></div></li>"},paragraph:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn "+n+" btn-default' data-wysihtml5-command='paragraph' title='CTRL+P' tabindex='-1'>"+e.paragraph.paragraph+"</a></div></li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn "+n+" btn-default' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a><a class='btn "+n+" btn-default' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a><a class='btn "+n+" btn-default' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a><a class='btn -"+n+" btn-default' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a></div></li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h4>"+e.link.insert+"</h4></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control'><label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label></div><div class='modal-footer'><button class='btn btn-default' data-dismiss='modal'>"+e.link.cancel+"</button><button href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</button></div></div></div></div><a class='btn "+n+" btn-default' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='glyphicon glyphicon-share'></i></a></li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h4>"+e.image.insert+"</h4></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control'></div><div class='modal-footer'><button class='btn btn-default' data-dismiss='modal'>"+e.image.cancel+"</button><button class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</button></div></div></div></div><a class='btn "+n+" btn-default' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='glyphicon glyphicon-picture'></i></a></li>"},html:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn "+n+" btn-default' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='glyphicon glyphicon-pencil'></i></a></div></li>"},color:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle "+n+" btn-default' data-toggle='dropdown' href='#' tabindex='-1'><span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li></ul></li>"}},i=function(e,t,i){return n[e](t,i)},s=function(t,i){this.el=t;var s=i||r;for(var o in s.customTemplates)n[o]=s.customTemplates[o];this.toolbar=this.createToolbar(t,s),this.editor=this.createEditor(i),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};s.prototype={constructor:s,createEditor:function(n){n=n||{},n=e.extend(!0,{},n),n.toolbar=this.toolbar[0];var i=new t.Editor(this.el[0],n);if(n&&n.events)for(var s in n.events)i.on(s,n.events[s]);return i},createToolbar:function(t,n){var s=this,o=e("<ul/>",{class:"wysihtml5-toolbar",style:"display:none"}),l=n.locale||r.locale||"en";for(var c in r){var h=!1;void 0!==n[c]?n[c]===!0&&(h=!0):h=r[c],h===!0&&(o.append(i(c,a[l],n)),"html"===c&&this.initHtml(o),"link"===c&&this.initInsertLink(o),"image"===c&&this.initInsertImage(o))}if(n.toolbar)for(c in n.toolbar)o.append(n.toolbar[c]);return o.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var n=t.target||t.srcElement,i=e(n);s.toolbar.find(".current-font").text(i.html())}),o.find("a[data-wysihtml5-command='foreColor']").click(function(t){var n=t.target||t.srcElement,i=e(n);s.toolbar.find(".current-color").text(i.html())}),this.el.before(o),o},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(n){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var n,i=this,s=t.find(".bootstrap-wysihtml5-insert-image-modal"),o=s.find(".bootstrap-wysihtml5-insert-image-url"),r=s.find(".btn-primary"),a=o.val(),l=function(){var e=o.val();o.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("insertImage",e)};o.keypress(function(e){13==e.which&&(l(),s.modal("hide"))}),r.click(l),s.on("shown",function(){o.focus()}),s.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return!!t||(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),s.appendTo("body").modal("show"),s.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(t){var n,i=this,s=t.find(".bootstrap-wysihtml5-insert-link-modal"),o=s.find(".bootstrap-wysihtml5-insert-link-url"),r=s.find(".bootstrap-wysihtml5-insert-link-target"),a=s.find(".btn-primary"),l=o.val(),c=function(){var e=o.val();o.val(l),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null);var t=r.prop("checked");i.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})};o.keypress(function(e){13==e.which&&(c(),s.modal("hide"))}),a.click(c),s.on("shown",function(){o.focus()}),s.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return!!t||(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),s.appendTo("body").modal("show"),s.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var o={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new s(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),i=this;return o.bypassDefaults.apply(i,[n])},deepExtend:function(t){var n=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),i=this;return o.bypassDefaults.apply(i,[n])},init:function(e){var t=this;return o.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.wysihtml5"):o.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=s;var r=e.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,paragraph:!1,lists:!0,html:!1,link:!0,image:!0,size:"sm",
events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},p:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["./css/bootstrap3-wysiwyg5-color.css"],locale:"en"};"undefined"==typeof e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions));var a=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},paragraph:{paragraph:"¶"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,s=this.length;++i<s&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return B[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function s(e,t){for(var n=0,i=t.length;i>n;n+=1)if(r(e,t[n]))return n;return-1}function o(){var t=e(z);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function r(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function a(e,t,n){var i,s,o;if(null===e||e.length<1)return[];for(i=e.split(t),s=0,o=i.length;o>s;s+=1)i[s]=n(i[s]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var s=e.data(n,i);s!==t&&n.val()!==s&&(e.removeData(n,i),n.trigger("keyup-change"))})}function h(n){n.on("mousemove",function(n){var i=H;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,i){i=i||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){n.apply(i,t)},e)}}function u(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){s(e.target,t.get())>=0&&n(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus();var s=n.offsetWidth>0||n.offsetHeight>0;s&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var s=document.selection.createRange();i=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),n=s.text.length-i}return{offset:n,length:i}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!R){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);R=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),R.attr("class","select2-sizer"),e(document.body).append(R)}return R.text(t.val()),R.width()}function y(t,n,i){var s,o,r=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=e.trim(n.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&r.push(o))})),t.attr("class",r.join(" "))}function b(e,t,n,s){var o=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),r=t.length;return 0>o?void n.push(s(e)):(n.push(s(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(s(e.substring(o,o+r))),n.push("</span>"),void n.push(s(e.substring(o+r,e.length))))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function C(n){var i,s=null,o=n.quietMillis||100,r=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=r,c=n.transport||e.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,h);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,s&&"function"==typeof s.abort&&s.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(a)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),s=c.call(a,d)},o)}}function x(t){var n,i,s=t,o=function(e){return""+e.text};e.isArray(s)&&(i=s,s={results:i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var r=s();return r.text&&(o=r.text,e.isFunction(o)||(n=r.text,o=function(e){return e[n]})),function(t){var n,i=t.term,r={results:[]};return""===i?void t.callback(s()):(n=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,o(a),s))&&r.push(a)}else t.matcher(i,o(s),s)&&r.push(s)},e(s().results).each2(function(e,t){n(t,r.results)}),void t.callback(r))}}function _(n){var i=e.isFunction(n);return function(s){var o=s.term,r={results:[]},a=i?n(s):n;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||s.matcher(o,n))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r))}}function S(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function k(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function E(t){var n=0;return e.each(t,function(e,t){t.children?n+=E(t.children):n++}),n}function T(e,n,i,s){var o,a,l,c,h,d=e,u=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(h=s.tokenSeparators[l],a=e.indexOf(h),!(a>=0));l++);if(0>a)break;if(o=e.substring(0,a),e=e.substring(a+h.length),o.length>0&&(o=s.createSearchChoice.call(this,o,n),o!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o))){for(u=!1,l=0,c=n.length;c>l;l++)if(r(s.id(o),s.id(n[l]))){u=!0;break}u||i(o)}}return d!==e?e:void 0}function N(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function D(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var O,M,I,A,R,L,P,H={x:0,y:0},F={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case F.LEFT:case F.RIGHT:case F.UP:case F.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case F.SHIFT:case F.CTRL:case F.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},z="<div class='select2-measure-scrollbar'></div>",B={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};L=e(document),A=function(){var e=1;return function(){return e++}}(),O=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,s,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+A()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(k(n.containerCss,this.opts.element)),this.container.addClass(k(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),h(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),u(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,s){var o=i.scrollTop();s>0&&0>=o-s?(i.scrollTop(0),m(e)):0>s&&i.get(0).scrollHeight-i.scrollTop()+s<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),c(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),P=P||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),N.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,s,o,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n.debug=n.debug||e.fn.select2.defaults.debug,n.debug&&console&&console.warn&&(null!=n.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=n.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=n.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=n.ajax&&null!=n.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=n.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=n.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=n.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=n.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=n.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=n.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),n.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=n.element.data("tags")){var h=n.element.data("tags");e.isArray(h)||(h=[]),n.element.data("select2Tags",h)}if(null!=n.sorter&&(n.sortResults=n.sorter),null!=n.selectOnClose&&(n.selectOnBlur=n.selectOnClose),null!=n.ajax&&e.isFunction(n.ajax.processResults)&&(n.ajax.results=n.ajax.processResults),null!=n.language){var d=n.language;e.isFunction(d.noMatches)&&(n.formatNoMatches=d.noMatches),e.isFunction(d.searching)&&(n.formatSearching=d.searching),e.isFunction(d.inputTooShort)&&(n.formatInputTooShort=d.inputTooShort),e.isFunction(d.inputTooLong)&&(n.formatInputTooLong=d.inputTooLong),e.isFunction(d.loadingMore)&&(n.formatLoading=d.loadingMore),e.isFunction(d.maximumSelected)&&(n.formatSelectionTooBig=d.maximumSelected)}if(n=e.extend({},{populateResults:function(i,s,o){var r,a=this.opts.id,l=this.liveRegion;(r=function(i,s,h){var d,u,p,f,m,g,v,y,b,w;i=n.sortResults(i,s,o);var C=[];for(d=0,u=i.length;u>d;d+=1)p=i[d],m=p.disabled===!0,f=!m&&a(p)!==t,g=p.children&&p.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),y=e(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-badge-"+A()),y.attr("role","option"),w=n.formatResult(p,y,o,c.opts.escapeMarkup),w!==t&&(y.html(w),v.append(y)),g&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),r(p.children,b,h+1),v.append(b)),v.data("select2-data",p),C.push(v[0]);s.append(C),l.text(n.formatMatches(i.length))})(s,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(e){var n,s,o,r={results:[],more:!1},a=e.term;o=function(t,n){var i;t.is("option")?e.matcher(a,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(s=this.getPlaceholderOption(),s&&(n=n.not(s))),n.each2(function(e,t){o(t,r.results)}),e.callback(r)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=C.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=_(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var s=[];e(a(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return r(this.id,t.id)?(t=this,!1):void 0}),s.push(t)}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,s=this;i.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass,this.opts.element)))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",s._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,s._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,s,o,r=this.dropdown,a=this.container,l=a.offset(),c=a.outerHeight(!1),h=a.outerWidth(!1),d=r.outerHeight(!1),u=e(window),p=u.width(),f=u.height(),m=u.scrollLeft()+p,g=u.scrollTop()+f,v=l.top+c,y=l.left,b=g>=v+d,w=l.top-d>=u.scrollTop(),C=r.outerWidth(!1),x=function(){return m>=y+C},_=function(){return l.left+m+a.outerWidth(!1)>C},S=r.hasClass("select2-drop-above");S?(n=!0,!w&&b&&(i=!0,n=!1)):(n=!1,!b&&w&&(i=!0,n=!0)),i&&(r.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),h=this.container.outerWidth(!1),d=r.outerHeight(!1),m=u.scrollLeft()+p,g=u.scrollTop()+f,v=l.top+c,y=l.left,C=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),C=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:P.width),C>h?h=C:C=h,d=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),v-=t.top,y-=t.left),!x()&&_()&&(y=l.left+this.container.outerWidth(!1)-C),s={left:y,width:h},n?(this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above"),d=r.outerHeight(!1),s.top=l.top-d,s.bottom="auto"):(s.top=v,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,k(this.opts.dropdownCss,this.opts.element)),r.css(s)},shouldOpen:function(){var t;return!this.opened()&&(this._enabled!==!1&&this._readonly!==!0&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),L.on("mousemove.select2Event",function(e){H.x=e.pageX,H.y=e.pageY}),!0)},opening:function(){var t,i=this.containerEventName,s="scroll."+i,o="resize."+i,r="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0===t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var s,o=e("#select2-drop");o.length>0&&(s=o.data("select2"),s.opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+r,function(e){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),L.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==t&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,s,o,r,a,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),l=(i.offset()||{}).top||0,s=l+i.outerHeight(!0),n===t.length-1&&(a=c.find("li.select2-more-results"),
a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=c.offset().top+c.outerHeight(!1),s>o&&c.scrollTop(c.scrollTop()+(s-o)),r=l-c.offset().top,0>r&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var s=e(n[i]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,o=this.findHighlightableChoices();return 0===arguments.length?s(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,s=this,o=this.search.val(),r=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:r}),s.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).html(s.opts.escapeMarkup(k(s.opts.formatLoadMore,s.opts.element,i+1))),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):n.remove(),s.positionDropdown(),s.resultsPage=i,s.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),u.positionDropdown(),h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(h.text()):u.liveRegion.text(u.opts.formatMatches(h.find('.select2-result-selectable:not(".select2-selected")').length))}function s(e){h.html(e),i()}var o,a,l,c=this.search,h=this.results,d=this.opts,u=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&S(d.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+k(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return s(S(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+k(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void s(S(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+k(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+k(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&S(d.formatAjaxError,"formatAjaxError"))return void s("<li class='select2-ajax-error'>"+k(d.formatAjaxError,d.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(u,c.val(),o.results),a!==t&&null!==a&&u.id(a)!==t&&null!==u.id(a)&&0===e(o.results).filter(function(){return r(u.id(this),u.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a)),0===o.results.length&&S(d.formatNoMatches,"formatNoMatches"))return s("<li class='select2-no-results'>"+k(d.formatNoMatches,d.element,c.val())+"</li>"),void(this.showSearch&&this.showSearch(c.val()));h.empty(),u.opts.populateResults.call(this,h,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&S(d.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+d.escapeMarkup(k(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),i(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function t(){var t,n,i,s,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(t=this.opts.element.attr("style"),"string"==typeof t)for(n=t.split(";"),s=0,o=n.length;o>s;s+=1)if(r=n[s].replace(/\s/g,""),i=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width"),t.indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=t.call(this);null!==n&&this.container.css("width",n)}}),M=D(O,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),t=this.search.get(0),t.createTextRange?(n=t.createTextRange(),n.collapse(!1),n.select()):t.setSelectionRange&&(i=this.search.val().length,t.setSelectionRange(i,i))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var t,i,s=this.container,o=this.dropdown,r=A();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===F.PAGE_UP||e.which===F.PAGE_DOWN)return void m(e);switch(e.which){case F.UP:case F.DOWN:return this.moveHighlight(e.which===F.UP?-1:1),void m(e);case F.ENTER:return this.selectHighlighted(),void m(e);case F.TAB:return void this.selectHighlighted({noFocus:!0});case F.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==F.TAB&&!F.isControl(e)&&!F.isFunctionKey(e)&&e.which!==F.ESC){if(this.opts.openOnEnter===!1&&e.which===F.ENTER)return void m(e);if(e.which==F.DOWN||e.which==F.UP||e.which==F.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==F.DELETE||e.which==F.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=n.val(),o=null;t.query({matcher:function(e,n,i){var a=r(s,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return r(s.id(t.data("select2-data")),s.opts.element.val())?(i=e,!1):void 0}),n!==!1&&(t===!0&&i>=0?this.highlight(i):this.highlight(0)),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(E(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(n=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),n!==t&&s.append(n),i=this.opts.formatSelectionCssClass(e,s),i!==t&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=s.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),n&&s.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),I=D(O,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=a(n.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(n,i,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<s.length;n++)for(var a=s[n],l=0;l<o.length;l++){var c=o[l];if(r(a,t.id(c))){e.push(c),o.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+A()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),s=n.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(n.length&&(e.which==F.LEFT||e.which==F.RIGHT||e.which==F.BACKSPACE||e.which==F.DELETE||e.which==F.ENTER)){var r=n;return e.which==F.LEFT&&i.length?r=i:e.which==F.RIGHT?r=s.length?s:null:e.which===F.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),r=i.length?i:s):e.which==F.DELETE?this.unselect(n.first())&&(this.search.width(10),r=s.length?s:null):e.which==F.ENTER&&(r=null),this.selectChoice(r),m(e),void(r&&r.length||this.open())}if((e.which===F.BACKSPACE&&1==this.keydowns||e.which==F.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case F.UP:case F.DOWN:return this.moveHighlight(e.which===F.UP?-1:1),void m(e);case F.ENTER:return this.selectHighlighted(),void m(e);case F.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case F.ESC:return this.cancel(e),void m(e)}if(e.which!==F.TAB&&!F.isControl(e)&&!F.isFunctionKey(e)&&e.which!==F.BACKSPACE&&e.which!==F.ESC){if(e.which===F.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===F.PAGE_UP||e.which===F.PAGE_DOWN)&&m(e),e.which===F.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n={},i=[],s=this;e(t).each(function(){s.id(this)in n||(n[s.id(this)]=0,i.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(i),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var n=this.getVal(),i=this;e(t).each(function(){n.push(i.createChoice(this))}),this.setVal(n)},createChoice:function(n){var i,s,o=!n.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?r:a,c=this.id(n);return i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith(e("<div></div>").html(i)),s=this.opts.formatSelectionCssClass(n,l.find("div")),s!=t&&l.addClass(s),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),c},unselect:function(t){var n,i,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=s(this.id(n),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));s(n,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&S(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+k(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,s,o=l(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,s=n-(t-i)-o,e>s&&(s=n-o),40>s&&(s=n-o),0>=s&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){if(this.select)this.select.val(t);else{var n=[],i={};e(t).each(function(){this in i||(n.push(this),i[this]=0)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator))}},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)if(r(this.opts.id(t[n]),this.opts.id(e[i]))){t.splice(n,1),n--,e.splice(i,1);break}return{added:t,removed:e}},val:function(n,i){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(s,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,s,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),void(n&&this.triggerChange(this.buildChangeDetails(s,this.data()))))}}),e.fn.select2=function(){var n,i,o,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),i=a?new window.Select2.class.multi:new window.Select2.class.single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(s(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,i=e(this).data("select2"),
i===t)return;if(o=l[0],"container"===o?r=i.container:"dropdown"===o?r=i.dropdown:(u[o]&&(o=u[o]),r=i[o].apply(i,l.slice(1))),s(l[0],h)>=0||s(l[0],d)>=0&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var s=[];return b(this.text(e),n.term,s,i),s.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,i){return e?i(this.text(e)):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return!(t&&e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:x,tags:_},util:{debounce:d,markMatch:b,escapeMarkup:w,stripDiacritics:i},class:{abstract:O,single:M,multi:I}}}}(jQuery),function(){function e(t){var n=e.modules[t];if(!n)throw new Error('failed to require "'+t+'"');return"exports"in n||"function"!=typeof n.definition||(n.client=n.component=!0,n.definition.call(this,n.exports={},n),delete n.definition),n.exports}e.loader="component",e.helper={},e.helper.semVerSort=function(e,t){for(var n=e.version.split("."),i=t.version.split("."),s=0;s<n.length;++s){var o=parseInt(n[s],10),r=parseInt(i[s],10);if(o!==r)return o>r?1:-1;var a=n[s].substr((""+o).length),l=i[s].substr((""+r).length);if(""===a&&""!==l)return 1;if(""!==a&&""===l)return-1;if(""!==a&&""!==l)return a>l?1:-1}return 0},e.latest=function(t,n){function i(e){throw new Error('failed to find latest module of "'+e+'"')}var s=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/,o=/(.*)~(.*)/;o.test(t)||i(t);for(var r=Object.keys(e.modules),a=[],l=[],c=0;c<r.length;c++){var h=r[c];if(new RegExp(t+"@").test(h)){var d=h.substr(t.length+1),u=s.exec(h);null!=u?a.push({version:d,name:h}):l.push({version:d,name:h})}}if(0===a.concat(l).length&&i(t),a.length>0){var p=a.sort(e.helper.semVerSort).pop().name;return n===!0?p:e(p)}var p=l.sort(function(e,t){return e.name>t.name})[0].name;return n===!0?p:e(p)},e.modules={},e.register=function(t,n){e.modules[t]={definition:n}},e.define=function(t,n){e.modules[t]={exports:n}},e.register("abpetkov~transitionize@0.0.3",function(e,t){function n(e,t){return this instanceof n?(this.element=e,this.props=t||{},void this.init()):new n(e,t)}t.exports=n,n.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},n.prototype.init=function(){var e=[];for(var t in this.props)e.push(t+" "+this.props[t]);this.element.style.transition=e.join(", "),this.isSafari()&&(this.element.style.webkitTransition=e.join(", "))}}),e.register("ftlabs~fastclick@v0.6.11",function(e,t){function n(e){"use strict";var t,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return n.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return n.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return n.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return n.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return n.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return n.prototype.onTouchCancel.apply(i,arguments)},n.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var s=Node.prototype.removeEventListener;"click"===t?s.call(e,t,n.hijacked||n,i):s.call(e,t,n,i)},e.addEventListener=function(t,n,i){var s=Node.prototype.addEventListener;"click"===t?s.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):s.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},n.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},n.prototype.sendClick=function(e,t){"use strict";var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},n.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},n.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},n.prototype.updateScrollParent=function(e){"use strict";var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},n.prototype.onTouchStart=function(e){"use strict";var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},n.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},n.prototype.onTouchMove=function(e){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},n.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(e){"use strict";var t,n,i,s,o,r=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=e.changedTouches[0],r=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=r.tagName.toLowerCase(),"label"===i){if(t=this.findControl(r)){if(this.focus(r),this.deviceIsAndroid)return!1;r=t}}else if(this.needsFocus(r))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(r),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||(s=r.fastClickScrollParent,!s||s.fastClickLastScrollTop===s.scrollTop))||(this.needsClick(r)||(e.preventDefault(),this.sendClick(r,e)),!1)},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(e){"use strict";return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},n.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},n.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(e){"use strict";var t,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n.prototype.deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===e.style.msTouchAction},n.attach=function(e){"use strict";return new n(e)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return n}):"undefined"!=typeof t&&t.exports?(t.exports=n.attach,t.exports.FastClick=n):window.FastClick=n}),e.register("component~indexof@0.0.3",function(e,t){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),e.register("component~classes@1.2.1",function(t,n){function i(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var s=e("component~indexof@0.0.3"),o=/\s+/,r=Object.prototype.toString;n.exports=function(e){return new i(e)},i.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=s(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},i.prototype.remove=function(e){if("[object RegExp]"==r.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=s(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},i.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},i.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},i.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,""),t=e.split(o);return""===t[0]&&t.shift(),t},i.prototype.has=i.prototype.contains=function(e){return this.list?this.list.contains(e):!!~s(this.array(),e)}}),e.register("component~event@0.1.4",function(e,t){var n=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",s="addEventListener"!==n?"on":"";e.bind=function(e,t,i,o){return e[n](s+t,i,o||!1),i},e.unbind=function(e,t,n,o){return e[i](s+t,n,o||!1),n}}),e.register("component~query@0.0.3",function(e,t){function n(e,t){return t.querySelector(e)}e=t.exports=function(e,t){return t=t||document,n(e,t)},e.all=function(e,t){return t=t||document,t.querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return n=t.one,e.all=t.all,e}}),e.register("component~matches-selector@0.1.5",function(t,n){function i(e,t){if(!e||1!==e.nodeType)return!1;if(r)return r.call(e,t);for(var n=s.all(t,e.parentNode),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}var s=e("component~query@0.0.3"),o=Element.prototype,r=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;n.exports=i}),e.register("component~closest@0.1.4",function(t,n){var i=e("component~matches-selector@0.1.5");n.exports=function(e,t,n,s){for(e=n?{parentNode:e}:e,s=s||document;(e=e.parentNode)&&e!==document;){if(i(e,t))return e;if(e===s)return}}}),e.register("component~delegate@0.2.3",function(t,n){var i=e("component~closest@0.1.4"),s=e("component~event@0.1.4");t.bind=function(e,t,n,o,r){return s.bind(e,n,function(n){var s=n.target||n.srcElement;n.delegateTarget=i(s,t,!0,e),n.delegateTarget&&o.call(e,n)},r)},t.unbind=function(e,t,n,i){s.unbind(e,t,n,i)}}),e.register("component~events@1.0.9",function(t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(!e)throw new Error("element required");if(!t)throw new Error("object required");this.el=e,this.obj=t,this._events={}}function s(e){var t=e.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}var o=e("component~event@0.1.4"),r=e("component~delegate@0.2.3");n.exports=i,i.prototype.sub=function(e,t,n){this._events[e]=this._events[e]||{},this._events[e][t]=n},i.prototype.bind=function(e,t){function n(){var e=[].slice.call(arguments).concat(h);l[t].apply(l,e)}var i=s(e),a=this.el,l=this.obj,c=i.name,t=t||"on"+c,h=[].slice.call(arguments,2);return i.selector?n=r.bind(a,i.selector,c,n):o.bind(a,c,n),this.sub(c,t,n),n},i.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(e);var n=this._events[e];if(n){var i=n[t];i&&o.unbind(this.el,e,i)}},i.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},i.prototype.unbindAllOf=function(e){var t=this._events[e];if(t)for(var n in t)this.unbind(e,n)}}),e.register("switchery",function(t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);this.element=e,this.options=t||{};for(var n in l)null==this.options[n]&&(this.options[n]=l[n]);null!=this.element&&"checkbox"==this.element.type&&this.init(),this.isDisabled()===!0&&this.disable()}var s=e("abpetkov~transitionize@0.0.3"),o=e("ftlabs~fastclick@v0.6.11"),r=e("component~classes@1.2.1"),a=e("component~events@1.0.9");n.exports=i;var l={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};i.prototype.hide=function(){this.element.style.display="none"},i.prototype.show=function(){var e=this.create();this.insertAfter(this.element,e)},i.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=a(this.switcher,this),this.switcher},i.prototype.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},i.prototype.setPosition=function(e){var t=this.isChecked(),n=this.switcher,i=this.jack;e&&t?t=!1:e&&!t&&(t=!0),t===!0?(this.element.checked=!0,window.getComputedStyle?i.style.left=parseInt(window.getComputedStyle(n).width)-parseInt(window.getComputedStyle(i).width)+"px":i.style.left=parseInt(n.currentStyle.width)-parseInt(i.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(i.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==l.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())},i.prototype.setSpeed=function(){var e={},t={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};e=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},s(this.switcher,e),s(this.jack,t)},i.prototype.setSize=function(){var e="switchery-small",t="switchery-default",n="switchery-large";switch(this.options.size){case"small":r(this.switcher).add(e);break;case"large":r(this.switcher).add(n);break;default:r(this.switcher).add(t)}},i.prototype.colorize=function(){var e=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+e+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},i.prototype.handleOnchange=function(e){if(document.dispatchEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}else this.element.fireEvent("onchange")},i.prototype.handleChange=function(){var e=this,t=this.element;t.addEventListener?t.addEventListener("change",function(){e.setPosition()}):t.attachEvent("onchange",function(){e.setPosition()})},i.prototype.handleClick=function(){var e=this.switcher;o(e),this.events.bind("click","bindClick")},i.prototype.bindClick=function(){var e=this.element.parentNode.tagName.toLowerCase(),t="label"!==e;this.setPosition(t),this.handleOnchange(this.element.checked)},i.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},i.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},i.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},i.prototype.isChecked=function(){return this.element.checked},i.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},i.prototype.destroy=function(){this.events.unbind()},i.prototype.enable=function(){this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick")},i.prototype.disable=function(){this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy()}}),"object"==typeof exports?module.exports=e("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return e("switchery")}):(this||window).Switchery=e("switchery")}(),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Vn.apply(null,arguments)}function t(e){Vn=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,i){return De(e,t,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function h(e){if(null==e._isValid){var t=c(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=a(NaN);return null!=e?r(c(t),e):c(t).userInvalidated=!0,t}function u(e){return void 0===e}function p(e,t){var n,i,s;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=c(t)),u(t._locale)||(e._locale=t._locale),Kn.length>0)for(n in Kn)i=Kn[n],s=t[i],u(s)||(e[i]=s);return e}function f(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Qn===!1&&(Qn=!0,e.updateOffset(this),Qn=!1)}function m(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=g(t)),n}function y(e,t,n){var i,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(i=0;s>i;i++)(n&&e[i]!==t[i]||!n&&v(e[i])!==v(t[i]))&&r++;return r+o}function b(){}function w(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){for(var t,n,i,s,o=0;o<e.length;){for(s=w(e[o]).split("-"),t=s.length,n=w(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=x(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(s,n,!0)>=t-1)break;t--}o++}return null}function x(e){var t=null;if(!Xn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Gn._abbr,require("./locale/"+e),_(t)}catch(e){}return Xn[e]}function _(e,t){var n;return e&&(n=u(t)?k(e):S(e,t),n&&(Gn=n)),Gn._abbr}function S(e,t){return null!==t?(t.abbr=e,Xn[e]=Xn[e]||new b,Xn[e].set(t),_(e),Xn[e]):(delete Xn[e],null)}function k(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Gn;if(!n(e)){if(t=x(e))return t;e=[e]}return C(e)}function E(e,t){var n=e.toLowerCase();Zn[n]=Zn[n+"s"]=Zn[t]=e}function T(e){return"string"==typeof e?Zn[e]||Zn[e.toLowerCase()]:void 0}function N(e){var t,n,i={};for(n in e)o(e,n)&&(t=T(n),t&&(i[t]=e[n]));return i}function D(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(t,n){return function(i){return null!=i?(I(this,t,i),e.updateOffset(this,n),this):M(this,t)}}function M(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function I(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),D(this[e]))return this[e](t);return this}function R(e,t,n){var i=""+Math.abs(e),s=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}function L(e,t,n,i){var s=i;"string"==typeof i&&(s=function(){return this[i]()}),e&&(ni[e]=s),t&&(ni[t[0]]=function(){return R(s.apply(this,arguments),t[1],t[2])}),n&&(ni[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function P(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,n,i=e.match(Jn);for(t=0,n=i.length;n>t;t++)ni[i[t]]?i[t]=ni[i[t]]:i[t]=P(i[t]);return function(s){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(s,e):i[t];return o}}function F(e,t){return e.isValid()?(t=z(t,e.localeData()),ti[t]=ti[t]||H(t),ti[t](e)):e.localeData().invalidDate()}function z(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(ei.lastIndex=0;i>=0&&ei.test(e);)e=e.replace(ei,n),ei.lastIndex=0,i-=1;return e}function B(e,t,n){wi[e]=D(t)?t:function(e,i){return e&&n?n:t}}function $(e,t){return o(wi,e)?wi[e](t._strict,t._locale):new RegExp(Y(e))}function Y(e){return W(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,s){return t||n||i||s}))}function W(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function j(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)Ci[e[n]]=i}function U(e,t){j(e,function(e,n,i,s){i._w=i._w||{},t(e,i._w,i,s)})}function q(e,t,n){null!=t&&o(Ci,e)&&Ci[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function G(e,t){return n(this._months)?this._months[e.month()]:this._months[Mi.test(t)?"format":"standalone"][e.month()]}function K(e,t){return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Mi.test(t)?"format":"standalone"][e.month()]}function Q(e,t,n){var i,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(s=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function X(e,t){var n;return e.isValid()?"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e):e}function Z(t){return null!=t?(X(this,t),e.updateOffset(this,!0),this):M(this,"Month")}function J(){return V(this.year(),this.month())}function ee(e){return this._monthsParseExact?(o(this,"_monthsRegex")||ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function te(e){return this._monthsParseExact?(o(this,"_monthsRegex")||ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function ne(){function e(e,t){return t.length-e.length}var t,n,i=[],s=[],o=[];for(t=0;12>t;t++)n=a([2e3,t]),i.push(this.monthsShort(n,"")),s.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),s.sort(e),o.sort(e),t=0;12>t;t++)i[t]=W(i[t]),s[t]=W(s[t]),o[t]=W(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")$","i")}function ie(e){var t,n=e._a;return n&&-2===c(e).overflow&&(t=n[_i]<0||n[_i]>11?_i:n[Si]<1||n[Si]>V(n[xi],n[_i])?Si:n[ki]<0||n[ki]>24||24===n[ki]&&(0!==n[Ei]||0!==n[Ti]||0!==n[Ni])?ki:n[Ei]<0||n[Ei]>59?Ei:n[Ti]<0||n[Ti]>59?Ti:n[Ni]<0||n[Ni]>999?Ni:-1,c(e)._overflowDayOfYear&&(xi>t||t>Si)&&(t=Si),c(e)._overflowWeeks&&-1===t&&(t=Di),c(e)._overflowWeekday&&-1===t&&(t=Oi),c(e).overflow=t),e}function se(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function oe(e,t){var n=!0;return r(function(){return n&&(se(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function re(e,t){Pi[e]||(se(t),Pi[e]=!0)}function ae(e){var t,n,i,s,o,r,a=e._i,l=Hi.exec(a)||Fi.exec(a);if(l){for(c(e).iso=!0,t=0,n=Bi.length;n>t;t++)if(Bi[t][1].exec(l[1])){s=Bi[t][0],i=Bi[t][2]!==!1;break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,n=$i.length;n>t;t++)if($i[t][1].exec(l[3])){o=(l[2]||" ")+$i[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!zi.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=s+(o||"")+(r||""),xe(e)}else e._isValid=!1}function le(t){var n=Yi.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(ae(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ce(e,t,n,i,s,o,r){var a=new Date(e,t,n,i,s,o,r);return 100>e&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function he(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function de(e){return ue(e)?366:365}function ue(e){return e%4===0&&e%100!==0||e%400===0}function pe(){return ue(this.year())}function fe(e,t,n){var i=7+t-n,s=(7+he(e,0,i).getUTCDay()-t)%7;return-s+i-1}function me(e,t,n,i,s){var o,r,a=(7+n-i)%7,l=fe(e,i,s),c=1+7*(t-1)+a+l;return 0>=c?(o=e-1,r=de(o)+c):c>de(e)?(o=e+1,r=c-de(e)):(o=e,r=c),{year:o,dayOfYear:r}}function ge(e,t,n){var i,s,o=fe(e.year(),t,n),r=Math.floor((e.dayOfYear()-o-1)/7)+1;return 1>r?(s=e.year()-1,i=r+ve(s,t,n)):r>ve(e.year(),t,n)?(i=r-ve(e.year(),t,n),s=e.year()+1):(s=e.year(),i=r),{week:i,year:s}}function ve(e,t,n){var i=fe(e,t,n),s=fe(e+1,t,n);return(de(e)-i+s)/7}function ye(e,t,n){return null!=e?e:null!=t?t:n}function be(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function we(e){var t,n,i,s,o=[];if(!e._d){for(i=be(e),e._w&&null==e._a[Si]&&null==e._a[_i]&&Ce(e),e._dayOfYear&&(s=ye(e._a[xi],i[xi]),e._dayOfYear>de(s)&&(c(e)._overflowDayOfYear=!0),n=he(s,0,e._dayOfYear),e._a[_i]=n.getUTCMonth(),e._a[Si]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ki]&&0===e._a[Ei]&&0===e._a[Ti]&&0===e._a[Ni]&&(e._nextDay=!0,e._a[ki]=0),e._d=(e._useUTC?he:ce).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ki]=24)}}function Ce(e){var t,n,i,s,o,r,a,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,r=4,n=ye(t.GG,e._a[xi],ge(Oe(),1,4).year),i=ye(t.W,1),s=ye(t.E,1),(1>s||s>7)&&(l=!0)):(o=e._locale._week.dow,r=e._locale._week.doy,n=ye(t.gg,e._a[xi],ge(Oe(),o,r).year),i=ye(t.w,1),null!=t.d?(s=t.d,(0>s||s>6)&&(l=!0)):null!=t.e?(s=t.e+o,(t.e<0||t.e>6)&&(l=!0)):s=o),1>i||i>ve(n,o,r)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(a=me(n,i,s,o,r),e._a[xi]=a.year,e._dayOfYear=a.dayOfYear);
}function xe(t){if(t._f===e.ISO_8601)return void ae(t);t._a=[],c(t).empty=!0;var n,i,s,o,r,a=""+t._i,l=a.length,h=0;for(s=z(t._f,t._locale).match(Jn)||[],n=0;n<s.length;n++)o=s[n],i=(a.match($(o,t))||[])[0],i&&(r=a.substr(0,a.indexOf(i)),r.length>0&&c(t).unusedInput.push(r),a=a.slice(a.indexOf(i)+i.length),h+=i.length),ni[o]?(i?c(t).empty=!1:c(t).unusedTokens.push(o),q(o,i,t)):t._strict&&!i&&c(t).unusedTokens.push(o);c(t).charsLeftOver=l-h,a.length>0&&c(t).unusedInput.push(a),c(t).bigHour===!0&&t._a[ki]<=12&&t._a[ki]>0&&(c(t).bigHour=void 0),t._a[ki]=_e(t._locale,t._a[ki],t._meridiem),we(t),ie(t)}function _e(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function Se(e){var t,n,i,s,o;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],xe(t),h(t)&&(o+=c(t).charsLeftOver,o+=10*c(t).unusedTokens.length,c(t).score=o,(null==i||i>o)&&(i=o,n=t));r(e,n||t)}function ke(e){if(!e._d){var t=N(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),we(e)}}function Ee(e){var t=new f(ie(Te(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Te(e){var t=e._i,s=e._f;return e._locale=e._locale||k(e._l),null===t||void 0===s&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new f(ie(t)):(n(s)?Se(e):s?xe(e):i(t)?e._d=t:Ne(e),h(e)||(e._d=null),e))}function Ne(t){var o=t._i;void 0===o?t._d=new Date(e.now()):i(o)?t._d=new Date((+o)):"string"==typeof o?le(t):n(o)?(t._a=s(o.slice(0),function(e){return parseInt(e,10)}),we(t)):"object"==typeof o?ke(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function De(e,t,n,i,s){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=n,o._i=e,o._f=t,o._strict=i,Ee(o)}function Oe(e,t,n,i){return De(e,t,n,i,!1)}function Me(e,t){var i,s;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Oe();for(i=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](i))&&(i=t[s]);return i}function Ie(){var e=[].slice.call(arguments,0);return Me("isBefore",e)}function Ae(){var e=[].slice.call(arguments,0);return Me("isAfter",e)}function Re(e){var t=N(e),n=t.year||0,i=t.quarter||0,s=t.month||0,o=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,h=t.millisecond||0;this._milliseconds=+h+1e3*c+6e4*l+36e5*a,this._days=+r+7*o,this._months=+s+3*i+12*n,this._data={},this._locale=k(),this._bubble()}function Le(e){return e instanceof Re}function Pe(e,t){L(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)})}function He(e,t){var n=(t||"").match(e)||[],i=n[n.length-1]||[],s=(i+"").match(Vi)||["-",0,0],o=+(60*s[1])+v(s[2]);return"+"===s[0]?o:-o}function Fe(t,n){var s,o;return n._isUTC?(s=n.clone(),o=(m(t)||i(t)?+t:+Oe(t))-+s,s._d.setTime(+s._d+o),e.updateOffset(s,!1),s):Oe(t).local()}function ze(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Be(t,n){var i,s=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=He(vi,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=ze(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==t&&(!n||this._changeInProgress?nt(this,Xe(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:ze(this):null!=t?this:NaN}function $e(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ye(e){return this.utcOffset(0,e)}function We(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ze(this),"m")),this}function je(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(He(gi,this._i)),this}function Ue(e){return!!this.isValid()&&(e=e?Oe(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function qe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ve(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=Te(e),e._a){var t=e._isUTC?a(e._a):Oe(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ge(){return!!this.isValid()&&!this._isUTC}function Ke(){return!!this.isValid()&&this._isUTC}function Qe(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xe(e,t){var n,i,s,r=e,a=null;return Le(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=Gi.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:v(a[Si])*n,h:v(a[ki])*n,m:v(a[Ei])*n,s:v(a[Ti])*n,ms:v(a[Ni])*n}):(a=Ki.exec(e))?(n="-"===a[1]?-1:1,r={y:Ze(a[2],n),M:Ze(a[3],n),d:Ze(a[4],n),h:Ze(a[5],n),m:Ze(a[6],n),s:Ze(a[7],n),w:Ze(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=et(Oe(r.from),Oe(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),i=new Re(r),Le(e)&&o(e,"_locale")&&(i._locale=e._locale),i}function Ze(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Je(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function et(e,t){var n;return e.isValid()&&t.isValid()?(t=Fe(t,e),e.isBefore(t)?n=Je(e,t):(n=Je(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tt(e,t){return function(n,i){var s,o;return null===i||isNaN(+i)||(re(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,s=Xe(n,i),nt(this,s,e),this}}function nt(t,n,i,s){var o=n._milliseconds,r=n._days,a=n._months;t.isValid()&&(s=null==s||s,o&&t._d.setTime(+t._d+o*i),r&&I(t,"Date",M(t,"Date")+r*i),a&&X(t,M(t,"Month")+a*i),s&&e.updateOffset(t,r||a))}function it(e,t){var n=e||Oe(),i=Fe(n,this).startOf("day"),s=this.diff(i,"days",!0),o=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse",r=t&&(D(t[o])?t[o]():t[o]);return this.format(r||this.localeData().calendar(o,this,Oe(n)))}function st(){return new f(this)}function ot(e,t){var n=m(e)?e:Oe(e);return!(!this.isValid()||!n.isValid())&&(t=T(u(t)?"millisecond":t),"millisecond"===t?+this>+n:+n<+this.clone().startOf(t))}function rt(e,t){var n=m(e)?e:Oe(e);return!(!this.isValid()||!n.isValid())&&(t=T(u(t)?"millisecond":t),"millisecond"===t?+n>+this:+this.clone().endOf(t)<+n)}function at(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function lt(e,t){var n,i=m(e)?e:Oe(e);return!(!this.isValid()||!i.isValid())&&(t=T(t||"millisecond"),"millisecond"===t?+this===+i:(n=+i,+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t)))}function ct(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ht(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dt(e,t,n){var i,s,o,r;return this.isValid()?(i=Fe(e,this),i.isValid()?(s=6e4*(i.utcOffset()-this.utcOffset()),t=T(t),"year"===t||"month"===t||"quarter"===t?(r=ut(this,i),"quarter"===t?r/=3:"year"===t&&(r/=12)):(o=this-i,r="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-s)/864e5:"week"===t?(o-s)/6048e5:o),n?r:g(r)):NaN):NaN}function ut(e,t){var n,i,s=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(s,"months");return 0>t-o?(n=e.clone().add(s-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(s+1,"months"),i=(t-o)/(n-o)),-(s+i)}function pt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ft(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():F(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mt(t){var n=F(this,t||e.defaultFormat);return this.localeData().postformat(n)}function gt(e,t){return this.isValid()&&(m(e)&&e.isValid()||Oe(e).isValid())?Xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vt(e){return this.from(Oe(),e)}function yt(e,t){return this.isValid()&&(m(e)&&e.isValid()||Oe(e).isValid())?Xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function bt(e){return this.to(Oe(),e)}function wt(e){var t;return void 0===e?this._locale._abbr:(t=k(e),null!=t&&(this._locale=t),this)}function Ct(){return this._locale}function xt(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function _t(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function St(){return+this._d-6e4*(this._offset||0)}function kt(){return Math.floor(+this/1e3)}function Et(){return this._offset?new Date((+this)):this._d}function Tt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Nt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Dt(){return this.isValid()?this.toISOString():"null"}function Ot(){return h(this)}function Mt(){return r({},c(this))}function It(){return c(this).overflow}function At(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Rt(e,t){L(0,[e,e.length],0,t)}function Lt(e){return zt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Pt(e){return zt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ht(){return ve(this.year(),1,4)}function Ft(){var e=this.localeData()._week;return ve(this.year(),e.dow,e.doy)}function zt(e,t,n,i,s){var o;return null==e?ge(this,i,s).year:(o=ve(e,i,s),t>o&&(t=o),Bt.call(this,e,t,n,i,s))}function Bt(e,t,n,i,s){var o=me(e,t,n,i,s),r=he(o.year,0,o.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function $t(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Yt(e){return ge(e,this._week.dow,this._week.doy).week}function Wt(){return this._week.dow}function jt(){return this._week.doy}function Ut(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function qt(e){var t=ge(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Vt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Gt(e,t){return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function Kt(e){return this._weekdaysShort[e.day()]}function Qt(e){return this._weekdaysMin[e.day()]}function Xt(e,t,n){var i,s,o;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(s=Oe([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Zt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Vt(e,this.localeData()),this.add(e-t,"d")):t}function Jt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function en(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function tn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function nn(){return this.hours()%12||12}function sn(e,t){L(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function on(e,t){return t._meridiemParse}function rn(e){return"p"===(e+"").toLowerCase().charAt(0)}function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function ln(e,t){t[Ni]=v(1e3*("0."+e))}function cn(){return this._isUTC?"UTC":""}function hn(){return this._isUTC?"Coordinated Universal Time":""}function dn(e){return Oe(1e3*e)}function un(){return Oe.apply(null,arguments).parseZone()}function pn(e,t,n){var i=this._calendar[e];return D(i)?i.call(t,n):i}function fn(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function mn(){return this._invalidDate}function gn(e){return this._ordinal.replace("%d",e)}function vn(e){return e}function yn(e,t,n,i){var s=this._relativeTime[n];return D(s)?s(e,t,n,i):s.replace(/%d/i,e)}function bn(e,t){var n=this._relativeTime[e>0?"future":"past"];return D(n)?n(t):n.replace(/%s/i,t)}function wn(e){var t,n;for(n in e)t=e[n],D(t)?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function Cn(e,t,n,i){var s=k(),o=a().set(i,t);return s[n](o,e)}function xn(e,t,n,i,s){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Cn(e,t,n,s);var o,r=[];for(o=0;i>o;o++)r[o]=Cn(e,o,n,s);return r}function _n(e,t){return xn(e,t,"months",12,"month")}function Sn(e,t){return xn(e,t,"monthsShort",12,"month")}function kn(e,t){return xn(e,t,"weekdays",7,"day")}function En(e,t){return xn(e,t,"weekdaysShort",7,"day")}function Tn(e,t){return xn(e,t,"weekdaysMin",7,"day")}function Nn(){var e=this._data;return this._milliseconds=bs(this._milliseconds),this._days=bs(this._days),this._months=bs(this._months),e.milliseconds=bs(e.milliseconds),e.seconds=bs(e.seconds),e.minutes=bs(e.minutes),e.hours=bs(e.hours),e.months=bs(e.months),e.years=bs(e.years),this}function Dn(e,t,n,i){var s=Xe(t,n);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function On(e,t){return Dn(this,e,t,1)}function Mn(e,t){return Dn(this,e,t,-1)}function In(e){return 0>e?Math.floor(e):Math.ceil(e)}function An(){var e,t,n,i,s,o=this._milliseconds,r=this._days,a=this._months,l=this._data;return o>=0&&r>=0&&a>=0||0>=o&&0>=r&&0>=a||(o+=864e5*In(Ln(a)+r),r=0,a=0),l.milliseconds=o%1e3,e=g(o/1e3),l.seconds=e%60,t=g(e/60),l.minutes=t%60,n=g(t/60),l.hours=n%24,r+=g(n/24),s=g(Rn(r)),a+=s,r-=In(Ln(s)),i=g(a/12),a%=12,l.days=r,l.months=a,l.years=i,this}function Rn(e){return 4800*e/146097}function Ln(e){return 146097*e/4800}function Pn(e){var t,n,i=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+Rn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Ln(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Hn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Fn(e){return function(){return this.as(e)}}function zn(e){return e=T(e),this[e+"s"]()}function Bn(e){return function(){return this._data[e]}}function $n(){return g(this.days()/7)}function Yn(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}function Wn(e,t,n){var i=Xe(e).abs(),s=Ls(i.as("s")),o=Ls(i.as("m")),r=Ls(i.as("h")),a=Ls(i.as("d")),l=Ls(i.as("M")),c=Ls(i.as("y")),h=s<Ps.s&&["s",s]||1>=o&&["m"]||o<Ps.m&&["mm",o]||1>=r&&["h"]||r<Ps.h&&["hh",r]||1>=a&&["d"]||a<Ps.d&&["dd",a]||1>=l&&["M"]||l<Ps.M&&["MM",l]||1>=c&&["y"]||["yy",c];return h[2]=t,h[3]=+e>0,h[4]=n,Yn.apply(null,h)}function jn(e,t){return void 0!==Ps[e]&&(void 0===t?Ps[e]:(Ps[e]=t,!0))}function Un(e){var t=this.localeData(),n=Wn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function qn(){var e,t,n,i=Hs(this._milliseconds)/1e3,s=Hs(this._days),o=Hs(this._months);e=g(i/60),t=g(e/60),i%=60,e%=60,n=g(o/12),o%=12;var r=n,a=o,l=s,c=t,h=e,d=i,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||h||d?"T":"")+(c?c+"H":"")+(h?h+"M":"")+(d?d+"S":""):"P0D"}var Vn,Gn,Kn=e.momentProperties=[],Qn=!1,Xn={},Zn={},Jn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ei=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ti={},ni={},ii=/\d/,si=/\d\d/,oi=/\d{3}/,ri=/\d{4}/,ai=/[+-]?\d{6}/,li=/\d\d?/,ci=/\d\d\d\d?/,hi=/\d\d\d\d\d\d?/,di=/\d{1,3}/,ui=/\d{1,4}/,pi=/[+-]?\d{1,6}/,fi=/\d+/,mi=/[+-]?\d+/,gi=/Z|[+-]\d\d:?\d\d/gi,vi=/Z|[+-]\d\d(?::?\d\d)?/gi,yi=/[+-]?\d+(\.\d{1,3})?/,bi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,wi={},Ci={},xi=0,_i=1,Si=2,ki=3,Ei=4,Ti=5,Ni=6,Di=7,Oi=8;L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),L("MMMM",0,0,function(e){return this.localeData().months(this,e)}),E("month","M"),B("M",li),B("MM",li,si),B("MMM",function(e,t){return t.monthsShortRegex(e)}),B("MMMM",function(e,t){return t.monthsRegex(e)}),j(["M","MM"],function(e,t){t[_i]=v(e)-1}),j(["MMM","MMMM"],function(e,t,n,i){var s=n._locale.monthsParse(e,i,n._strict);null!=s?t[_i]=s:c(n).invalidMonth=e});var Mi=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ii="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ai="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ri=bi,Li=bi,Pi={};e.suppressDeprecationWarnings=!1;var Hi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Fi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,zi=/Z|[+-]\d\d(?::?\d\d)?/,Bi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],$i=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Yi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=oe("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),L("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),E("year","y"),B("Y",mi),B("YY",li,si),B("YYYY",ui,ri),B("YYYYY",pi,ai),B("YYYYYY",pi,ai),j(["YYYYY","YYYYYY"],xi),j("YYYY",function(t,n){n[xi]=2===t.length?e.parseTwoDigitYear(t):v(t)}),j("YY",function(t,n){n[xi]=e.parseTwoDigitYear(t)}),j("Y",function(e,t){t[xi]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var Wi=O("FullYear",!1);e.ISO_8601=function(){};var ji=oe("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Oe.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:d()}),Ui=oe("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Oe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:d()}),qi=function(){return Date.now?Date.now():+new Date};Pe("Z",":"),Pe("ZZ",""),B("Z",vi),B("ZZ",vi),j(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=He(vi,e)});var Vi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Gi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ki=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xe.fn=Re.prototype;var Qi=tt(1,"add"),Xi=tt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Zi=oe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Rt("gggg","weekYear"),Rt("ggggg","weekYear"),Rt("GGGG","isoWeekYear"),Rt("GGGGG","isoWeekYear"),E("weekYear","gg"),E("isoWeekYear","GG"),B("G",mi),B("g",mi),B("GG",li,si),B("gg",li,si),B("GGGG",ui,ri),B("gggg",ui,ri),B("GGGGG",pi,ai),B("ggggg",pi,ai),U(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=v(e)}),U(["gg","GG"],function(t,n,i,s){n[s]=e.parseTwoDigitYear(t)}),L("Q",0,"Qo","quarter"),E("quarter","Q"),B("Q",ii),j("Q",function(e,t){t[_i]=3*(v(e)-1)}),L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),E("week","w"),E("isoWeek","W"),B("w",li),B("ww",li,si),B("W",li),B("WW",li,si),U(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=v(e)});var Ji={dow:0,doy:6};L("D",["DD",2],"Do","date"),E("date","D"),B("D",li),B("DD",li,si),B("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),j(["D","DD"],Si),j("Do",function(e,t){t[Si]=v(e.match(li)[0],10)});var es=O("Date",!0);L("d",0,"do","day"),L("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),L("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),L("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),E("day","d"),E("weekday","e"),E("isoWeekday","E"),B("d",li),B("e",li),B("E",li),B("dd",bi),B("ddd",bi),B("dddd",bi),U(["dd","ddd","dddd"],function(e,t,n,i){var s=n._locale.weekdaysParse(e,i,n._strict);null!=s?t.d=s:c(n).invalidWeekday=e}),U(["d","e","E"],function(e,t,n,i){t[i]=v(e)});var ts="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ns="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),is="Su_Mo_Tu_We_Th_Fr_Sa".split("_");L("DDD",["DDDD",3],"DDDo","dayOfYear"),E("dayOfYear","DDD"),B("DDD",di),B("DDDD",oi),j(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),L("H",["HH",2],0,"hour"),L("h",["hh",2],0,nn),L("hmm",0,0,function(){return""+nn.apply(this)+R(this.minutes(),2)}),L("hmmss",0,0,function(){return""+nn.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)}),L("Hmm",0,0,function(){return""+this.hours()+R(this.minutes(),2)}),L("Hmmss",0,0,function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)}),sn("a",!0),sn("A",!1),E("hour","h"),B("a",on),B("A",on),B("H",li),B("h",li),B("HH",li,si),B("hh",li,si),B("hmm",ci),B("hmmss",hi),B("Hmm",ci),B("Hmmss",hi),j(["H","HH"],ki),j(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),j(["h","hh"],function(e,t,n){t[ki]=v(e),c(n).bigHour=!0}),j("hmm",function(e,t,n){var i=e.length-2;t[ki]=v(e.substr(0,i)),t[Ei]=v(e.substr(i)),c(n).bigHour=!0}),j("hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[ki]=v(e.substr(0,i)),t[Ei]=v(e.substr(i,2)),t[Ti]=v(e.substr(s)),c(n).bigHour=!0}),j("Hmm",function(e,t,n){var i=e.length-2;t[ki]=v(e.substr(0,i)),t[Ei]=v(e.substr(i))}),j("Hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[ki]=v(e.substr(0,i)),t[Ei]=v(e.substr(i,2)),t[Ti]=v(e.substr(s))});var ss=/[ap]\.?m?\.?/i,os=O("Hours",!0);L("m",["mm",2],0,"minute"),E("minute","m"),B("m",li),B("mm",li,si),j(["m","mm"],Ei);var rs=O("Minutes",!1);L("s",["ss",2],0,"second"),E("second","s"),B("s",li),B("ss",li,si),j(["s","ss"],Ti);var as=O("Seconds",!1);L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,function(){return 10*this.millisecond()}),L(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),L(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),L(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),L(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),L(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),E("millisecond","ms"),B("S",di,ii),B("SS",di,si),B("SSS",di,oi);var ls;for(ls="SSSS";ls.length<=9;ls+="S")B(ls,fi);for(ls="S";ls.length<=9;ls+="S")j(ls,ln);var cs=O("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var hs=f.prototype;hs.add=Qi,hs.calendar=it,hs.clone=st,hs.diff=dt,hs.endOf=_t,hs.format=mt,hs.from=gt,hs.fromNow=vt,hs.to=yt,hs.toNow=bt,hs.get=A,hs.invalidAt=It,hs.isAfter=ot,hs.isBefore=rt,hs.isBetween=at,hs.isSame=lt,hs.isSameOrAfter=ct,hs.isSameOrBefore=ht,hs.isValid=Ot,hs.lang=Zi,hs.locale=wt,hs.localeData=Ct,hs.max=Ui,hs.min=ji,hs.parsingFlags=Mt,hs.set=A,hs.startOf=xt,hs.subtract=Xi,hs.toArray=Tt,hs.toObject=Nt,hs.toDate=Et,hs.toISOString=ft,hs.toJSON=Dt,hs.toString=pt,hs.unix=kt,hs.valueOf=St,hs.creationData=At,hs.year=Wi,hs.isLeapYear=pe,hs.weekYear=Lt,hs.isoWeekYear=Pt,hs.quarter=hs.quarters=$t,hs.month=Z,hs.daysInMonth=J,hs.week=hs.weeks=Ut,hs.isoWeek=hs.isoWeeks=qt,hs.weeksInYear=Ft,hs.isoWeeksInYear=Ht,hs.date=es,hs.day=hs.days=Zt,hs.weekday=Jt,hs.isoWeekday=en,hs.dayOfYear=tn,hs.hour=hs.hours=os,hs.minute=hs.minutes=rs,hs.second=hs.seconds=as,hs.millisecond=hs.milliseconds=cs,hs.utcOffset=Be,hs.utc=Ye,hs.local=We,hs.parseZone=je,hs.hasAlignedHourOffset=Ue,hs.isDST=qe,hs.isDSTShifted=Ve,hs.isLocal=Ge,hs.isUtcOffset=Ke,hs.isUtc=Qe,hs.isUTC=Qe,hs.zoneAbbr=cn,hs.zoneName=hn,hs.dates=oe("dates accessor is deprecated. Use date instead.",es),hs.months=oe("months accessor is deprecated. Use month instead",Z),hs.years=oe("years accessor is deprecated. Use year instead",Wi),hs.zone=oe("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",$e);var ds=hs,us={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ps={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},fs="Invalid date",ms="%d",gs=/\d{1,2}/,vs={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ys=b.prototype;ys._calendar=us,ys.calendar=pn,ys._longDateFormat=ps,ys.longDateFormat=fn,ys._invalidDate=fs,ys.invalidDate=mn,ys._ordinal=ms,ys.ordinal=gn,ys._ordinalParse=gs,ys.preparse=vn,ys.postformat=vn,ys._relativeTime=vs,ys.relativeTime=yn,ys.pastFuture=bn,ys.set=wn,ys.months=G,ys._months=Ii,ys.monthsShort=K,ys._monthsShort=Ai,ys.monthsParse=Q,ys._monthsRegex=Li,ys.monthsRegex=te,ys._monthsShortRegex=Ri,ys.monthsShortRegex=ee,ys.week=Yt,ys._week=Ji,ys.firstDayOfYear=jt,ys.firstDayOfWeek=Wt,ys.weekdays=Gt,ys._weekdays=ts,ys.weekdaysMin=Qt,ys._weekdaysMin=is,ys.weekdaysShort=Kt,ys._weekdaysShort=ns,ys.weekdaysParse=Xt,ys.isPM=rn,ys._meridiemParse=ss,ys.meridiem=an,_("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=oe("moment.lang is deprecated. Use moment.locale instead.",_),e.langData=oe("moment.langData is deprecated. Use moment.localeData instead.",k);var bs=Math.abs,ws=Fn("ms"),Cs=Fn("s"),xs=Fn("m"),_s=Fn("h"),Ss=Fn("d"),ks=Fn("w"),Es=Fn("M"),Ts=Fn("y"),Ns=Bn("milliseconds"),Ds=Bn("seconds"),Os=Bn("minutes"),Ms=Bn("hours"),Is=Bn("days"),As=Bn("months"),Rs=Bn("years"),Ls=Math.round,Ps={s:45,m:45,h:22,d:26,M:11},Hs=Math.abs,Fs=Re.prototype;Fs.abs=Nn,Fs.add=On,Fs.subtract=Mn,Fs.as=Pn,Fs.asMilliseconds=ws,Fs.asSeconds=Cs,Fs.asMinutes=xs,Fs.asHours=_s,Fs.asDays=Ss,Fs.asWeeks=ks,Fs.asMonths=Es,Fs.asYears=Ts,Fs.valueOf=Hn,Fs._bubble=An,Fs.get=zn,Fs.milliseconds=Ns,Fs.seconds=Ds,Fs.minutes=Os,Fs.hours=Ms,Fs.days=Is,Fs.weeks=$n,Fs.months=As,Fs.years=Rs,Fs.humanize=Un,Fs.toISOString=qn,Fs.toString=qn,Fs.toJSON=qn,Fs.locale=wt,Fs.localeData=Ct,Fs.toIsoString=oe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qn),Fs.lang=Zi,L("X",0,0,"unix"),L("x",0,0,"valueOf"),B("x",mi),B("X",yi),j("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),j("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.11.2",t(Oe),e.fn=ds,e.min=Ie,e.max=Ae,e.now=qi,e.utc=a,e.unix=dn,e.months=_n,e.isDate=i,e.locale=_,e.invalid=d,e.duration=Xe,e.isMoment=m,e.weekdays=kn,e.parseZone=un,e.localeData=k,e.isDuration=Le,e.monthsShort=Sn,e.weekdaysMin=Tn,e.defineLocale=S,e.weekdaysShort=En,e.normalizeUnits=T,e.relativeTimeThreshold=jn,e.prototype=ds;var zs=e;return zs}),!function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var s,o,r,a,l,c,h,d={},u=!0,p=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],y=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],C={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},x={},_=function(e){var n,s,o,r,a,l=!1;return void 0!==t.tz&&void 0!==i.timeZone&&null!==i.timeZone&&""!==i.timeZone&&(l=!0),void 0===e||null===e?n=l?t().tz(i.timeZone).startOf("d"):t().startOf("d"):l?(s=t().tz(i.timeZone).utcOffset(),o=t(e,c,i.useStrict).utcOffset(),o!==s?(r=t().tz(i.timeZone).format("Z"),a=t(e,c,i.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+r,n=t(a,c,i.useStrict).tz(i.timeZone)):n=t(e,c,i.useStrict).tz(i.timeZone)):n=t(e,c,i.useStrict),n},S=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},k=function(){return S("h")||S("m")||S("s")},E=function(){return S("y")||S("M")||S("d")},T=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(i.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(i.icons.next)))),n=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",i.calendarWeeks?"8":"7")));
return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone()))]},N=function(){var t=e("<tr>"),n=e("<tr>"),s=e("<tr>");return S("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:i.tooltips.pickHour}).attr("data-action","showHours"))),s.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(i.icons.down))))),S("m")&&(S("h")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),s.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:i.tooltips.pickMinute}).attr("data-action","showMinutes"))),s.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(i.icons.down))))),S("s")&&(S("m")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),s.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:i.tooltips.pickSecond}).attr("data-action","showSeconds"))),s.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(i.icons.down))))),a||(t.append(e("<td>").addClass("separator")),n.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:i.tooltips.togglePeriod}))),s.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,n,s]))},D=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),s=[N()];return S("h")&&s.push(t),S("m")&&s.push(n),S("s")&&s.push(i),s},O=function(){var t=[];return i.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:i.tooltips.today}).append(e("<span>").addClass(i.icons.today)))),!i.sideBySide&&E()&&k()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:i.tooltips.selectTime}).append(e("<span>").addClass(i.icons.time)))),i.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:i.tooltips.clear}).append(e("<span>").addClass(i.icons.clear)))),i.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:i.tooltips.close}).append(e("<span>").addClass(i.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},M=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=e("<div>").addClass("datepicker").append(T()),s=e("<div>").addClass("timepicker").append(D()),o=e("<ul>").addClass("list-unstyled"),r=e("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append(O());return i.inline&&t.removeClass("dropdown-menu"),a&&t.addClass("usetwentyfour"),S("s")&&!a&&t.addClass("wider"),i.sideBySide&&E()&&k()?(t.addClass("timepicker-sbs"),"top"===i.toolbarPlacement&&t.append(r),t.append(e("<div>").addClass("row").append(n.addClass("col-md-6")).append(s.addClass("col-md-6"))),"bottom"===i.toolbarPlacement&&t.append(r),t):("top"===i.toolbarPlacement&&o.append(r),E()&&o.append(e("<li>").addClass(i.collapse&&k()?"collapse in":"").append(n)),"default"===i.toolbarPlacement&&o.append(r),k()&&o.append(e("<li>").addClass(i.collapse&&E()?"collapse":"").append(s)),"bottom"===i.toolbarPlacement&&o.append(r),t.append(o))},I=function(){var t,s={};return t=n.is("input")||i.inline?n.data():n.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(s=e.extend(!0,s,t.dateOptions)),e.each(i,function(e){var n="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[n]&&(s[e]=t[n])}),s},A=function(){var t,s=(p||n).position(),o=(p||n).offset(),r=i.widgetPositioning.vertical,a=i.widgetPositioning.horizontal;if(i.widgetParent)t=i.widgetParent.append(f);else if(n.is("input"))t=n.after(f).parent();else{if(i.inline)return void(t=n.append(f));t=n,n.children().first().after(f)}if("auto"===r&&(r=o.top+1.5*f.height()>=e(window).height()+e(window).scrollTop()&&f.height()+n.outerHeight()<o.top?"top":"bottom"),"auto"===a&&(a=t.width()<o.left+f.outerWidth()/2&&o.left+f.outerWidth()>e(window).width()?"right":"left"),"top"===r?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===a?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===r?"auto":s.top+n.outerHeight(),bottom:"top"===r?s.top+n.outerHeight():"auto",left:"left"===a?t===n?0:s.left:"auto",right:"left"===a?"auto":t.outerWidth()-n.outerWidth()-(t===n?0:s.left)})},R=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},L=function(e){"y"===e&&(e="YYYY"),R({type:"dp.update",change:e,viewDate:o.clone()})},P=function(e){f&&(e&&(h=Math.max(m,Math.min(3,h+e))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[h].clsName).show())},H=function(){var t=e("<tr>"),n=o.clone().startOf("w").startOf("d");for(i.calendarWeeks===!0&&t.append(e("<th>").addClass("cw").text("#"));n.isBefore(o.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");f.find(".datepicker-days thead").append(t)},F=function(e){return i.disabledDates[e.format("YYYY-MM-DD")]===!0},z=function(e){return i.enabledDates[e.format("YYYY-MM-DD")]===!0},B=function(e){return i.disabledHours[e.format("H")]===!0},$=function(e){return i.enabledHours[e.format("H")]===!0},Y=function(t,n){if(!t.isValid())return!1;if(i.disabledDates&&"d"===n&&F(t))return!1;if(i.enabledDates&&"d"===n&&!z(t))return!1;if(i.minDate&&t.isBefore(i.minDate,n))return!1;if(i.maxDate&&t.isAfter(i.maxDate,n))return!1;if(i.daysOfWeekDisabled&&"d"===n&&-1!==i.daysOfWeekDisabled.indexOf(t.day()))return!1;if(i.disabledHours&&("h"===n||"m"===n||"s"===n)&&B(t))return!1;if(i.enabledHours&&("h"===n||"m"===n||"s"===n)&&!$(t))return!1;if(i.disabledTimeIntervals&&("h"===n||"m"===n||"s"===n)){var s=!1;if(e.each(i.disabledTimeIntervals,function(){return t.isBetween(this[0],this[1])?(s=!0,!1):void 0}),s)return!1}return!0},W=function(){for(var t=[],n=o.clone().startOf("y").startOf("d");n.isSame(o,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");f.find(".datepicker-months td").empty().append(t)},j=function(){var t=f.find(".datepicker-months"),n=t.find("th"),r=t.find("tbody").find("span");n.eq(0).find("span").attr("title",i.tooltips.prevYear),n.eq(1).attr("title",i.tooltips.selectYear),n.eq(2).find("span").attr("title",i.tooltips.nextYear),t.find(".disabled").removeClass("disabled"),Y(o.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(o.year()),Y(o.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),r.removeClass("active"),s.isSame(o,"y")&&!u&&r.eq(s.month()).addClass("active"),r.each(function(t){Y(o.clone().month(t),"M")||e(this).addClass("disabled")})},U=function(){var e=f.find(".datepicker-years"),t=e.find("th"),n=o.clone().subtract(5,"y"),r=o.clone().add(6,"y"),a="";for(t.eq(0).find("span").attr("title",i.tooltips.prevDecade),t.eq(1).attr("title",i.tooltips.selectDecade),t.eq(2).find("span").attr("title",i.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(n.year()+"-"+r.year()),i.maxDate&&i.maxDate.isBefore(r,"y")&&t.eq(2).addClass("disabled");!n.isAfter(r,"y");)a+='<span data-action="selectYear" class="year'+(n.isSame(s,"y")&&!u?" active":"")+(Y(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(a)},q=function(){var e=f.find(".datepicker-decades"),n=e.find("th"),r=t({y:o.year()-o.year()%100-1}),a=r.clone().add(100,"y"),l=r.clone(),c="";for(n.eq(0).find("span").attr("title",i.tooltips.prevCentury),n.eq(2).find("span").attr("title",i.tooltips.nextCentury),e.find(".disabled").removeClass("disabled"),(r.isSame(t({y:1900}))||i.minDate&&i.minDate.isAfter(r,"y"))&&n.eq(0).addClass("disabled"),n.eq(1).text(r.year()+"-"+a.year()),(r.isSame(t({y:2e3}))||i.maxDate&&i.maxDate.isBefore(a,"y"))&&n.eq(2).addClass("disabled");!r.isAfter(a,"y");)c+='<span data-action="selectDecade" class="decade'+(r.isSame(s,"y")?" active":"")+(Y(r,"y")?"":" disabled")+'" data-selection="'+(r.year()+6)+'">'+(r.year()+1)+" - "+(r.year()+12)+"</span>",r.add(12,"y");c+="<span></span><span></span><span></span>",e.find("td").html(c),n.eq(1).text(l.year()+1+"-"+r.year())},V=function(){var t,n,r,a,l=f.find(".datepicker-days"),c=l.find("th"),h=[];if(E()){for(c.eq(0).find("span").attr("title",i.tooltips.prevMonth),c.eq(1).attr("title",i.tooltips.selectMonth),c.eq(2).find("span").attr("title",i.tooltips.nextMonth),l.find(".disabled").removeClass("disabled"),c.eq(1).text(o.format(i.dayViewHeaderFormat)),Y(o.clone().subtract(1,"M"),"M")||c.eq(0).addClass("disabled"),Y(o.clone().add(1,"M"),"M")||c.eq(2).addClass("disabled"),t=o.clone().startOf("M").startOf("w").startOf("d"),a=0;42>a;a++)0===t.weekday()&&(n=e("<tr>"),i.calendarWeeks&&n.append('<td class="cw">'+t.week()+"</td>"),h.push(n)),r="",t.isBefore(o,"M")&&(r+=" old"),t.isAfter(o,"M")&&(r+=" new"),t.isSame(s,"d")&&!u&&(r+=" active"),Y(t,"d")||(r+=" disabled"),t.isSame(_(),"d")&&(r+=" today"),(0===t.day()||6===t.day())&&(r+=" weekend"),n.append('<td data-action="selectDay" data-day="'+t.format("L")+'" class="day'+r+'">'+t.date()+"</td>"),t.add(1,"d");l.find("tbody").empty().append(h),j(),U(),q()}},G=function(){var t=f.find(".timepicker-hours table"),n=o.clone().startOf("d"),i=[],s=e("<tr>");for(o.hour()>11&&!a&&n.hour(12);n.isSame(o,"d")&&(a||o.hour()<12&&n.hour()<12||o.hour()>11);)n.hour()%4===0&&(s=e("<tr>"),i.push(s)),s.append('<td data-action="selectHour" class="hour'+(Y(n,"h")?"":" disabled")+'">'+n.format(a?"HH":"hh")+"</td>"),n.add(1,"h");t.empty().append(i)},K=function(){for(var t=f.find(".timepicker-minutes table"),n=o.clone().startOf("h"),s=[],r=e("<tr>"),a=1===i.stepping?5:i.stepping;o.isSame(n,"h");)n.minute()%(4*a)===0&&(r=e("<tr>"),s.push(r)),r.append('<td data-action="selectMinute" class="minute'+(Y(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(a,"m");t.empty().append(s)},Q=function(){for(var t=f.find(".timepicker-seconds table"),n=o.clone().startOf("m"),i=[],s=e("<tr>");o.isSame(n,"m");)n.second()%20===0&&(s=e("<tr>"),i.push(s)),s.append('<td data-action="selectSecond" class="second'+(Y(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");t.empty().append(i)},X=function(){var e,t,n=f.find(".timepicker span[data-time-component]");a||(e=f.find(".timepicker [data-action=togglePeriod]"),t=s.clone().add(s.hours()>=12?-12:12,"h"),e.text(s.format("A")),Y(t,"h")?e.removeClass("disabled"):e.addClass("disabled")),n.filter("[data-time-component=hours]").text(s.format(a?"HH":"hh")),n.filter("[data-time-component=minutes]").text(s.format("mm")),n.filter("[data-time-component=seconds]").text(s.format("ss")),G(),K(),Q()},Z=function(){f&&(V(),X())},J=function(e){var t=u?null:s;return e?(e=e.clone().locale(i.locale),1!==i.stepping&&e.minutes(Math.round(e.minutes()/i.stepping)*i.stepping%60).seconds(0),void(Y(e)?(s=e,o=s.clone(),r.val(s.format(l)),n.data("date",s.format(l)),u=!1,Z(),R({type:"dp.change",date:s.clone(),oldDate:t})):(i.keepInvalid||r.val(u?"":s.format(l)),R({type:"dp.error",date:e})))):(u=!0,r.val(""),n.data("date",""),R({type:"dp.change",date:!1,oldDate:t}),void Z())},ee=function(){var t=!1;return f?(f.find(".collapse").each(function(){var n=e(this).data("collapse");return!n||!n.transitioning||(t=!0,!1)}),t?d:(p&&p.hasClass("btn")&&p.toggleClass("active"),f.hide(),e(window).off("resize",A),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,R({type:"dp.hide",date:s.clone()}),r.blur(),d)):d},te=function(){J(null)},ne={next:function(){var e=g[h].navFnc;o.add(g[h].navStep,e),V(),L(e)},previous:function(){var e=g[h].navFnc;o.subtract(g[h].navStep,e),V(),L(e)},pickerSwitch:function(){P(1)},selectMonth:function(t){var n=e(t.target).closest("tbody").find("span").index(e(t.target));o.month(n),h===m?(J(s.clone().year(o.year()).month(o.month())),i.inline||ee()):(P(-1),V()),L("M")},selectYear:function(t){var n=parseInt(e(t.target).text(),10)||0;o.year(n),h===m?(J(s.clone().year(o.year())),i.inline||ee()):(P(-1),V()),L("YYYY")},selectDecade:function(t){var n=parseInt(e(t.target).data("selection"),10)||0;o.year(n),h===m?(J(s.clone().year(o.year())),i.inline||ee()):(P(-1),V()),L("YYYY")},selectDay:function(t){var n=o.clone();e(t.target).is(".old")&&n.subtract(1,"M"),e(t.target).is(".new")&&n.add(1,"M"),J(n.date(parseInt(e(t.target).text(),10))),k()||i.keepOpen||i.inline||ee()},incrementHours:function(){var e=s.clone().add(1,"h");Y(e,"h")&&J(e)},incrementMinutes:function(){var e=s.clone().add(i.stepping,"m");Y(e,"m")&&J(e)},incrementSeconds:function(){var e=s.clone().add(1,"s");Y(e,"s")&&J(e)},decrementHours:function(){var e=s.clone().subtract(1,"h");Y(e,"h")&&J(e)},decrementMinutes:function(){var e=s.clone().subtract(i.stepping,"m");Y(e,"m")&&J(e)},decrementSeconds:function(){var e=s.clone().subtract(1,"s");Y(e,"s")&&J(e)},togglePeriod:function(){J(s.clone().add(s.hours()>=12?-12:12,"h"))},togglePicker:function(t){var n,s=e(t.target),o=s.closest("ul"),r=o.find(".in"),a=o.find(".collapse:not(.in)");if(r&&r.length){if(n=r.data("collapse"),n&&n.transitioning)return;r.collapse?(r.collapse("hide"),a.collapse("show")):(r.removeClass("in"),a.addClass("in")),s.is("span")?s.toggleClass(i.icons.time+" "+i.icons.date):s.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);a||(s.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),J(s.clone().hours(n)),ne.showPicker.call(d)},selectMinute:function(t){J(s.clone().minutes(parseInt(e(t.target).text(),10))),ne.showPicker.call(d)},selectSecond:function(t){J(s.clone().seconds(parseInt(e(t.target).text(),10))),ne.showPicker.call(d)},clear:te,today:function(){var e=_();Y(e,"d")&&J(e)},close:ee},ie=function(t){return!e(t.currentTarget).is(".disabled")&&(ne[e(t.currentTarget).data("action")].apply(d,arguments),!1)},se=function(){var t,n={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return r.prop("disabled")||!i.ignoreReadonly&&r.prop("readonly")||f?d:(void 0!==r.val()&&0!==r.val().trim().length?J(re(r.val().trim())):i.useCurrent&&u&&(r.is("input")&&0===r.val().trim().length||i.inline)&&(t=_(),"string"==typeof i.useCurrent&&(t=n[i.useCurrent](t)),J(t)),f=M(),H(),W(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),Z(),P(),e(window).on("resize",A),f.on("click","[data-action]",ie),f.on("mousedown",!1),p&&p.hasClass("btn")&&p.toggleClass("active"),f.show(),A(),i.focusOnShow&&!r.is(":focus")&&r.focus(),R({type:"dp.show"}),d)},oe=function(){return f?ee():se()},re=function(e){return e=void 0===i.parseInputDate?t.isMoment(e)||e instanceof Date?t(e):_(e):i.parseInputDate(e),e.locale(i.locale),e},ae=function(e){var t,n,s,o,r=null,a=[],l={},c=e.which,h="p";x[c]=h;for(t in x)x.hasOwnProperty(t)&&x[t]===h&&(a.push(t),parseInt(t,10)!==c&&(l[t]=!0));for(t in i.keyBinds)if(i.keyBinds.hasOwnProperty(t)&&"function"==typeof i.keyBinds[t]&&(s=t.split(" "),s.length===a.length&&C[c]===s[s.length-1])){for(o=!0,n=s.length-2;n>=0;n--)if(!(C[s[n]]in l)){o=!1;break}if(o){r=i.keyBinds[t];break}}r&&(r.call(d,f),e.stopPropagation(),e.preventDefault())},le=function(e){x[e.which]="r",e.stopPropagation(),e.preventDefault()},ce=function(t){var n=e(t.target).val().trim(),i=n?re(n):null;return J(i),t.stopImmediatePropagation(),!1},he=function(){r.on({change:ce,blur:i.debug?"":ee,keydown:ae,keyup:le,focus:i.allowInputToggle?se:""}),n.is("input")?r.on({focus:se}):p&&(p.on("click",oe),p.on("mousedown",!1))},de=function(){r.off({change:ce,blur:blur,keydown:ae,keyup:le,focus:i.allowInputToggle?ee:""}),n.is("input")?r.off({focus:se}):p&&(p.off("click",oe),p.off("mousedown",!1))},ue=function(t){var n={};return e.each(t,function(){var e=re(this);e.isValid()&&(n[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(n).length&&n},pe=function(t){var n={};return e.each(t,function(){n[this]=!0}),!!Object.keys(n).length&&n},fe=function(){var e=i.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){var t=s.localeData().longDateFormat(e)||e;return t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return s.localeData().longDateFormat(e)||e})}),c=i.extraFormats?i.extraFormats.slice():[],c.indexOf(e)<0&&c.indexOf(l)<0&&c.push(l),a=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,S("y")&&(m=2),S("M")&&(m=1),S("d")&&(m=0),h=Math.max(m,h),u||J(s)};if(d.destroy=function(){ee(),de(),n.removeData("DateTimePicker"),n.removeData("date")},d.toggle=oe,d.show=se,d.hide=ee,d.disable=function(){return ee(),p&&p.hasClass("btn")&&p.addClass("disabled"),r.prop("disabled",!0),d},d.enable=function(){return p&&p.hasClass("btn")&&p.removeClass("disabled"),r.prop("disabled",!1),d},d.ignoreReadonly=function(e){if(0===arguments.length)return i.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return i.ignoreReadonly=e,d},d.options=function(t){if(0===arguments.length)return e.extend(!0,{},i);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,i,t),e.each(i,function(e,t){if(void 0===d[e])throw new TypeError("option "+e+" is not recognized!");d[e](t)}),d},d.date=function(e){if(0===arguments.length)return u?null:s.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return J(null===e?null:re(e)),d},d.format=function(e){if(0===arguments.length)return i.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return i.format=e,l&&fe(),d},d.timeZone=function(e){return 0===arguments.length?i.timeZone:(i.timeZone=e,d)},d.dayViewHeaderFormat=function(e){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=e,d},d.extraFormats=function(e){if(0===arguments.length)return i.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=e,c&&fe(),d},d.disabledDates=function(t){if(0===arguments.length)return i.disabledDates?e.extend({},i.disabledDates):i.disabledDates;if(!t)return i.disabledDates=!1,Z(),d;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=ue(t),i.enabledDates=!1,Z(),d},d.enabledDates=function(t){if(0===arguments.length)return i.enabledDates?e.extend({},i.enabledDates):i.enabledDates;if(!t)return i.enabledDates=!1,Z(),d;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=ue(t),i.disabledDates=!1,Z(),d},d.daysOfWeekDisabled=function(e){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return i.daysOfWeekDisabled=!1,Z(),d;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(i.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||0>t||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),i.useCurrent&&!i.keepInvalid){for(var t=0;!Y(s,"d");){if(s.add(1,"d"),7===t)throw"Tried 7 times to find a valid date";t++}J(s)}return Z(),d},d.maxDate=function(e){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof e&&e===!1)return i.maxDate=!1,Z(),d;"string"==typeof e&&("now"===e||"moment"===e)&&(e=_());var t=re(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(i.minDate&&t.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return i.maxDate=t,i.useCurrent&&!i.keepInvalid&&s.isAfter(e)&&J(i.maxDate),o.isAfter(t)&&(o=t.clone().subtract(i.stepping,"m")),Z(),d},d.minDate=function(e){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof e&&e===!1)return i.minDate=!1,Z(),d;"string"==typeof e&&("now"===e||"moment"===e)&&(e=_());var t=re(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(i.maxDate&&t.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return i.minDate=t,i.useCurrent&&!i.keepInvalid&&s.isBefore(e)&&J(i.minDate),o.isBefore(t)&&(o=t.clone().add(i.stepping,"m")),Z(),d},d.defaultDate=function(e){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!e)return i.defaultDate=!1,d;"string"==typeof e&&("now"===e||"moment"===e)&&(e=_());var t=re(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!Y(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=t,(i.defaultDate&&i.inline||""===r.val().trim())&&J(i.defaultDate),d},d.locale=function(e){if(0===arguments.length)return i.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return i.locale=e,s.locale(i.locale),o.locale(i.locale),l&&fe(),f&&(ee(),se()),d},d.stepping=function(e){return 0===arguments.length?i.stepping:(e=parseInt(e,10),(isNaN(e)||1>e)&&(e=1),i.stepping=e,d)},d.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return i.useCurrent=e,d},d.collapse=function(e){if(0===arguments.length)return i.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===e?d:(i.collapse=e,f&&(ee(),se()),d)},d.icons=function(t){if(0===arguments.length)return e.extend({},i.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(i.icons,t),f&&(ee(),se()),d},d.tooltips=function(t){if(0===arguments.length)return e.extend({},i.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(i.tooltips,t),f&&(ee(),se()),d},d.useStrict=function(e){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=e,d},d.sideBySide=function(e){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=e,f&&(ee(),se()),d},d.viewMode=function(e){if(0===arguments.length)return i.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return i.viewMode=e,h=Math.max(v.indexOf(e),m),P(),d},d.toolbarPlacement=function(e){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===w.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value");return i.toolbarPlacement=e,f&&(ee(),se()),d},d.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===b.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");i.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===y.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");i.widgetPositioning.vertical=t.vertical}return Z(),d},d.calendarWeeks=function(e){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=e,Z(),d},d.showTodayButton=function(e){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=e,f&&(ee(),se()),d},d.showClear=function(e){if(0===arguments.length)return i.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=e,f&&(ee(),se()),d},d.widgetParent=function(t){if(0===arguments.length)return i.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=t,f&&(ee(),se()),d},d.keepOpen=function(e){if(0===arguments.length)return i.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=e,d},d.focusOnShow=function(e){if(0===arguments.length)return i.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return i.focusOnShow=e,d},d.inline=function(e){if(0===arguments.length)return i.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return i.inline=e,d},d.clear=function(){return te(),d},d.keyBinds=function(e){return i.keyBinds=e,d},d.getMoment=function(e){return _(e)},d.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return i.debug=e,d},d.allowInputToggle=function(e){if(0===arguments.length)return i.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return i.allowInputToggle=e,d},d.showClose=function(e){if(0===arguments.length)return i.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return i.showClose=e,d},d.keepInvalid=function(e){if(0===arguments.length)return i.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return i.keepInvalid=e,d},d.datepickerInput=function(e){if(0===arguments.length)return i.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return i.datepickerInput=e,d},d.parseInputDate=function(e){if(0===arguments.length)return i.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return i.parseInputDate=e,d},d.disabledTimeIntervals=function(t){if(0===arguments.length)return i.disabledTimeIntervals?e.extend({},i.disabledTimeIntervals):i.disabledTimeIntervals;if(!t)return i.disabledTimeIntervals=!1,Z(),d;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return i.disabledTimeIntervals=t,Z(),d},d.disabledHours=function(t){if(0===arguments.length)return i.disabledHours?e.extend({},i.disabledHours):i.disabledHours;if(!t)return i.disabledHours=!1,Z(),d;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(i.disabledHours=pe(t),i.enabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!Y(s,"h");){if(s.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}J(s)}return Z(),d},d.enabledHours=function(t){if(0===arguments.length)return i.enabledHours?e.extend({},i.enabledHours):i.enabledHours;if(!t)return i.enabledHours=!1,Z(),d;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(i.enabledHours=pe(t),i.disabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!Y(s,"h");){if(s.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}J(s)}return Z(),d},d.viewDate=function(e){if(0===arguments.length)return o.clone();if(!e)return o=s.clone(),d;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=re(e),L(),d},n.is("input"))r=n;else if(r=n.find(i.datepickerInput),0===r.size())r=n.find("input");else if(!r.is("input"))throw new Error('CSS class "'+i.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(p=0===n.find(".datepickerbutton").size()?n.find(".input-group-addon"):n.find(".datepickerbutton")),!i.inline&&!r.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return s=_(),o=s.clone(),e.extend(!0,i,I()),d.options(i),fe(),he(),r.prop("disabled")&&d.disable(),r.is("input")&&0!==r.val().trim().length?J(re(r.val().trim())):i.defaultDate&&void 0===r.attr("placeholder")&&J(i.defaultDate),i.inline&&se(),d};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this);i.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),i.data("DateTimePicker",n(i,t)))})},e.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,
stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(!e)return void this.show();var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),!function(e){"use strict";"object"==typeof exports?module.exports=e(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],e):window.jQuery&&!window.jQuery.fn.colorpicker&&e(window.jQuery)}(function(e){"use strict";var t=function(t,n){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,n&&e.extend(this.colors,n),t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))};t.prototype={constructor:t,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:void 0!==e.toLowerCase?parseFloat(e):1},isTransparent:function(e){return!!e&&(e=e.toLowerCase().trim(),"transparent"===e||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){e=e.toLowerCase().trim(),e&&(this.isTransparent(e)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(e)||{h:0,s:0,b:0,a:1})},stringToHSB:function(t){t=t.toLowerCase();var n;"undefined"!=typeof this.colors[t]&&(t=this.colors[t],n="alias");var i=this,s=!1;return e.each(this.stringParsers,function(e,o){var r=o.re.exec(t),a=r&&o.parse.apply(i,[r]),l=n||o.format||"rgba";return!a||(s=l.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,a)):i.RGBtoHSB.apply(i,a),i.origFormat=l,!1)}),s},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var s,o,r,a,l;return e=e%360/60,l=n*t,a=l*(1-Math.abs(e%2-1)),s=o=r=n-l,e=~~e,s+=[l,a,0,0,a,l][e],o+=[a,l,l,a,0,0][e],r+=[0,0,a,l,l,a][e],{r:Math.round(255*s),g:Math.round(255*o),b:Math.round(255*r),a:i||this.value.a}},toHex:function(e,t,n,i){var s=this.toRGB(e,t,n,i);return this.rgbaIsTransparent(s)?"transparent":"#"+(1<<24|parseInt(s.r)<<16|parseInt(s.g)<<8|parseInt(s.b)).toString(16).substr(1)},toHSL:function(e,t,n,i){e=e||this.value.h,t=t||this.value.s,n=n||this.value.b,i=i||this.value.a;var s=e,o=(2-t)*n,r=t*n;return r/=o>0&&1>=o?o:2-o,o/=2,r>1&&(r=1),{h:isNaN(s)?0:s,s:isNaN(r)?0:r,l:isNaN(o)?0:o,a:isNaN(i)?0:i}},toAlias:function(e,t,n,i){var s=this.toHex(e,t,n,i);for(var o in this.colors)if(this.colors[o]===s)return o;return!1},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var s,o,r,a;return r=Math.max(e,t,n),a=r-Math.min(e,t,n),s=0===a?null:r===e?(t-n)/a:r===t?(n-e)/a+2:(e-t)/a+4,s=(s+360)%6*60/360,o=0===a?0:a/r,{h:this._sanitizeNumber(s),s:o,b:r,a:this._sanitizeNumber(i)}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,i){0>t&&(t=0);var s;s=.5>=n?n*(1+t):n+t-n*t;var o=2*n-s,r=e+1/3,a=e,l=e-1/3,c=Math.round(255*this.HueToRGB(o,s,r)),h=Math.round(255*this.HueToRGB(o,s,a)),d=Math.round(255*this.HueToRGB(o,s,l));return[c,h,d,this._sanitizeNumber(i)]},toString:function(e){e=e||"rgba";var t=!1;switch(e){case"rgb":return t=this.toRGB(),this.rgbaIsTransparent(t)?"transparent":"rgb("+t.r+","+t.g+","+t.b+")";case"rgba":return t=this.toRGB(),"rgba("+t.r+","+t.g+","+t.b+","+t.a+")";case"hsl":return t=this.toHSL(),"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)";case"hsla":return t=this.toHSL(),"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return t}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return"undefined"!=typeof this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},i=function(i,s){if(this.element=e(i).addClass("colorpicker-element"),this.options=e.extend(!0,{},n,this.element.data(),s),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new t(this.options.color!==!1?this.options.color:this.getValue(),this.options.colorSelectors),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=e(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||this.options.format===!1)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.colorSelectors){var o=this;e.each(this.options.colorSelectors,function(t,n){var i=e("<i />").css("background-color",n).data("class",t);i.click(function(){o.setValue(e(this).css("background-color"))}),o.picker.find(".colorpicker-selectors").append(i)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:e("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy(function(){this.element.trigger("create")},this))};i.Color=t,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var e=this.container&&this.container[0]!==document.body?"position":"offset",t=this.component||this.element,n=t[e]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:n.top+t.outerHeight(),left:n.left})},show:function(t){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),this.options.inline===!1&&e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format),this.element.data("color",e),e},updateInput:function(e){if(e=e||this.color.toString(this.format),this.input!==!1){if(this.options.colorSelectors){var n=new t(e,this.options.colorSelectors),i=n.toAlias();"undefined"!=typeof this.options.colorSelectors[i]&&(e=i)}this.input.prop("value",e)}return e},updatePicker:function(e){void 0!==e&&(this.color=new t(e,this.options.colorSelectors));var n=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");return 0!==i.length?(this.options.horizontal===!1?(n=this.options.sliders,i.eq(1).css("top",n.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",n.alpha.maxTop*(1-this.color.value.a))):(n=this.options.slidersHorz,i.eq(1).css("left",n.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",n.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:n.saturation.maxTop-this.color.value.b*n.saturation.maxTop,left:this.color.value.s*n.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),e):void 0},updateComponent:function(e){if(e=e||this.color.toString(this.format),this.component!==!1){var t=this.component.find("i").eq(0);t.length>0?t.css({backgroundColor:e}):this.component.css({backgroundColor:e})}return e},update:function(e){var t;return(this.getValue(!1)!==!1||e===!0)&&(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=new t(e,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},getValue:function(e){e=void 0===e?"#000000":e;var t;return t=this.hasInput()?this.input.val():this.element.data("color"),(void 0===t||""===t||null===t)&&(t=e),t},hasInput:function(){return this.input!==!1},isDisabled:function(){return!!this.hasInput()&&this.input.prop("disabled")===!0},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var n=e(t.target),i=n.closest("div"),s=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.currentSlider=e.extend({},s.saturation);else if(i.is(".colorpicker-hue"))this.currentSlider=e.extend({},s.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},s.alpha)}var o=i.offset();this.currentSlider.guide=i.find("i")[0].style,this.currentSlider.left=t.pageX-o.left,this.currentSlider.top=t.pageY-o.top,this.mousePointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new t(this.input.val(),this.options.colorSelectors),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=i,e.fn.colorpicker=function(t){var n,s=arguments,o=this.each(function(){var o=e(this),r=o.data("colorpicker"),a="object"==typeof t?t:{};r||"string"==typeof t?"string"==typeof t&&(n=r[t].apply(r,Array.prototype.slice.call(s,1))):o.data("colorpicker",new i(this,a))});return"getValue"===t?n:o},e.fn.colorpicker.constructor=i}),+function(e){"use strict";var t=void 0!==window.orientation,n=navigator.userAgent.toLowerCase().indexOf("android")>-1,i="Microsoft Internet Explorer"==window.navigator.appName,s=function(t,i){n||(this.$element=e(t),this.options=e.extend({},s.DEFAULTS,i),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};s.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]",w:"[A-Za-z0-9]","*":"."}},s.prototype.init=function(){var t=this.options.definitions,n=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,e.each(this.mask.split(""),e.proxy(function(e,i){"?"==i?(n--,this.partialPosition=e):t[i]?(this.tests.push(new RegExp(t[i])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=e.map(this.mask.split(""),e.proxy(function(e,n){if("?"!=e)return t[e]?this.options.placeholder:e},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",e.proxy(function(){return e.map(this.buffer,function(e,t){return this.tests[t]&&e!=this.options.placeholder?e:null}).join("")},this))},s.prototype.listen=function(){if(!this.$element.attr("readonly")){var t=(i?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",e.proxy(this.unmask,this)).on("focus.bs.inputmask",e.proxy(this.focusEvent,this)).on("blur.bs.inputmask",e.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",e.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",e.proxy(this.keypressEvent,this)).on(t,e.proxy(this.pasteEvent,this))}},s.prototype.caret=function(e,t){if(0!==this.$element.length){if("number"==typeof e)return t="number"==typeof t?t:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,t=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length}return{begin:e,end:t}}},s.prototype.seekNext=function(e){for(var t=this.mask.length;++e<=t&&!this.tests[e];);return e},s.prototype.seekPrev=function(e){for(;--e>=0&&!this.tests[e];);return e},s.prototype.shiftL=function(e,t){var n=this.mask.length;if(!(e<0)){for(var i=e,s=this.seekNext(t);i<n;i++)if(this.tests[i]){if(!(s<n&&this.tests[i].test(this.buffer[s])))break;this.buffer[i]=this.buffer[s],this.buffer[s]=this.options.placeholder,s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}},s.prototype.shiftR=function(e){for(var t=this.mask.length,n=e,i=this.options.placeholder;n<t;n++)if(this.tests[n]){var s=this.seekNext(n),o=this.buffer[n];if(this.buffer[n]=i,!(s<t&&this.tests[s].test(o)))break;i=o}},s.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},s.prototype.focusEvent=function(){this.focusText=this.$element.val();var e=this.mask.length,t=this.checkVal();this.writeBuffer();var n=this,i=function(){t==e?n.caret(0,t):n.caret(t)};i(),setTimeout(i,50)},s.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},s.prototype.keydownEvent=function(e){var n=e.which;if(8==n||46==n||t&&127==n){var i=this.caret(),s=i.begin,o=i.end;return o-s===0&&(s=46!=n?this.seekPrev(s):o=this.seekNext(s-1),o=46==n?this.seekNext(o):o),this.clearBuffer(s,o),this.shiftL(s,o-1),!1}if(27==n)return this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1},s.prototype.keypressEvent=function(e){var t=this.mask.length,n=e.which,i=this.caret();if(e.ctrlKey||e.altKey||e.metaKey||n<32)return!0;if(n){i.end-i.begin!==0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1));var s=this.seekNext(i.begin-1);if(s<t){var o=String.fromCharCode(n);if(this.tests[s].test(o)){this.shiftR(s),this.buffer[s]=o,this.writeBuffer();var r=this.seekNext(s);this.caret(r)}}return!1}},s.prototype.pasteEvent=function(){var e=this;setTimeout(function(){e.caret(e.checkVal(!0))},0)},s.prototype.clearBuffer=function(e,t){for(var n=this.mask.length,i=e;i<t&&i<n;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},s.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},s.prototype.checkVal=function(e){for(var t=this.mask.length,n=this.$element.val(),i=-1,s=0,o=0;s<t;s++)if(this.tests[s]){for(this.buffer[s]=this.options.placeholder;o++<n.length;){var r=n.charAt(o-1);if(this.tests[s].test(r)){this.buffer[s]=r,i=s;break}}if(o>n.length)break}else this.buffer[s]==n.charAt(o)&&s!=this.partialPosition&&(o++,i=s);return!e&&i+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,t)):(e||i+1>=this.partialPosition)&&(this.writeBuffer(),e||this.$element.val(this.$element.val().substring(0,i+1))),this.partialPosition?s:this.firstNonMaskPos};var o=e.fn.inputmask;e.fn.inputmask=function(t){return this.each(function(){var n=e(this),i=n.data("bs.inputmask");i||n.data("bs.inputmask",i=new s(this,t))})},e.fn.inputmask.Constructor=s,e.fn.inputmask.noConflict=function(){return e.fn.inputmask=o,this},e(document).on("focus.bs.inputmask.data-api","[data-mask]",function(t){var n=e(this);n.data("bs.inputmask")||n.inputmask(n.data())})}(window.jQuery),+function(e){"use strict";var t="Microsoft Internet Explorer"==window.navigator.appName,n=function(t,n){if(this.$element=e(t),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=e('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==i&&"none"!==i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",e.proxy(this.change,this)),e(this.$input[0].form).on("reset.bs.fileinput",e.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",e.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",e.proxy(this.clear,this))},n.prototype.change=function(t){var n=void 0===t.target.files?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;if(t.stopPropagation(),0===n.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var i=n[0];if(this.$preview.length>0&&("undefined"!=typeof i.type?i.type.match(/^image\/(gif|png|jpeg)$/):i.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var s=new FileReader,o=this.$preview,r=this.$element;s.onload=function(t){var s=e("<img>");s[0].src=t.target.result,n[0].result=t.target.result,r.find(".fileinput-filename").text(i.name),"none"!=o.css("max-height")&&s.css("max-height",parseInt(o.css("max-height"),10)-parseInt(o.css("padding-top"),10)-parseInt(o.css("padding-bottom"),10)-parseInt(o.css("border-top"),10)-parseInt(o.css("border-bottom"),10)),o.html(s),r.addClass("fileinput-exists").removeClass("fileinput-new"),r.trigger("change.bs.fileinput",n)},s.readAsDataURL(i)}else this.$element.find(".fileinput-filename").text(i.name),this.$preview.text(i.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},n.prototype.clear=function(e){if(e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),t){var n=this.$input.clone(!0);this.$input.after(n),this.$input.remove(),this.$input=n}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==e&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},n.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()};var i=e.fn.fileinput;e.fn.fileinput=function(t){return this.each(function(){var i=e(this),s=i.data("bs.fileinput");s||i.data("bs.fileinput",s=new n(this,t)),"string"==typeof t&&s[t]()})},e.fn.fileinput.Constructor=n,e.fn.fileinput.noConflict=function(){return e.fn.fileinput=i,this},e(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var n=e(this);if(!n.data("bs.fileinput")){n.fileinput(n.data());var i=e(t.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');i.length>0&&(t.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery),function(e,t,n){t[e]=n}("onDomReady",this,function(e){"use strict";function t(e){if(!C){if(!r.body)return s(t);for(C=!0;e=x.shift();)s(e)}}function n(e){(b||e.type===l||r[u]===d)&&(i(),t())}function i(){b?(r[y](g,n,c),e[y](l,n,c)):(r[f](v,n),e[f](h,n))}function s(e,t){setTimeout(e,+t>=0?t:1)}function o(e){C?s(e):x.push(e)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),document.readyState="complete"},!1),document.readyState="loading");var r=e.document,a=r.documentElement,l="load",c=!1,h="on"+l,d="complete",u="readyState",p="attachEvent",f="detachEvent",m="addEventListener",g="DOMContentLoaded",v="onreadystatechange",y="removeEventListener",b=m in r,w=c,C=c,x=[];if(r[u]===d)s(t);else if(b)r[m](g,n,c),e[m](l,n,c);else{r[p](v,n),e[p](h,n);try{w=null==e.frameElement&&a}catch(e){}w&&w.doScroll&&!function e(){if(!C){try{w.doScroll("left")}catch(t){return s(e,50)}i(),t()}}()}return o.version="1.4.0",o.isReady=function(){return C},o}(this)),document.querySelectorAll||(document.querySelectorAll=function(e){var t,n=document.createElement("style"),i=[];for(document.documentElement.firstChild.appendChild(n),document._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),
n.parentNode.removeChild(n);document._qsa.length;)t=document._qsa.shift(),t.style.removeAttribute("x-qsa"),i.push(t);return document._qsa=null,i}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),document.getElementsByClassName||(document.getElementsByClassName=function(e){return e=String(e).replace(/^|\s+/g,"."),document.querySelectorAll(e)}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob=e.atob||function(e){e=String(e);var n,i=0,s=[],o=0,r=0;if(e=e.replace(/\s/g,""),e.length%4===0&&(e=e.replace(/=+$/,"")),e.length%4===1)throw Error("InvalidCharacterError");if(/[^+\/0-9A-Za-z]/.test(e))throw Error("InvalidCharacterError");for(;i<e.length;)n=t.indexOf(e.charAt(i)),o=o<<6|n,r+=6,24===r&&(s.push(String.fromCharCode(o>>16&255)),s.push(String.fromCharCode(o>>8&255)),s.push(String.fromCharCode(255&o)),r=0,o=0),i+=1;return 12===r?(o>>=4,s.push(String.fromCharCode(255&o))):18===r&&(o>>=2,s.push(String.fromCharCode(o>>8&255)),s.push(String.fromCharCode(255&o))),s.join("")},e.btoa=e.btoa||function(e){e=String(e);var n,i,s,o,r,a,l,c=0,h=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)n=e.charCodeAt(c++),i=e.charCodeAt(c++),s=e.charCodeAt(c++),o=n>>2,r=(3&n)<<4|i>>4,a=(15&i)<<2|s>>6,l=63&s,c===e.length+2?(a=64,l=64):c===e.length+1&&(l=64),h.push(t.charAt(o),t.charAt(r),t.charAt(a),t.charAt(l));return h.join("")}}(this),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){var t=this.__proto__||this.constructor.prototype;return e in this&&(!(e in t)||t[e]!==this[e])}),window.requestAnimationFrame||(window.webkitRequestAnimationFrame?!function(e){e.requestAnimationFrame=function(e){return webkitRequestAnimationFrame(function(){e(performance.now())})},e.cancelAnimationFrame=webkitCancelAnimationFrame}(this):window.mozRequestAnimationFrame&&!function(e){e.requestAnimationFrame=function(e){return mozRequestAnimationFrame(function(){e(performance.now())})},e.cancelAnimationFrame=mozCancelAnimationFrame}(this)),function(e,t){e.augment=t()}(this,function(){var e=function(){},t=Array.prototype.slice,n=function(n,i){var s=e.prototype="function"==typeof n?n.prototype:n,o=new e,r=i.apply(o,t.call(arguments,2).concat(s));if("object"==typeof r)for(var a in r)o[a]=r[a];if(!o.hasOwnProperty("constructor"))return o;var l=o.constructor;return l.prototype=o,l};return n.defclass=function(e){var t=e.constructor;return t.prototype=e,t},n.extend=function(e,t){return n(e,function(e){return this.uber=e,t})},n}),function(e,t,n){function i(e,t,n,i){var r=s(n.substr(n.lastIndexOf(e.domain)),e);r&&o({mode:null,el:i,flags:r,engineSettings:t})}function s(e,t){for(var n={theme:b(A.settings.themes.gray,null),stylesheets:t.stylesheets,holderURL:[]},i=!1,s=String.fromCharCode(11),o=e.replace(/([^\\])\//g,"$1"+s).split(s),r=/%[0-9a-f]{2}/gi,a=o.length,l=0;l<a;l++){var c=o[l];if(c.match(r))try{c=decodeURIComponent(c)}catch(e){c=o[l]}var h=!1;if(A.flags.dimensions.match(c))i=!0,n.dimensions=A.flags.dimensions.output(c),h=!0;else if(A.flags.fluid.match(c))i=!0,n.dimensions=A.flags.fluid.output(c),n.fluid=!0,h=!0;else if(A.flags.textmode.match(c))n.textmode=A.flags.textmode.output(c),h=!0;else if(A.flags.colors.match(c)){var d=A.flags.colors.output(c);n.theme=b(n.theme,d),h=!0}else if(t.themes[c])t.themes.hasOwnProperty(c)&&(n.theme=b(t.themes[c],null)),h=!0;else if(A.flags.font.match(c))n.font=A.flags.font.output(c),h=!0;else if(A.flags.auto.match(c))n.auto=!0,h=!0;else if(A.flags.text.match(c))n.text=A.flags.text.output(c),h=!0;else if(A.flags.size.match(c))n.size=A.flags.size.output(c),h=!0;else if(A.flags.random.match(c)){null==A.vars.cache.themeKeys&&(A.vars.cache.themeKeys=Object.keys(t.themes));var u=A.vars.cache.themeKeys[0|Math.random()*A.vars.cache.themeKeys.length];n.theme=b(t.themes[u],null),h=!0}h&&n.holderURL.push(c)}return n.holderURL.unshift(t.domain),n.holderURL=n.holderURL.join("/"),!!i&&n}function o(e){var t=e.mode,n=e.el,i=e.flags,s=e.engineSettings,o=i.dimensions,a=i.theme,l=o.width+"x"+o.height;if(t=null==t?i.fluid?"fluid":"image":t,null!=i.text&&(a.text=i.text,"object"===n.nodeName.toLowerCase())){for(var d=a.text.split("\\n"),u=0;u<d.length;u++)d[u]=k(d[u]);a.text=d.join("\\n")}var p=i.holderURL,f=b(s,null);i.font&&(a.font=i.font,!f.noFontFallback&&"img"===n.nodeName.toLowerCase()&&A.setup.supportsCanvas&&"svg"===f.renderer&&(f=b(f,{renderer:"canvas"}))),i.font&&"canvas"==f.renderer&&(f.reRender=!0),"background"==t?null==n.getAttribute("data-background-src")&&g(n,{"data-background-src":p}):g(n,{"data-src":p}),i.theme=a,n.holderData={flags:i,engineSettings:f},"image"!=t&&"fluid"!=t||g(n,{alt:a.text?a.text+" ["+l+"]":l});var m={mode:t,el:n,holderSettings:{dimensions:o,theme:a,flags:i},engineSettings:f};"image"==t?("html"!=f.renderer&&i.auto||(n.style.width=o.width+"px",n.style.height=o.height+"px"),"html"==f.renderer?n.style.backgroundColor=a.background:(r(m),"exact"==i.textmode&&(n.holderData.resizeUpdate=!0,A.vars.resizableImages.push(n),c(n)))):"background"==t&&"html"!=f.renderer?r(m):"fluid"==t&&(n.holderData.resizeUpdate=!0,"%"==o.height.slice(-1)?n.style.height=o.height:null!=i.auto&&i.auto||(n.style.height=o.height+"px"),"%"==o.width.slice(-1)?n.style.width=o.width:null!=i.auto&&i.auto||(n.style.width=o.width+"px"),"inline"!=n.style.display&&""!==n.style.display&&"none"!=n.style.display||(n.style.display="block"),h(n),"html"==f.renderer?n.style.backgroundColor=a.background:(A.vars.resizableImages.push(n),c(n)))}function r(e){function n(){var t=null;switch(l.renderer){case"canvas":t=L(h,e);break;case"svg":t=P(h,e);break;default:throw"Holder: invalid renderer: "+l.renderer}return t}var i=null,s=e.mode,o=e.holderSettings,r=e.el,l=e.engineSettings;switch(l.renderer){case"svg":if(!A.setup.supportsSVG)return;break;case"canvas":if(!A.setup.supportsCanvas)return;break;default:return}var c={width:o.dimensions.width,height:o.dimensions.height,theme:o.theme,flags:o.flags},h=a(c);if(i=n(),null==i)throw"Holder: couldn't render placeholder";"background"==s?(r.style.backgroundImage="url("+i+")",r.style.backgroundSize=c.width+"px "+c.height+"px"):("img"===r.nodeName.toLowerCase()?g(r,{src:i}):"object"===r.nodeName.toLowerCase()&&(g(r,{data:i}),g(r,{type:"image/svg+xml"})),l.reRender&&t.setTimeout(function(){var e=n();if(null==e)throw"Holder: couldn't render placeholder";"img"===r.nodeName.toLowerCase()?g(r,{src:e}):"object"===r.nodeName.toLowerCase()&&(g(r,{data:e}),g(r,{type:"image/svg+xml"}))},100)),g(r,{"data-holder-rendered":!0})}function a(e){function t(e,t,n,i){t.width=n,t.height=i,e.width=Math.max(e.width,t.width),e.height+=t.height,e.add(t)}var n=A.defaults.size;switch(parseFloat(e.theme.size)?n=e.theme.size:parseFloat(e.flags.size)&&(n=e.flags.size),e.font={family:e.theme.font?e.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:l(e.width,e.height,n),units:e.theme.units?e.theme.units:A.defaults.units,weight:e.theme.fontweight?e.theme.fontweight:"bold"},e.text=e.theme.text?e.theme.text:Math.floor(e.width)+"x"+Math.floor(e.height),e.flags.textmode){case"literal":e.text=e.flags.dimensions.width+"x"+e.flags.dimensions.height;break;case"exact":if(!e.flags.exactDimensions)break;e.text=Math.floor(e.flags.exactDimensions.width)+"x"+Math.floor(e.flags.exactDimensions.height)}var i=new H({width:e.width,height:e.height}),s=i.Shape,o=new s.Rect("holderBg",{fill:e.theme.background});o.resize(e.width,e.height),i.root.add(o);var r=new s.Group("holderTextGroup",{text:e.text,align:"center",font:e.font,fill:e.theme.foreground});r.moveTo(null,null,1),i.root.add(r);var a=r.textPositionData=R(i);if(!a)throw"Holder: staging fallback not supported yet.";r.properties.leading=a.boundingBox.height;var c=null,h=null;if(a.lineCount>1){var d=0,u=0,p=e.width*A.setup.lineWrapRatio,f=0;h=new s.Group("line"+f);for(var m=0;m<a.words.length;m++){var g=a.words[m];c=new s.Text(g.text);var v="\\n"==g.text;(d+g.width>=p||v===!0)&&(t(r,h,d,r.properties.leading),d=0,u+=r.properties.leading,f+=1,h=new s.Group("line"+f),h.y=u),v!==!0&&(c.moveTo(d,0),d+=a.spaceWidth+g.width,h.add(c))}t(r,h,d,r.properties.leading);for(var y in r.children)h=r.children[y],h.moveTo((r.width-h.width)/2,null,null);r.moveTo((e.width-r.width)/2,(e.height-r.height)/2,null),(e.height-r.height)/2<0&&r.moveTo(null,0,null)}else c=new s.Text(e.text),h=new s.Group("line0"),h.add(c),r.add(h),r.moveTo((e.width-a.boundingBox.width)/2,(e.height-a.boundingBox.height)/2,null);return i}function l(e,t,n){var i=parseInt(e,10),s=parseInt(t,10),o=Math.max(i,s),r=Math.min(i,s),a=.8*Math.min(r,o*A.defaults.scale);return Math.round(Math.max(n,a))}function c(e){var t;t=null==e||null==e.nodeType?A.vars.resizableImages:[e];for(var n=0,i=t.length;n<i;n++){var s=t[n];if(s.holderData){var o=s.holderData.flags,a=d(s);if(a){if(!s.holderData.resizeUpdate)continue;if(o.fluid&&o.auto){var l=s.holderData.fluidConfig;switch(l.mode){case"width":a.height=a.width/l.ratio;break;case"height":a.width=a.height*l.ratio}}var c={mode:"image",holderSettings:{dimensions:a,theme:o.theme,flags:o},el:s,engineSettings:s.holderData.engineSettings};"exact"==o.textmode&&(o.exactDimensions=a,c.holderSettings.dimensions=o.dimensions),r(c)}else f(s)}}}function h(e){if(e.holderData){var t=d(e);if(t){var n=e.holderData.flags,i={fluidHeight:"%"==n.dimensions.height.slice(-1),fluidWidth:"%"==n.dimensions.width.slice(-1),mode:null,initialDimensions:t};i.fluidWidth&&!i.fluidHeight?(i.mode="width",i.ratio=i.initialDimensions.width/parseFloat(n.dimensions.height)):!i.fluidWidth&&i.fluidHeight&&(i.mode="height",i.ratio=parseFloat(n.dimensions.width)/i.initialDimensions.height),e.holderData.fluidConfig=i}else f(e)}}function d(e){var t={height:e.clientHeight,width:e.clientWidth};return!(!t.height||!t.width)&&t}function u(){for(var e,n=[],i=Object.keys(A.vars.invisibleImages),s=0,o=i.length;s<o;s++)e=A.vars.invisibleImages[i[s]],d(e)&&"img"==e.nodeName.toLowerCase()&&(n.push(e),delete A.vars.invisibleImages[i[s]]);n.length&&I.run({images:n}),t.requestAnimationFrame(u)}function p(){A.vars.visibilityCheckStarted||(t.requestAnimationFrame(u),A.vars.visibilityCheckStarted=!0)}function f(e){e.holderData.invisibleId||(A.vars.invisibleId+=1,A.vars.invisibleImages["i"+A.vars.invisibleId]=e,e.holderData.invisibleId=A.vars.invisibleId)}function m(e,t){return null==t?D.createElement(e):D.createElementNS(t,e)}function g(e,t){for(var n in t)e.setAttribute(n,t[n])}function v(e,t,n){if(null==e){e=m("svg",T);var i=m("defs",T);e.appendChild(i)}e.webkitMatchesSelector&&e.setAttribute("xmlns",T);for(var s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===N&&e.removeChild(e.childNodes[s]);return g(e,{width:t,height:n,viewBox:"0 0 "+t+" "+n,preserveAspectRatio:"none"}),e}function y(e,n){if(t.XMLSerializer){var i=new XMLSerializer,s="",o=n.stylesheets;e.querySelector("defs");if(n.svgXMLStylesheet){for(var r=(new DOMParser).parseFromString("<xml />","application/xml"),a=o.length-1;a>=0;a--){var l=r.createProcessingInstruction("xml-stylesheet",'href="'+o[a]+'" rel="stylesheet"');r.insertBefore(l,r.firstChild)}var c=r.createProcessingInstruction("xml",'version="1.0" encoding="UTF-8" standalone="yes"');r.insertBefore(c,r.firstChild),r.removeChild(r.documentElement),s=i.serializeToString(r)}var h=i.serializeToString(e);return h=h.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),s+h}}function b(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if(null!=t)for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);return n}function w(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+":"+e[n]);return t.join(";")}function C(e){A.vars.debounceTimer||e.call(this),A.vars.debounceTimer&&t.clearTimeout(A.vars.debounceTimer),A.vars.debounceTimer=t.setTimeout(function(){A.vars.debounceTimer=null,e.call(this)},A.setup.debounce)}function x(){C(function(){c(null)})}function _(e){var n=null;return"string"==typeof e?n=D.querySelectorAll(e):t.NodeList&&e instanceof t.NodeList?n=e:t.Node&&e instanceof t.Node?n=[e]:t.HTMLCollection&&e instanceof t.HTMLCollection?n=e:e instanceof Array?n=e:null===e&&(n=[]),n}function S(e,t){var n=new Image;n.onerror=function(){t.call(this,!1)},n.onload=function(){t.call(this,!0)},n.src=e}function k(e){for(var t=[],n=0,i=e.length-1;i>=0;i--)n=e.charCodeAt(i),n>128?t.unshift(["&#",n,";"].join("")):t.unshift(e[i]);return t.join("")}function E(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})}var T="http://www.w3.org/2000/svg",N=8,D=t.document,O="2.5.0",M="\nCreated with Holder.js "+O+".\nLearn more at http://holderjs.com\n(c) 2012-2015 Ivan Malopinsky - http://imsky.co\n",I={version:O,addTheme:function(e,t){return null!=e&&null!=t&&(A.settings.themes[e]=t),delete A.vars.cache.themeKeys,this},addImage:function(e,t){var n=D.querySelectorAll(t);if(n.length)for(var i=0,s=n.length;i<s;i++){var o=m("img");g(o,{"data-src":e}),n[i].appendChild(o)}return this},setResizeUpdate:function(e,t){e.holderData&&(e.holderData.resizeUpdate=!!t,e.holderData.resizeUpdate&&c(e))},run:function(e){e=e||{};var n={};A.vars.preempted=!0;var r=b(A.settings,e);n.renderer=r.renderer?r.renderer:A.setup.renderer,A.setup.renderers.join(",").indexOf(n.renderer)===-1&&(n.renderer=A.setup.supportsSVG?"svg":A.setup.supportsCanvas?"canvas":"html");var a=_(r.images),l=_(r.bgnodes),c=_(r.stylenodes),h=_(r.objects);n.stylesheets=[],n.svgXMLStylesheet=!0,n.noFontFallback=!!r.noFontFallback&&r.noFontFallback;for(var d=0;d<c.length;d++){var u=c[d];if(u.attributes.rel&&u.attributes.href&&"stylesheet"==u.attributes.rel.value){var p=u.attributes.href.value,f=m("a");f.href=p;var g=f.protocol+"//"+f.host+f.pathname+f.search;n.stylesheets.push(g)}}for(d=0;d<l.length;d++)if(t.getComputedStyle){var v=t.getComputedStyle(l[d],null).getPropertyValue("background-image"),y=l[d].getAttribute("data-background-src"),w=null;w=null==y?v:y;var C=null,x="?"+r.domain+"/";if(0===w.indexOf(x))C=w.slice(1);else if(w.indexOf(x)!=-1){var k=w.substr(w.indexOf(x)).slice(1),E=k.match(/([^\"]*)"?\)/);null!=E&&(C=E[1])}if(null!=C){var T=s(C,r);T&&o({mode:"background",el:l[d],flags:T,engineSettings:n})}}for(d=0;d<h.length;d++){var N=h[d],D={};try{D.data=N.getAttribute("data"),D.dataSrc=N.getAttribute("data-src")}catch(e){}var O=null!=D.data&&0===D.data.indexOf(r.domain),M=null!=D.dataSrc&&0===D.dataSrc.indexOf(r.domain);O?i(r,n,D.data,N):M&&i(r,n,D.dataSrc,N)}for(d=0;d<a.length;d++){var I=a[d],R={};try{R.src=I.getAttribute("src"),R.dataSrc=I.getAttribute("data-src"),R.rendered=I.getAttribute("data-holder-rendered")}catch(e){}var L=null!=R.src,P=null!=R.dataSrc&&0===R.dataSrc.indexOf(r.domain),H=null!=R.rendered&&"true"==R.rendered;L?0===R.src.indexOf(r.domain)?i(r,n,R.src,I):P&&(H?i(r,n,R.dataSrc,I):!function(e,t,n,s,o){S(e,function(e){e||i(t,n,s,o)})}(R.src,r,n,R.dataSrc,I)):P&&i(r,n,R.dataSrc,I)}return this}},A={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",stylesheets:[],themes:{gray:{background:"#EEEEEE",foreground:"#AAAAAA"},social:{background:"#3a5a97",foreground:"#FFFFFF"},industrial:{background:"#434A52",foreground:"#C2F200"},sky:{background:"#0D8FDB",foreground:"#FFFFFF"},vine:{background:"#39DBAC",foreground:"#1E292C"},lava:{background:"#F8591A",foreground:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16},flags:{dimensions:{regex:/^(\d+)x(\d+)$/,output:function(e){var t=this.regex.exec(e);return{width:+t[1],height:+t[2]}}},fluid:{regex:/^([0-9]+%?)x([0-9]+%?)$/,output:function(e){var t=this.regex.exec(e);return{width:t[1],height:t[2]}}},colors:{regex:/(?:#|\^)([0-9a-f]{3,})\:(?:#|\^)([0-9a-f]{3,})/i,output:function(e){var t=this.regex.exec(e);return{foreground:"#"+t[2],background:"#"+t[1]}}},text:{regex:/text\:(.*)/,output:function(e){return this.regex.exec(e)[1].replace("\\/","/")}},font:{regex:/font\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},random:{regex:/^random$/},size:{regex:/size\:(\d+)/,output:function(e){return this.regex.exec(e)[1]}}}},R=function(){var e=null,t=null,n=null;return function(i){var s=i.root;if(A.setup.supportsSVG){var o=!1,r=function(e){return D.createTextNode(e)};null!=e&&e.parentNode===D.body||(o=!0),e=v(e,s.properties.width,s.properties.height),e.style.display="block",o&&(t=m("text",T),n=r(null),g(t,{x:0}),t.appendChild(n),e.appendChild(t),D.body.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="-100%",e.style.left="-100%");var a=s.children.holderTextGroup,l=a.properties;g(t,{y:l.font.size,style:w({"font-weight":l.font.weight,"font-size":l.font.size+l.font.units,"font-family":l.font.family,"dominant-baseline":"middle"})}),n.nodeValue=l.text;var c=t.getBBox(),h=Math.ceil(c.width/(s.properties.width*A.setup.lineWrapRatio)),d=l.text.split(" "),u=l.text.match(/\\n/g);h+=null==u?0:u.length,n.nodeValue=l.text.replace(/[ ]+/g,"");var p=t.getComputedTextLength(),f=c.width-p,y=Math.round(f/Math.max(1,d.length-1)),b=[];if(h>1){n.nodeValue="";for(var C=0;C<d.length;C++)if(0!==d[C].length){n.nodeValue=E(d[C]);var x=t.getBBox();b.push({text:d[C],width:x.width})}}return e.style.display="none",{spaceWidth:y,lineCount:h,boundingBox:c,words:b}}return!1}}(),L=function(){var e=m("canvas"),t=null;return function(n){null==t&&(t=e.getContext("2d"));var i=n.root;e.width=A.dpr(i.properties.width),e.height=A.dpr(i.properties.height),t.textBaseline="middle",t.fillStyle=i.children.holderBg.properties.fill,t.fillRect(0,0,A.dpr(i.children.holderBg.width),A.dpr(i.children.holderBg.height));var s=i.children.holderTextGroup;s.properties;t.font=s.properties.font.weight+" "+A.dpr(s.properties.font.size)+s.properties.font.units+" "+s.properties.font.family+", monospace",t.fillStyle=s.properties.fill;for(var o in s.children){var r=s.children[o];for(var a in r.children){var l=r.children[a],c=A.dpr(s.x+r.x+l.x),h=A.dpr(s.y+r.y+l.y+s.properties.leading/2);t.fillText(l.properties.text,c,h)}}return e.toDataURL("image/png")}}(),P=function(){if(t.XMLSerializer){var e=v(null,0,0),n=m("rect",T);return e.appendChild(n),function(t,i){var s=t.root,o=i.holderSettings.flags.holderURL,r=D.createComment("\nSource URL: "+o+M);v(e,s.properties.width,s.properties.height),e.insertBefore(r,e.firstChild);for(var a=e.querySelectorAll("g"),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);g(n,{width:s.children.holderBg.width,height:s.children.holderBg.height,fill:s.children.holderBg.properties.fill});var c=s.children.holderTextGroup,h=c.properties,d=m("g",T);e.appendChild(d);for(var u in c.children){var p=c.children[u];for(var f in p.children){var b=p.children[f],C=c.x+p.x+b.x,x=c.y+p.y+b.y+c.properties.leading/2,_=m("text",T),S=D.createTextNode(null);g(_,{x:C,y:x,style:w({fill:h.fill,"font-weight":h.font.weight,"font-family":h.font.family+", monospace","font-size":h.font.size+h.font.units,"dominant-baseline":"central"})}),S.nodeValue=b.properties.text,_.appendChild(S),d.appendChild(_)}}var k="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(y(e,i.engineSettings))));return k}}}(),H=function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}var n=1,i=augment.defclass({constructor:function(e){n++,this.parent=null,this.children={},this.id=n,this.name="n"+n,null!=e&&(this.name=e),this.x=0,this.y=0,this.z=0,this.width=0,this.height=0},resize:function(e,t){null!=e&&(this.width=e),null!=t&&(this.height=t)},moveTo:function(e,t,n){this.x=null!=e?e:this.x,this.y=null!=t?t:this.y,this.z=null!=n?n:this.z},add:function(e){var t=e.name;if(null!=this.children[t])throw"SceneGraph: child with that name already exists: "+t;this.children[t]=e,e.parent=this}}),s=augment(i,function(t){this.constructor=function(){t.constructor.call(this,"root"),this.properties=e}}),o=augment(i,function(e){function n(n,i){if(e.constructor.call(this,n),this.properties={fill:"#000"},null!=i)t(this.properties,i);else if(null!=n&&"string"!=typeof n)throw"SceneGraph: invalid node name"}this.Group=augment.extend(this,{constructor:n,type:"group"}),this.Rect=augment.extend(this,{constructor:n,type:"rect"}),this.Text=augment.extend(this,{constructor:function(e){n.call(this),this.properties.text=e},type:"text"})}),r=new s;return this.Shape=o,this.root=r,this};for(var F in A.flags)A.flags.hasOwnProperty(F)&&(A.flags[F].match=function(e){return e.match(this.regex)});A.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:.9,renderers:["html","canvas","svg"]},A.dpr=function(e){return e*A.setup.ratio},A.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var e=1,n=1,i=m("canvas"),s=null;i.getContext&&i.toDataURL("image/png").indexOf("data:image/png")!=-1&&(A.setup.renderer="canvas",s=i.getContext("2d"),A.setup.supportsCanvas=!0),A.setup.supportsCanvas&&(e=t.devicePixelRatio||1,n=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),A.setup.ratio=e/n,D.createElementNS&&D.createElementNS(T,"svg").createSVGRect&&(A.setup.renderer="svg",A.setup.supportsSVG=!0)}(),p(),e(I,"Holder",t),t.onDomReady&&t.onDomReady(function(){A.vars.preempted||I.run(),t.addEventListener?(t.addEventListener("resize",x,!1),t.addEventListener("orientationchange",x,!1)):t.attachEvent("onresize",x),"object"==typeof t.Turbolinks&&t.document.addEventListener("page:change",function(){I.run()})})}(function(e,t,n){var i="function"==typeof define&&define.amd;"object"==typeof exports;i?define(e):n[t]=e},this),function(){var e,t,n,i,s,o,r,a,l=[].slice,c={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var i in t)c.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,i,s,o;if(i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(s=0,o=n.length;o>s;s++)t=n[s],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,i,s,o,r;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[e],!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(s=o=0,r=i.length;r>o;s=++o)if(n=i[s],n===t){i.splice(s,1);break}return this},e}(),e=function(e){function n(e,t){var s,o,r;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,s=null!=(r=n.optionsForElement(this.element))?r:{},this.options=i({},this.defaultOptions,s,null!=t?t:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?n.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:n.getElements(this.options.clickable,"clickable")),this.init()}var i,s;return h(n,e),n.prototype.Emitter=t,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return r},forceFallback:!1,fallback:function(){var e,t,i,s,o,r;for(this.element.className=""+this.element.className+" dz-browser-not-supported",r=this.element.getElementsByTagName("div"),s=0,o=r.length;o>s;s++)e=r[s],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),i=t.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),i=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:r,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:r,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,s,o,r,a,l,c,h,d,u,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),d=e.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=d.length;l>o;o++)t=d[o],t.textContent=e.name;for(u=e.previewElement.querySelectorAll("[data-dz-size]"),r=0,c=u.length;c>r;r++)t=u[r],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),i=function(t){return function(i){return i.preventDefault(),i.stopPropagation(),e.status===n.UPLOADING?n.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?n.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),f=[],a=0,h=p.length;h>a;a++)s=p[a],f.push(s.addEventListener("click",i));return f}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,i,s,o;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,s=o.length;s>i;i++)n=o[i],n.alt=e.name,n.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,i,s,o,r;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),o=e.previewElement.querySelectorAll("[data-dz-errormessage]"),r=[],i=0,s=o.length;s>i;i++)n=o[i],r.push(n.textContent=t);return r}},errormultiple:r,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:r,uploadprogress:function(e,t){var n,i,s,o,r;if(e.previewElement){for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),r=[],i=0,s=o.length;s>i;i++)n=o[i],r.push("PROGRESS"===n.nodeName?n.value=t:n.style.width=""+t+"%");return r}},totaluploadprogress:r,sending:r,sendingmultiple:r,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:r,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:r,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:r,maxfilesexceeded:r,maxfilesreached:r,queuecomplete:r,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'
},i=function(){var e,t,n,i,s,o,r;for(i=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],o=0,r=n.length;r>o;o++){t=n[o];for(e in t)s=t[e],i[e]=s}return i},n.prototype.getAcceptedFiles=function(){var e,t,n,i,s;for(i=this.files,s=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted&&s.push(e);return s},n.prototype.getRejectedFiles=function(){var e,t,n,i,s;for(i=this.files,s=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted||s.push(e);return s},n.prototype.getFilesWithStatus=function(e){var t,n,i,s,o;for(s=this.files,o=[],n=0,i=s.length;i>n;n++)t=s[n],t.status===e&&o.push(t);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getActiveFiles=function(){var e,t,i,s,o;for(s=this.files,o=[],t=0,i=s.length;i>t;t++)e=s[t],(e.status===n.UPLOADING||e.status===n.QUEUED)&&o.push(e);return o},n.prototype.init=function(){var e,t,i,s,o,r,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(e){return function(){return e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,s,o;if(n=e.hiddenFileInput.files,n.length)for(s=0,o=n.length;o>s;s++)t=n[s],e.addFile(t);return i()})}}(this))(),this.URL=null!=(r=window.URL)?r:window.webkitURL,a=this.events,s=0,o=a.length;o>s;s++)e=a[s],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(n){return t(n),e.emit("dragenter",n)}}(this),dragover:function(e){return function(n){var i;try{i=n.dataTransfer.effectAllowed}catch(e){}return n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",t(n),e.emit("dragover",n)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(n){return t(n),e.drop(n)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(i){return t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message"))?e.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,i,s,o,r,a;if(i=0,n=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),o=0,r=a.length;r>o;o++)t=a[o],i+=t.upload.bytesSent,n+=t.upload.total;s=100*i/n}else s=100;return this.emit("totaluploadprogress",s,n,i)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype.getFallbackForm=function(){var e,t,i,s;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(i),"FORM"!==this.element.tagName?(s=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),s.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=s?s:t)},n.prototype.getExistingFallback=function(){var e,t,n,i,s,o;for(t=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},o=["div","form"],i=0,s=o.length;s>i;i++)if(n=o[i],e=t(this.element.getElementsByTagName(n)))return e},n.prototype.setupEventListeners=function(){var e,t,n,i,s,o,r;for(o=this.listeners,r=[],i=0,s=o.length;s>i;i++)e=o[i],r.push(function(){var i,s;i=e.events,s=[];for(t in i)n=i[t],s.push(e.element.addEventListener(t,n,!1));return s}());return r},n.prototype.removeEventListeners=function(){var e,t,n,i,s,o,r;for(o=this.listeners,r=[],i=0,s=o.length;s>i;i++)e=o[i],r.push(function(){var i,s;i=e.events,s=[];for(t in i)n=i[t],s.push(e.element.removeEventListener(t,n,!1));return s}());return r},n.prototype.disable=function(){var e,t,n,i,s;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(this.cancelUpload(e));return s},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t,n,i,s,o,r,a,l;for(r=["TB","GB","MB","KB","b"],i=s=null,n=a=0,l=r.length;l>a;n=++a)if(o=r[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){i=e/Math.pow(this.options.filesizeBase,4-n),s=o;break}return i=Math.round(10*i)/10,"<strong>"+i+"</strong> "+s},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},n.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},n.prototype.handleFiles=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;i>n;n++)t=e[n],s.push(this.addFile(t));return s},n.prototype._addFilesFromItems=function(e){var t,n,i,s,o;for(o=[],i=0,s=e.length;s>i;i++)n=e[i],o.push(null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?this.addFile(n.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?this.addFile(n.getAsFile()):void 0);return o},n.prototype._addFilesFromDirectory=function(e,t){var n,i;return n=e.createReader(),i=function(e){return function(n){var i,s,o;for(s=0,o=n.length;o>s;s++)i=n[s],i.isFile?i.file(function(n){return e.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+t+"/"+n.name,e.addFile(n))}):i.isDirectory&&e._addFilesFromDirectory(i,""+t+"/"+i.name)}}(this),n.readEntries(i,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=n.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},n.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},n.prototype.removeFile=function(e){return e.status===n.UPLOADING&&this.cancelUpload(e),this.files=a(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},n.prototype.removeAllFiles=function(e){var t,i,s,o;for(null==e&&(e=!1),o=this.files.slice(),i=0,s=o.length;s>i;i++)t=o[i],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(i){return function(){var s;return"image/svg+xml"===e.type?(i.emit("thumbnail",e,n.result),void(null!=t&&t())):(s=document.createElement("img"),s.onload=function(){var n,r,a,l,c,h,d,u;return e.width=s.width,e.height=s.height,a=i.options.resize.call(i,e),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),n=document.createElement("canvas"),r=n.getContext("2d"),n.width=a.trgWidth,n.height=a.trgHeight,o(r,s,null!=(c=a.srcX)?c:0,null!=(h=a.srcY)?h:0,a.srcWidth,a.srcHeight,null!=(d=a.trgX)?d:0,null!=(u=a.trgY)?u:0,a.trgWidth,a.trgHeight),l=n.toDataURL("image/png"),i.emit("thumbnail",e,l),null!=t?t():void 0},s.onerror=t,s.src=n.result)}}(this),n.readAsDataURL(e)},n.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;t>e;){if(!i.length)return;this.processFile(i.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,i,s;for(i=0,s=e.length;s>i;i++)t=e[i],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,i,s,o;for(s=this.files,o=[],n=0,i=s.length;i>n;n++)t=s[n],t.xhr===e&&o.push(t);return o}.call(this)},n.prototype.cancelUpload=function(e){var t,i,s,o,r,a,l;if(e.status===n.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),s=0,r=i.length;r>s;s++)t=i[s],t.status=n.CANCELED;for(e.xhr.abort(),o=0,a=i.length;a>o;o++)t=i[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=e.status)===n.ADDED||l===n.QUEUED)&&(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},s=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var t,o,r,a,l,c,h,d,u,p,f,m,g,v,y,b,w,C,x,_,S,k,E,T,N,D,O,M,I,A,R,L,P,H;for(x=new XMLHttpRequest,_=0,T=e.length;T>_;_++)t=e[_],t.xhr=x;m=s(this.options.method,e),w=s(this.options.url,e),x.open(m,w,!0),x.withCredentials=!!this.options.withCredentials,y=null,r=function(n){return function(){var i,s,o;for(o=[],i=0,s=e.length;s>i;i++)t=e[i],o.push(n._errorProcessing(e,y||n.options.dictResponseError.replace("{{statusCode}}",x.status),x));return o}}(this),b=function(n){return function(i){var s,o,r,a,l,c,h,d,u;if(null!=i)for(o=100*i.loaded/i.total,r=0,c=e.length;c>r;r++)t=e[r],t.upload={progress:o,total:i.total,bytesSent:i.loaded};else{for(s=!0,o=100,a=0,h=e.length;h>a;a++)t=e[a],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(s=!1),t.upload.progress=o,t.upload.bytesSent=t.upload.total;if(s)return}for(u=[],l=0,d=e.length;d>l;l++)t=e[l],u.push(n.emit("uploadprogress",t,o,t.upload.bytesSent));return u}}(this),x.onload=function(t){return function(i){var s;if(e[0].status!==n.CANCELED&&4===x.readyState){if(y=x.responseText,x.getResponseHeader("content-type")&&~x.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(e){i=e,y="Invalid JSON response from server."}return b(),200<=(s=x.status)&&300>s?t._finished(e,y,i):r()}}}(this),x.onerror=function(){return function(){return e[0].status!==n.CANCELED?r():void 0}}(this),v=null!=(I=x.upload)?I:x,v.onprogress=b,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(c,this.options.headers);for(a in c)l=c[a],x.setRequestHeader(a,l);if(o=new FormData,this.options.params){A=this.options.params;for(f in A)C=A[f],o.append(f,C)}for(S=0,N=e.length;N>S;S++)t=e[S],this.emit("sending",t,x,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,x,o),"FORM"===this.element.tagName)for(R=this.element.querySelectorAll("input, textarea, select, button"),k=0,D=R.length;D>k;k++)if(d=R[k],u=d.getAttribute("name"),p=d.getAttribute("type"),"SELECT"===d.tagName&&d.hasAttribute("multiple"))for(L=d.options,E=0,O=L.length;O>E;E++)g=L[E],g.selected&&o.append(u,g.value);else(!p||"checkbox"!==(P=p.toLowerCase())&&"radio"!==P||d.checked)&&o.append(u,d.value);for(h=M=0,H=e.length-1;H>=0?H>=M:M>=H;h=H>=0?++M:--M)o.append(this._getParamName(h),e[h],e[h].name);return x.send(o)},n.prototype._finished=function(e,t,i){var s,o,r;for(o=0,r=e.length;r>o;o++)s=e[o],s.status=n.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n.prototype._errorProcessing=function(e,t,i){var s,o,r;for(o=0,r=e.length;r>o;o++)s=e[o],s.status=n.ERROR,this.emit("error",s,t,i),this.emit("complete",s);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n}(t),e.version="4.0.1",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[n(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,s,o,r;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,s,o;for(o=[],n=0,s=e.length;s>n;n++)t=e[n],o.push(/(^| )dropzone($| )/.test(t.className)?i.push(t):void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),r=[],s=0,o=i.length;o>s;s++)n=i[s],r.push(e.optionsForElement(n)!==!1?new e(n):void 0);return r},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,s,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,i=0,s=o.length;s>i;i++)n=o[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},a=function(e,t){var n,i,s,o;for(o=[],i=0,s=e.length;s>i;i++)n=e[i],n!==t&&o.push(n);return o},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,s,o,r,a,l,c;if(e instanceof Array){s=[];try{for(o=0,a=e.length;a>o;o++)i=e[o],s.push(this.getElement(i,t))}catch(e){n=e,s=null}}else if("string"==typeof e)for(s=[],c=document.querySelectorAll(e),r=0,l=c.length;l>r;r++)i=c[r],s.push(i);else null!=e.nodeType&&(s=[e]);if(null==s||!s.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return s},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,s,o,r;if(!t)return!0;for(t=t.split(","),i=e.type,n=i.replace(/\/.*$/,""),o=0,r=t.length;r>o;o++)if(s=t[o],s=s.trim(),"."===s.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(s.toLowerCase(),e.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(n===s.replace(/\/.*$/,""))return!0}else if(i===s)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",s=function(e){var t,n,i,s,o,r,a,l,c,h;for(a=e.naturalWidth,r=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=r,i=n.getContext("2d"),i.drawImage(e,0,0),s=i.getImageData(0,0,1,r).data,h=0,o=r,l=r;l>h;)t=s[4*(l-1)+3],0===t?o=l:h=l,l=o+h>>1;return c=l/r,0===c?1:c},o=function(e,t,n,i,o,r,a,l,c,h){var d;return d=s(t),e.drawImage(t,n,i,o,r,a,l,c,h/d)},i=function(e,t){var n,i,s,o,r,a,l,c,h;if(s=!1,h=!0,i=e.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?e:i)[l](a+n.type,o,!1),!s&&(s=!0)?t.call(e,n.type||n):void 0):void 0},r=function(){var e;try{c.doScroll("left")}catch(t){return e=t,void setTimeout(r,50)}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{h=!e.frameElement}catch(e){}h&&r()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),e[n](a+"load",o,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},i(window,e._autoDiscoverFunction)}.call(this),function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function i(e){for(var t=0,n=-1;(n=e.indexOf("\n",n+1))!==-1;)t++;return t}function s(e,t){function n(e){this.len_after=e,this.name="close_"+t}var i=e+"_state",s="strong"==e?"em_state":"strong_state";return function(o,r){if(this[i][0]==t)return this[i].shift(),[o.length,new n(o.length-t.length)];var a=this[s].slice(),l=this[i].slice();this[i].unshift(t);var c=this.processInline(o.substr(t.length)),h=c[c.length-1];this[i].shift();if(h instanceof n){c.pop();var d=o.length-h.len_after;return[d,[e].concat(c)]}return this[s]=a,this[i]=l,[t.length,t]}}function o(e){for(var t=e.split(""),n=[""],i=!1;t.length;){var s=t.shift();switch(s){case" ":i?n[n.length-1]+=s:n.push("");break;case"'":case'"':i=!i;break;case"\\":s=t.shift();default:n[n.length-1]+=s}}return n}function r(e){return g(e)&&e.length>1&&"object"==typeof e[1]&&!g(e[1])?e[1]:void 0}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e){if("string"==typeof e)return l(e);var t=e.shift(),n={},i=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(n=e.shift());e.length;)i.push(c(e.shift()));var s="";for(var o in n)s+=" "+o+'="'+l(n[o])+'"';return"img"==t||"br"==t||"hr"==t?"<"+t+s+"/>":"<"+t+s+">"+i.join("")+"</"+t+">"}function h(e,t,n){var i;n=n||{};var s=e.slice(0);"function"==typeof n.preprocessTreeNode&&(s=n.preprocessTreeNode(s,t));var o=r(s);if(o){s[1]={};for(i in o)s[1][i]=o[i];o=s[1]}if("string"==typeof s)return s;switch(s[0]){case"header":s[0]="h"+s[1].level,delete s[1].level;break;case"bulletlist":s[0]="ul";break;case"numberlist":s[0]="ol";break;case"listitem":s[0]="li";break;case"para":s[0]="p";break;case"markdown":s[0]="html",o&&delete o.references;break;case"code_block":s[0]="pre",i=o?2:1;var a=["code"];a.push.apply(a,s.splice(i,s.length-i)),s[i]=a;break;case"inlinecode":s[0]="code";break;case"img":s[1].src=s[1].href,delete s[1].href;break;case"linebreak":s[0]="br";break;case"link":s[0]="a";break;case"link_ref":s[0]="a";var l=t[o.ref];if(!l)return o.original;delete o.ref,o.href=l.href,l.title&&(o.title=l.title),delete o.original;break;case"img_ref":s[0]="img";var l=t[o.ref];if(!l)return o.original;delete o.ref,o.src=l.href,l.title&&(o.title=l.title),delete o.original}if(i=1,o){for(var c in s[1]){i=2;break}1===i&&s.splice(i,1)}for(;i<s.length;++i)s[i]=h(s[i],t,n);return s}function d(e){for(var t=r(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(d(e[t]),++t)}var u=e.Markdown=function(e){switch(typeof e){case"undefined":this.dialect=u.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in u.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=u.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};e.parse=function(e,t){var n=new u(t);return n.toTree(e)},e.toHTML=function(t,n,i){var s=e.toHTMLTree(t,n,i);return e.renderJsonML(s)},e.toHTMLTree=function(e,t,n){"string"==typeof e&&(e=this.parse(e,t));var i=r(e),s={};i&&i.references&&(s=i.references);var o=h(e,s,n);return d(o),o};var f=u.mk_block=function(e,i,s){1==arguments.length&&(i="\n\n");var o=new String(e);return o.trailing=i,o.inspect=n,o.toSource=t,void 0!=s&&(o.lineNumber=s),o};u.prototype.split_blocks=function(e,t){e=e.replace(/(\r\n|\n|\r)/g,"\n");var n,s=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,o=[],r=1;for(null!=(n=/^(\s*\n)/.exec(e))&&(r+=i(n[0]),s.lastIndex=n[0].length);null!==(n=s.exec(e));)"\n#"==n[2]&&(n[2]="\n",s.lastIndex--),o.push(f(n[1],n[2],r)),r+=i(n[0]);return o},u.prototype.processBlock=function(e,t){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,e,t);for(var s=0;s<i.length;s++){var o=n[i[s]].call(this,e,t);if(o)return(!g(o)||o.length>0&&!g(o[0]))&&this.debug(i[s],"didn't return a proper array"),o}return[]},u.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},u.prototype.toTree=function(e,t){var n=e instanceof Array?e:this.split_blocks(e),i=this.tree;try{for(this.tree=t||this.tree||["markdown"];n.length;){var s=this.processBlock(n.shift(),n);s.length&&this.tree.push.apply(this.tree,s)}return this.tree}finally{t&&(this.tree=i)}},u.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},u.prototype.loop_re_over_block=function(e,t,n){for(var i,s=t.valueOf();s.length&&null!=(i=e.exec(s));)s=s.substr(i[0].length),n.call(this,i);return s},u.dialects={},u.dialects.Gruber={block:{atxHeader:function(e,t){var n=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(n){var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[i]}},setextHeader:function(e,t){var n=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(n){var i="="===n[2]?1:2,s=["header",{level:i},n[1]];return n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[s]}},code:function(e,t){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(i)){e:for(;;){var s=this.loop_re_over_block(i,e.valueOf(),function(e){n.push(e[1])});if(s.length){t.unshift(f(s,e.trailing));break e}if(!t.length)break e;if(!t[0].match(i))break e;n.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(e,t){var n=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(n){var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&t.unshift(f(n[3])),i}},lists:function(){function e(e){return new RegExp("(?:^("+l+"{0,"+e+"} {0,3})("+o+")\\s+)|(^"+l+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function n(e,t,n,i){if(t)return void e.push(["para"].concat(n));var s=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;i&&e.length>1&&n.unshift(i);for(var o=0;o<n.length;o++){var r=n[o],a="string"==typeof r;a&&s.length>1&&"string"==typeof s[s.length-1]?s[s.length-1]+=r:s.push(r)}}function i(e,t){for(var n=new RegExp("^("+l+"{"+e+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+e+"}","gm"),s=[];t.length>0&&n.exec(t[0]);){var o=t.shift(),r=o.replace(i,"");s.push(f(r,o.trailing,o.lineNumber))}return s}function s(e,t,n){var i=e.list,s=i[i.length-1];if(!(s[1]instanceof Array&&"para"==s[1][0]))if(t+1==n.length)s.push(["para"].concat(s.splice(1,s.length-1)));else{var o=s.pop();s.push(["para"].concat(s.splice(1,s.length-1)),o)}}var o="[*+-]|\\d+\\.",r=/[*+-]/,a=new RegExp("^( {0,3})("+o+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(o,l){function c(e){var t=r.exec(e[2])?["bulletlist"]:["numberlist"];return p.push({list:t,indent:e[1]}),t}var h=o.match(a);if(h){for(var d,u,p=[],f=c(h),g=!1,v=[p[0].list];;){for(var y=o.split(/(?=\n)/),b="",w=0;w<y.length;w++){var C="",x=y[w].replace(/^\n/,function(e){return C=e,""}),_=e(p.length);if(h=x.match(_),void 0!==h[1]){b.length&&(n(d,g,this.processInline(b),C),g=!1,b=""),h[1]=t(h[1]);var S=Math.floor(h[1].length/4)+1;if(S>p.length)f=c(h),d.push(f),d=f[1]=["listitem"];else{var k=!1;for(u=0;u<p.length;u++)if(p[u].indent==h[1]){f=p[u].list,p.splice(u+1,p.length-(u+1)),k=!0;break}k||(S++,S<=p.length?(p.splice(S,p.length-S),f=p[S-1].list):(f=c(h),d.push(f))),d=["listitem"],f.push(d)}C=""}x.length>h[0].length&&(b+=C+x.substr(h[0].length))}b.length&&(n(d,g,this.processInline(b),C),g=!1,b="");var E=i(p.length,l);E.length>0&&(m(p,s,this),d.push.apply(d,this.toTree(E,[])));var T=l[0]&&l[0].valueOf()||"";if(!T.match(a)&&!T.match(/^ /))break;o=l.shift();var N=this.dialect.block.horizRule(o,l);if(N){v.push.apply(v,N);break}m(p,s,this),g=!0}return v}}}(),blockquote:function(e,t){if(e.match(/^>/m)){var n=[];if(">"!=e[0]){for(var i=e.split(/\n/),s=[],o=e.lineNumber;i.length&&">"!=i[0][0];)s.push(i.shift()),o++;var a=f(s.join("\n"),"\n",e.lineNumber);n.push.apply(n,this.processBlock(a,[])),e=f(i.join("\n"),e.trailing,o)}for(;t.length&&">"==t[0][0];){var l=t.shift();e=f(e+e.trailing+l,l.trailing,e.lineNumber)}var c=e.replace(/^> ?/gm,""),h=(this.tree,this.toTree(c,["blockquote"])),d=r(h);return d&&d.references&&(delete d.references,v(d)&&h.splice(1,1)),n.push(h),n}},referenceDefn:function(e,t){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(e.match(n)){r(this.tree)||this.tree.splice(1,0,{});var i=r(this.tree);void 0===i.references&&(i.references={});var s=this.loop_re_over_block(n,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=i.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])});return s.length&&t.unshift(f(s,e.trailing)),[]}},para:function(e,t){return[["para"].concat(this.processInline(e))]}}},u.dialects.Gruber.inline={__oneElement__:function(e,t,n){var i,s;t=t||this.dialect.inline.__patterns__;var o=new RegExp("([\\s\\S]*?)("+(t.source||t)+")");if(i=o.exec(e),!i)return[e.length,e];if(i[1])return[i[1].length,i[1]];var s;return i[2]in this.dialect.inline&&(s=this.dialect.inline[i[2]].call(this,e.substr(i.index),i,n||[])),s=s||[i[2].length,i[2]]},__call__:function(e,t){function n(e){"string"==typeof e&&"string"==typeof s[s.length-1]?s[s.length-1]+=e:s.push(e)}for(var i,s=[];e.length>0;)i=this.dialect.inline.__oneElement__.call(this,e,t,s),e=e.substr(i.shift()),m(i,n);return s},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var n={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(n.title=t[4]),[t[0].length,["img",n]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,"!["]},"[":function e(t){var n=String(t),i=u.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!i)return[1,"["];var e,s,o=1+i[0],r=i[1];t=t.substr(o);var a=t.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var l=a[1];if(o+=a[0].length,l&&"<"==l[0]&&">"==l[l.length-1]&&(l=l.substring(1,l.length-1)),!a[3])for(var c=1,h=0;h<l.length;h++)switch(l[h]){case"(":c++;break;case")":0==--c&&(o-=l.length-h,l=l.substring(0,h))}return l=this.dialect.inline.__call__.call(this,l,/\\/)[0],s={href:l||""},void 0!==a[3]&&(s.title=a[3]),e=["link",s].concat(r),[o,e]}return a=t.match(/^\s*\[(.*?)\]/),a?(o+=a[0].length,s={ref:(a[1]||String(r)).toLowerCase(),original:n.substr(0,o)},e=["link_ref",s].concat(r),[o,e]):1==r.length&&"string"==typeof r[0]?(s={ref:r[0].toLowerCase(),original:n.substr(0,o)},e=["link_ref",s,r[0]],[o,e]):[1,"["]},"<":function(e){var t;return null!=(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{
href:"mailto:"+t[3]},t[3]]]:"mailto"==t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(e){return[3,["linebreak"]]}},u.dialects.Gruber.inline["**"]=s("strong","**"),u.dialects.Gruber.inline.__=s("strong","__"),u.dialects.Gruber.inline["*"]=s("em","*"),u.dialects.Gruber.inline._=s("em","_"),u.buildBlockOrder=function(e){var t=[];for(var n in e)"__order__"!=n&&"__call__"!=n&&t.push(n);e.__order__=t},u.buildInlinePatterns=function(e){var t=[];for(var n in e)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1==n.length?i:"(?:"+i+")")}t=t.join("|"),e.__patterns__=t;var s=e.__call__;e.__call__=function(e,n){return void 0!=n?s.call(this,e,n):s.call(this,e,t)}},u.DialectHelpers={},u.DialectHelpers.inline_until_char=function(e,t){for(var n=0,i=[];;){if(e.charAt(n)==t)return n++,[n,i];if(n>=e.length)return null;var s=this.dialect.inline.__oneElement__.call(this,e.substr(n));n+=s[0],i.push.apply(i,s.slice(1))}},u.subclassDialect=function(e){function t(){}function n(){}return t.prototype=e.block,n.prototype=e.inline,{block:new t,inline:new n}},u.buildBlockOrder(u.dialects.Gruber.block),u.buildInlinePatterns(u.dialects.Gruber.inline),u.dialects.Maruku=u.subclassDialect(u.dialects.Gruber),u.dialects.Maruku.processMetaHash=function(e){for(var t=o(e),n={},i=0;i<t.length;++i)if(/^#/.test(t[i]))n.id=t[i].substring(1);else if(/^\./.test(t[i]))n.class?n.class=n.class+t[i].replace(/./," "):n.class=t[i].substring(1);else if(/\=/.test(t[i])){var s=t[i].split(/\=/);n[s[0]]=s[1]}return n},u.dialects.Maruku.block.document_meta=function(e,t){if(!(e.lineNumber>1)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){r(this.tree)||this.tree.splice(1,0,{});var n=e.split(/\n/);for(p in n){var i=n[p].match(/(\w+):\s*(.*)$/),s=i[1].toLowerCase(),o=i[2];this.tree[1][s]=o}return[]}},u.dialects.Maruku.block.block_meta=function(e,t){var n=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(n){var i,s=this.dialect.processMetaHash(n[2]);if(""===n[1]){var o=this.tree[this.tree.length-1];if(i=r(o),"string"==typeof o)return;i||(i={},o.splice(1,0,i));for(a in s)i[a]=s[a];return[]}var l=e.replace(/\n.*$/,""),c=this.processBlock(l,[]);i=r(c[0]),i||(i={},c[0].splice(1,0,i));for(a in s)i[a]=s[a];return c}},u.dialects.Maruku.block.definition_list=function(e,t){var n,i,s=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(i=e.match(s)){for(var r=[e];t.length&&s.exec(t[0]);)r.push(t.shift());for(var a=0;a<r.length;++a){var i=r[a].match(s),l=i[1].replace(/\n$/,"").split(/\n/),c=i[2].split(/\n:\s+/);for(n=0;n<l.length;++n)o.push(["dt",l[n]]);for(n=0;n<c.length;++n)o.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[o]}},u.dialects.Maruku.block.table=function e(t,n){var i,s,o=function(e,t){t=t||"\\s",t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var n,i=[],s=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");n=e.match(s);)i.push(n[1]),e=n[2];return i.push(e),i},r=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(s=t.match(r))s[3]=s[3].replace(/^\s*\|/gm,"");else if(!(s=t.match(a)))return;var e=["table",["thead",["tr"]],["tbody"]];s[2]=s[2].replace(/\|\s*$/,"").split("|");var l=[];for(m(s[2],function(e){e.match(/^\s*-+:\s*$/)?l.push({align:"right"}):e.match(/^\s*:-+\s*$/)?l.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?l.push({align:"center"}):l.push({})}),s[1]=o(s[1].replace(/\|\s*$/,""),"|"),i=0;i<s[1].length;i++)e[1][1].push(["th",l[i]||{}].concat(this.processInline(s[1][i].trim())));return m(s[3].replace(/\|\s*$/gm,"").split("\n"),function(t){var n=["tr"];for(t=o(t,"|"),i=0;i<t.length;i++)n.push(["td",l[i]||{}].concat(this.processInline(t[i].trim())));e[2].push(n)},this),[e]},u.dialects.Maruku.inline["{:"]=function(e,t,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var s=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!s)return[2,"{:"];var o=this.dialect.processMetaHash(s[1]),a=r(i);a||(a={},i.splice(1,0,a));for(var l in o)a[l]=o[l];return[s[0].length,""]},u.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,u.buildBlockOrder(u.dialects.Maruku.block),u.buildInlinePatterns(u.dialects.Maruku.inline);var m,g=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};m=Array.prototype.forEach?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var i=0;i<e.length;i++)t.call(n||e,e[i],i,e)};var v=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};e.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var n=[];if(t.root)n.push(c(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)n.push(c(e.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),!function(e){"use strict";var t=function(t,n){var i=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];e.each(i,function(i,s){"undefined"!=typeof e(t).data(s)&&(n="object"==typeof n?n:{},n[s]=e(t).data(s))}),this.$ns="bootstrap-markdown",this.$element=e(t),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=e.extend(!0,{},e.fn.markdown.defaults,n,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};t.prototype={constructor:t,__alterButtons:function(t,n){var i=this.$handler,s="all"==t,o=this;e.each(i,function(e,i){var r=!0;r=!s&&i.indexOf(t)<0,r===!1&&n(o.$editor.find('button[data-handler="'+i+'"]'))})},__buildButtons:function(t,n){var i,s=this.$ns,o=this.$handler,r=this.$callback;for(i=0;i<t.length;i++){var a,l=t[i];for(a=0;a<l.length;a++){var c,h=l[a].data,d=e("<div/>",{class:"btn-group"});for(c=0;c<h.length;c++){var u,p,f=h[c],m=s+"-"+f.name,g=this.__getIcon(f.icon),v=f.btnText?f.btnText:"",y=f.btnClass?f.btnClass:"btn",b=f.tabIndex?f.tabIndex:"-1",w="undefined"!=typeof f.hotkey?f.hotkey:"",C="undefined"!=typeof jQuery.hotkeys&&""!==w?" ("+w+")":"";u=e("<button></button>"),u.text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(y),y.match(/btn\-(primary|success|info|warning|danger|link)/)&&u.removeClass("btn-default"),u.attr({type:"button",title:this.__localize(f.title)+C,tabindex:b,"data-provider":s,"data-handler":m,"data-hotkey":w}),f.toggle===!0&&u.attr("data-toggle","button"),p=e("<span/>"),p.addClass(g),p.prependTo(u),d.append(u),o.push(m),r.push(f.callback)}n.append(d)}}return n},__setListener:function(){var t="undefined"!=typeof this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=t?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",e.proxy(this.focus,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)).on("change",e.proxy(this.change,this)).on("select",e.proxy(this.select,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",e.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(t){var n=e(t.currentTarget),i=this.$handler,s=this.$callback,o=n.attr("data-handler"),r=i.indexOf(o),a=s[r];e(t.currentTarget).focus(),a(this),this.change(this),o.indexOf("cmdSave")<0&&this.$textarea.focus(),t.preventDefault()},__localize:function(t){var n=e.fn.markdown.messages,i=this.$options.language;return"undefined"!=typeof n&&"undefined"!=typeof n[i]&&"undefined"!=typeof n[i][t]?n[i][t]:t},__getIcon:function(e){return"object"==typeof e?e[this.$options.iconlibrary]:e},setFullscreen:function(t){var n=this.$editor,i=this.$textarea;t===!0?(n.addClass("md-fullscreen-mode"),e("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),e("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=t,i.focus()},showEditor:function(){var t,n=this,i=this.$ns,s=this.$element,o=(s.css("height"),s.css("width"),this.$editable),r=this.$handler,a=this.$callback,l=this.$options,c=e("<div/>",{class:"md-editor",click:function(){n.focus()}});if(null===this.$editor){var h=e("<div/>",{class:"md-header btn-toolbar"}),d=[];if(l.buttons.length>0&&(d=d.concat(l.buttons[0])),l.additionalButtons.length>0&&(d=d.concat(l.additionalButtons[0])),l.reorderButtonGroups.length>0&&(d=d.filter(function(e){return l.reorderButtonGroups.indexOf(e.name)>-1}).sort(function(e,t){return l.reorderButtonGroups.indexOf(e.name)<l.reorderButtonGroups.indexOf(t.name)?-1:l.reorderButtonGroups.indexOf(e.name)>l.reorderButtonGroups.indexOf(t.name)?1:0})),d.length>0&&(h=this.__buildButtons([d],h)),l.fullscreen.enable&&h.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!0)}),c.append(h),s.is("textarea"))s.before(c),t=s,t.addClass("md-input"),c.append(t);else{var u="function"==typeof toMarkdown?toMarkdown(s.html()):s.html(),p=e.trim(u);t=e("<textarea/>",{class:"md-input",val:p}),c.append(t),o.el=s,o.type=s.prop("tagName").toLowerCase(),o.content=s.html(),e(s[0].attributes).each(function(){o.attrKeys.push(this.nodeName),o.attrValues.push(this.nodeValue)}),s.replaceWith(c)}var f=e("<div/>",{class:"md-footer"}),m=!1,g="";if(l.savable){m=!0;var v="cmdSave";r.push(v),a.push(l.onSave),f.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+v+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(g="function"==typeof l.footer?l.footer(this):l.footer,""!==e.trim(g)&&(m=!0,f.append(g)),m&&c.append(f),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(c.css("display","table"),t.css("width",l.width+"px")):c.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var y=l.height;h&&(y=Math.max(0,y-h.outerHeight())),f&&(y=Math.max(0,y-f.outerHeight())),t.css("height",y+"px")}else c.addClass(l.height);this.$editor=c,this.$textarea=t,this.$editable=o,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',e.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&h.find('[data-provider="bootstrap-markdown"]').each(function(){var n=e(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&t.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&l.fullscreen!==!1&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(e){e.preventDefault(),n.setFullscreen(!1)})),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.onShow(this),this},parseContent:function(e){var t,e=e||this.$textarea.val();return t=this.$options.parser?this.$options.parser(e):"object"==typeof markdown?markdown.toHTML(e):"function"==typeof marked?marked(e):e},showPreview:function(){var t,n,i=this.$options,s=this.$textarea,o=s.next(),r=e("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),n=i.onPreview(this),t="string"==typeof n?n:this.parseContent(),r.html(t),o&&"md-footer"==o.attr("class")?r.insertBefore(o):s.parent().append(r),r.css({width:s.outerWidth()+"px",height:s.outerHeight()+"px"}),this.$options.resize&&r.css("resize",this.$options.resize),s.hide(),r.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){this.$isPreview=!1;var e=this.$editor.find('div[data-provider="markdown-preview"]');return e.remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(e){return this.$textarea.val(e),this},findSelection:function(e){var t,n=this.getContent();if(t=n.indexOf(e),t>=0&&e.length>0){var i,s=this.getSelection();return this.setSelection(t,t+e.length),i=this.getSelection(),this.setSelection(s.start,s.end),i}return null},getSelection:function(){var e=this.$textarea[0];return("selectionStart"in e&&function(){var t=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value.substr(e.selectionStart,t)}}||function(){return null})()},setSelection:function(e,t){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=e,n.selectionEnd=t}||function(){return null})()},replaceSelection:function(e){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=e,jQuery(t)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var e,t=this.$nextTab.shift();return"function"==typeof t?e=t():"object"==typeof t&&t.length>0&&(e=t),e},setNextTab:function(e,t){if("string"==typeof e){var n=this;this.$nextTab.push(function(){return n.findSelection(e)})}else if("number"==typeof e&&"number"==typeof t){var i=this.getSelection();this.setSelection(e,t),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(e){var t=[];return t="string"==typeof e?e.split(","):e},enableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeAttr("disabled")})}),this},disableButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.attr("disabled","disabled")})}),this},hideButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.addClass("hidden")})}),this},showButtons:function(t){var n=this.__parseButtonNameParam(t),i=this;return e.each(n,function(e,t){i.__alterButtons(n[e],function(e){e.removeClass("hidden")})}),this},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},keyup:function(e){var t=!1;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(n=this.getNextTab(),null!==n){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),t=!0}else{var s=this.getSelection();s.start==s.end&&s.end==this.getContent().length?t=!1:(this.setSelection(this.getContent().length,this.getContent().length),t=!0)}break;case 13:t=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),t=!1;break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault()),this.$options.onChange(this)},change:function(e){return this.$options.onChange(this),this},select:function(e){return this.$options.onSelect(this),this},focus:function(t){var n=this.$options,i=(n.hideable,this.$editor);return i.addClass("active"),e(document).find(".md-editor").each(function(){if(e(this).attr("id")!==i.attr("id")){var t;t=e(this).find("textarea").data("markdown"),null===t&&(t=e(this).find('div[data-provider="markdown-preview"]').data("markdown")),t&&t.blur()}}),n.onFocus(this),this},blur:function(t){var n=this.$options,i=n.hideable,s=this.$editor,o=this.$editable;if(s.hasClass("active")||0===this.$element.parent().length){if(s.removeClass("active"),i)if(null!==o.el){var r=e("<"+o.type+"/>"),a=this.getContent(),l=this.parseContent(a);e(o.attrKeys).each(function(e,t){r.attr(o.attrKeys[e],o.attrValues[e])}),r.html(l),s.replaceWith(r)}else s.hide();n.onBlur(this)}return this}};var n=e.fn.markdown;e.fn.markdown=function(n){return this.each(function(){var i=e(this),s=i.data("markdown"),o="object"==typeof n&&n;s||i.data("markdown",s=new t(this,o))})},e.fn.markdown.messages={},e.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(e){var t,n,i=e.getSelection(),s=e.getContent();t=0===i.length?e.__localize("strong text"):i.text,"**"===s.substr(i.start-2,2)&&"**"===s.substr(i.end,2)?(e.setSelection(i.start-2,i.end+2),e.replaceSelection(t),n=i.start-2):(e.replaceSelection("**"+t+"**"),n=i.start+2),e.setSelection(n,n+t.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(e){var t,n,i=e.getSelection(),s=e.getContent();t=0===i.length?e.__localize("emphasized text"):i.text,"_"===s.substr(i.start-1,1)&&"_"===s.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):(e.replaceSelection("_"+t+"_"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(e){var t,n,i,s,o=e.getSelection(),r=e.getContent();t=0===o.length?e.__localize("heading text"):o.text+"\n",i=4,"### "===r.substr(o.start-i,i)||(i=3,"###"===r.substr(o.start-i,i))?(e.setSelection(o.start-i,o.end),e.replaceSelection(t),n=o.start-i):o.start>0&&(s=r.substr(o.start-1,1),!!s&&"\n"!=s)?(e.replaceSelection("\n\n### "+t),n=o.start+6):(e.replaceSelection("### "+t),n=o.start+4),e.setSelection(n,n+t.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(t){var n,i,s,o=t.getSelection();t.getContent();if(n=0===o.length?t.__localize("enter link description here"):o.text,s=prompt(t.__localize("Insert Hyperlink"),"http://"),null!==s&&""!==s&&"http://"!==s&&"http"===s.substr(0,4)){var r=e("<div>"+s+"</div>").text();t.replaceSelection("["+n+"]("+r+")"),i=o.start+1,t.setSelection(i,i+n.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(t){var n,i,s,o=t.getSelection();t.getContent();if(n=0===o.length?t.__localize("enter image description here"):o.text,s=prompt(t.__localize("Insert Image Hyperlink"),"http://"),null!==s&&""!==s&&"http://"!==s&&"http"===s.substr(0,4)){var r=e("<div>"+s+"</div>").text();t.replaceSelection("!["+n+"]("+r+' "'+t.__localize("enter image title here")+'")'),i=o.start+2,t.setNextTab(t.__localize("enter image title here")),t.setSelection(i,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(t){var n,i,s=t.getSelection();t.getContent();if(0===s.length)n=t.__localize("list text here"),t.replaceSelection("- "+n),i=s.start+2;else if(s.text.indexOf("\n")<0)n=s.text,t.replaceSelection("- "+n),i=s.start+2;else{var o=[];o=s.text.split("\n"),n=o[0],e.each(o,function(e,t){o[e]="- "+t}),t.replaceSelection("\n\n"+o.join("\n")),i=s.start+4}t.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(t){var n,i,s=t.getSelection();t.getContent();if(0===s.length)n=t.__localize("list text here"),t.replaceSelection("1. "+n),i=s.start+3;else if(s.text.indexOf("\n")<0)n=s.text,t.replaceSelection("1. "+n),i=s.start+3;else{var o=[];o=s.text.split("\n"),n=o[0],e.each(o,function(e,t){o[e]="1. "+t}),t.replaceSelection("\n\n"+o.join("\n")),i=s.start+5}t.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(e){var t,n,i=e.getSelection(),s=e.getContent();t=0===i.length?e.__localize("code text here"):i.text,"```\n"===s.substr(i.start-4,4)&&"\n```"===s.substr(i.end,4)?(e.setSelection(i.start-4,i.end+4),e.replaceSelection(t),n=i.start-4):"`"===s.substr(i.start-1,1)&&"`"===s.substr(i.end,1)?(e.setSelection(i.start-1,i.end+1),e.replaceSelection(t),n=i.start-1):s.indexOf("\n")>-1?(e.replaceSelection("```\n"+t+"\n```"),n=i.start+4):(e.replaceSelection("`"+t+"`"),n=i.start+1),e.setSelection(n,n+t.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(t){var n,i,s=t.getSelection();t.getContent();if(0===s.length)n=t.__localize("quote here"),t.replaceSelection("> "+n),i=s.start+2;else if(s.text.indexOf("\n")<0)n=s.text,t.replaceSelection("> "+n),i=s.start+2;else{var o=[];o=s.text.split("\n"),n=o[0],e.each(o,function(e,t){o[e]="> "+t}),t.replaceSelection("\n\n"+o.join("\n")),i=s.start+4}t.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(e){var t=e.$isPreview;t===!1?e.showPreview():e.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(e){},onPreview:function(e){},onSave:function(e){},onBlur:function(e){},onFocus:function(e){},onChange:function(e){},onFullscreen:function(e){},onSelect:function(e){}},e.fn.markdown.Constructor=t,e.fn.markdown.noConflict=function(){return e.fn.markdown=n,this};var i=function(e){var t=e;return t.data("markdown")?void t.data("markdown").showEditor():void t.markdown()},s=function(t){var n=e(document.activeElement);e(document).find(".md-editor").each(function(){var t=e(this),i=n.closest(".md-editor")[0]===this,s=t.find("textarea").data("markdown")||t.find('div[data-provider="markdown-preview"]').data("markdown");s&&!i&&s.blur()})};e(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(t){i(e(this)),t.preventDefault()}).on("click focusin",function(e){s(e)}).ready(function(){e('textarea[data-provide="markdown"]').each(function(){i(e(this))})})}(window.jQuery),!function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"==typeof module&&module.exports){var n;try{n=require("jquery")}catch(e){n=null}module.exports=t(n)}else e.Slider=t(e.jQuery)}(this,function(e){var t;return function(e){"use strict";function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function s(t,n){e.fn[t]=function(s){if("string"==typeof s){for(var r=i.call(arguments,1),a=0,l=this.length;l>a;a++){var c=this[a],h=e.data(c,t);if(h)if(e.isFunction(h[s])&&"_"!==s.charAt(0)){var d=h[s].apply(h,r);if(void 0!==d&&d!==h)return d}else o("no such method '"+s+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+s+"'")}return this}var u=this.map(function(){var i=e.data(this,t);return i?(i.option(s),i._init()):(i=new n(this,s),e.data(this,t,i)),e(this)});return!u||u.length>1?u:u[0]}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),s(e,t)},e.bridget}}var i=Array.prototype.slice;n(e)}(e),function(e){function n(t,n){function i(e,t){var n="data-slider-"+t.replace(/_/g,"-"),i=e.getAttribute(n);try{return JSON.parse(i)}catch(e){return i}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof t?this.element=document.querySelector(t):t instanceof HTMLElement&&(this.element=t),n=n?n:{};for(var o=Object.keys(this.defaultOptions),r=0;r<o.length;r++){var a=o[r],l=n[a];l="undefined"!=typeof l?l:i(this.element,a),l=null!==l?l:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var c,h,d,u,p,f=this.element.style.width,m=!1,g=this.element.parentNode;if(this.sliderElem)m=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var v=document.createElement("div");if(v.className="slider-track",h=document.createElement("div"),h.className="slider-track-low",c=document.createElement("div"),c.className="slider-selection",d=document.createElement("div"),d.className="slider-track-high",u=document.createElement("div"),u.className="slider-handle min-slider-handle",p=document.createElement("div"),p.className="slider-handle max-slider-handle",v.appendChild(h),v.appendChild(c),v.appendChild(d),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(r=0;r<this.options.ticks.length;r++){var y=document.createElement("div");y.className="slider-tick",this.ticks.push(y),v.appendChild(y)}c.className+=" tick-slider-selection"}if(v.appendChild(u),v.appendChild(p),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-badge-container",r=0;r<this.options.ticks_labels.length;r++){var b=document.createElement("div");b.className="slider-tick-label",b.innerHTML=this.options.ticks_labels[r],this.tickLabels.push(b),this.tickLabelContainer.appendChild(b)}var w=function(e){var t=document.createElement("div");t.className="tooltip-arrow";var n=document.createElement("div");n.className="tooltip-inner",e.appendChild(t),e.appendChild(n)},C=document.createElement("div");C.className="tooltip tooltip-main",w(C);var x=document.createElement("div");x.className="tooltip tooltip-min",w(x);var _=document.createElement("div");_.className="tooltip tooltip-max",w(_),this.sliderElem.appendChild(v),this.sliderElem.appendChild(C),this.sliderElem.appendChild(x),this.sliderElem.appendChild(_),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),g.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(e&&(this.$element=e(this.element),this.$sliderElem=e(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),s[this.options.scale]&&(this.options.scale=s[this.options.scale]),m===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(e){this._removeProperty(this.trackLow,e),this._removeProperty(this.trackSelection,e),this._removeProperty(this.trackHigh,e)},this),[this.handle1,this.handle2].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top"),this._removeProperty(e,"margin-left"),this._removeProperty(e,"margin-top"),this._removeClass(e,"right"),this._removeClass(e,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=h||this.trackLow,this.trackSelection=c||this.trackSelection,this.trackHigh=d||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=u||this.handle1,this.handle2=p||this.handle2,m===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),r=0;r<this.ticks.length;r++)this._removeClass(this.ticks[r],"round triangle hide");var S=["round","triangle","custom"],k=-1!==S.indexOf(this.options.handle);if(k)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),r=0;r<this.ticks.length;r++)this._addClass(this.ticks[r],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var i={formatInvalidInputErrorMsg:function(e){
return"Invalid input value '"+e+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},s={linear:{toValue:function(e){var t=e/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var n,i,s,o=0,r=0;r<this.options.ticks_positions.length;r++)if(e<=this.options.ticks_positions[r]){n=r>0?this.options.ticks[r-1]:0,s=r>0?this.options.ticks_positions[r-1]:0,i=this.options.ticks[r],o=this.options.ticks_positions[r];break}if(r>0){var a=(e-s)/(o-s);t=n+a*(i-n)}}var l=this.options.min+Math.round(t/this.options.step)*this.options.step;return l<this.options.min?this.options.min:l>this.options.max?this.options.max:l},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var t,n,i,s=0,o=0;o<this.options.ticks.length;o++)if(e<=this.options.ticks[o]){t=o>0?this.options.ticks[o-1]:0,i=o>0?this.options.ticks_positions[o-1]:0,n=this.options.ticks[o],s=this.options.ticks_positions[o];break}if(o>0){var r=(e-t)/(n-t);return i+r*(s-i)}}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(t+(n-t)*e/100);return i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(e){if(this.options.max===this.options.min)return 0;var t=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min),i=0===e?0:Math.log(e);return 100*(i-n)/(t-n)}}};if(t=function(e,t){return n.call(this,e,t),this},t.prototype={_init:function(){},constructor:t,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,n){e||(e=0);var i=this.getValue();this._state.value=this._validateInputValue(e);var s=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=s(this._state.value[0]),this._state.value[1]=s(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=s(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var o=this.options.range?this._state.value:this._state.value[0];return t===!0&&this._trigger("slide",o),i!==o&&n===!0&&this._trigger("change",{oldValue:i,newValue:o}),this._setDataVal(o),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),e&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(e,t){return this._bindNonQueryEventHandler(e,t),this},off:function(t,n){e?(this.$element.off(t,n),this.$sliderElem.off(t,n)):this._unbindNonQueryEventHandler(t,n)},getAttribute:function(e){return e?this.options[e]:this.options},setAttribute:function(e,t){return this.options[e]=t,this},refresh:function(){return this._removeSliderEventHandlers(),n.call(this,this.element,this.options),e&&e.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.handle2.removeEventListener("focus",this.handle2Keydown,!1),this.handle2.removeEventListener("blur",this.handle2Keydown,!1),this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(e,t){void 0===this.eventToCallbackMap[e]&&(this.eventToCallbackMap[e]=[]),this.eventToCallbackMap[e].push(t)},_unbindNonQueryEventHandler:function(e,t){var n=this.eventToCallbackMap[e];if(void 0!==n)for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var e=Object.keys(this.eventToCallbackMap),t=0;t<e.length;t++){var n=e[t];this.eventToCallbackMap[n]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var e;if(e=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=e[0]+"%",this.handle2.style[this.stylePos]=e[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var t=Math.max.apply(Math,this.options.ticks),n=Math.min.apply(Math,this.options.ticks),i="vertical"===this.options.orientation?"height":"width",s="vertical"===this.options.orientation?"marginTop":"marginLeft",o=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var r=0;if(0===this.options.ticks_positions.length)this.tickLabelContainer.style[s]=-o/2+"px",r=this.tickLabelContainer.offsetHeight;else for(a=0;a<this.tickLabelContainer.childNodes.length;a++)this.tickLabelContainer.childNodes[a].offsetHeight>r&&(r=this.tickLabelContainer.childNodes[a].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=r+"px")}for(var a=0;a<this.options.ticks.length;a++){var l=this.options.ticks_positions[a]||100*(this.options.ticks[a]-n)/(t-n);this.ticks[a].style[this.stylePos]=l+"%",this._removeClass(this.ticks[a],"in-selection"),this.options.range?l>=e[0]&&l<=e[1]&&this._addClass(this.ticks[a],"in-selection"):"after"===this.options.selection&&l>=e[0]?this._addClass(this.ticks[a],"in-selection"):"before"===this.options.selection&&l<=e[0]&&this._addClass(this.ticks[a],"in-selection"),this.tickLabels[a]&&(this.tickLabels[a].style[i]=o+"px",void 0!==this.options.ticks_positions[a]&&(this.tickLabels[a].style.position="absolute",this.tickLabels[a].style[this.stylePos]=this.options.ticks_positions[a]+"%",this.tickLabels[a].style[s]=-o/2+"px"))}}var c;if(this.options.range){c=this.options.formatter(this._state.value),this._setText(this.tooltipInner,c),this.tooltip.style[this.stylePos]=(e[1]+e[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var h=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,h);var d=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,d),this.tooltip_min.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=e[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else c=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,c),this.tooltip.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(e[0],e[1])+"%",this.trackSelection.style.top=Math.min(e[0],e[1])+"%",this.trackSelection.style.height=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(e[0],e[1])+"%",this.trackSelection.style.left=Math.min(e[0],e[1])+"%",this.trackSelection.style.width=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";var u=this.tooltip_min.getBoundingClientRect(),p=this.tooltip_max.getBoundingClientRect();u.right>p.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t=this._getPercentage(e);if(this.options.range){var n=Math.abs(this._state.percentage[0]-t),i=Math.abs(this._state.percentage[1]-t);this._state.dragged=i>n?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=t,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var s=this._calculateValue();return this._trigger("slideStart",s),this._setDataVal(s),this.setValue(s,!1,!0),this._pauseEvent(e),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var n;switch(t.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,s="horizontal"===this.options.orientation&&this.options.reversed;(i||s)&&(n=-n)}var o=this._state.value[e]+n*this.options.step;return this.options.range&&(o=[e?this._state.value[0]:o,e?o:this._state.value[1]]),this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!0,!0),this._setDataVal(o),this._trigger("slideStop",o),this._layout(),this._pauseEvent(t),!1}},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){if(!this._state.enabled)return!1;var t=this._getPercentage(e);this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_adjustPercentageForRangeSliders:function(e){if(this.options.range){var t=this._getNumDigitsAfterDecimalPlace(e);t=t?t-1:0;var n=this._applyToFixedAndParseFloat(e,t);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var e=this._calculateValue(!0);return this._layout(),this._setDataVal(e),this._trigger("slideStop",e),!1},_calculateValue:function(e){var t;if(this.options.range?(t=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(t[0]=this._toValue(this._state.percentage[0]),t[0]=this._applyPrecision(t[0])),100!==this._state.percentage[1]&&(t[1]=this._toValue(this._state.percentage[1]),t[1]=this._applyPrecision(t[1]))):(t=this._toValue(this._state.percentage[0]),t=parseFloat(t),t=this._applyPrecision(t)),e){for(var n=[t,1/0],i=0;i<this.options.ticks.length;i++){var s=Math.abs(this.options.ticks[i]-t);s<=n[1]&&(n=[this.options.ticks[i],s])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return t},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(e,t)},_getNumDigitsAfterDecimalPlace:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){var n=e.toFixed(t);return parseFloat(n)},_getPercentage:function(e){!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type||(e=e.touches[0]);var t=e[this.mousePos],n=this._state.offset[this.stylePos],i=t-n,s=i/this._state.size*100;return s=Math.round(s/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(s=100-s),Math.max(0,Math.min(100,s))},_validateInputValue:function(e){if("number"==typeof e)return e;if(Array.isArray(e))return this._validateArray(e),e;throw new Error(i.formatInvalidInputErrorMsg(e))},_validateArray:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("number"!=typeof n)throw new Error(i.formatInvalidInputErrorMsg(n))}},_setDataVal:function(e){this.element.setAttribute("data-value",e),this.element.setAttribute("value",e),this.element.value=e},_trigger:function(t,n){n=n||0===n?n:void 0;var i=this.eventToCallbackMap[t];if(i&&i.length)for(var s=0;s<i.length;s++){var o=i[s];o(n)}e&&this._triggerJQueryEvent(t,n)},_triggerJQueryEvent:function(e,t){var n={type:e,value:t};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){"undefined"!=typeof e.innerText?e.innerText=t:"undefined"!=typeof e.textContent&&(e.textContent=t)},_removeClass:function(e,t){for(var n=t.split(" "),i=e.className,s=0;s<n.length;s++){var o=n[s],r=new RegExp("(?:\\s|^)"+o+"(?:\\s|$)");i=i.replace(r," ")}e.className=i.trim()},_addClass:function(e,t){for(var n=t.split(" "),i=e.className,s=0;s<n.length;s++){var o=n[s],r=new RegExp("(?:\\s|^)"+o+"(?:\\s|$)"),a=r.test(i);a||(i+=" "+o)}e.className=i.trim()},_offsetLeft:function(e){return e.getBoundingClientRect().left},_offsetTop:function(e){for(var t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop;return t},_offset:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}},_css:function(t,n,i){if(e)e.style(t,n,i);else{var s=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()});t.style[s]=i}},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPosition:function(){var e=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var t=this.options.tooltip_position||"right",n="left"===t?"right":"left";e.forEach(function(e){this._addClass(e,t),e.style[n]="100%"}.bind(this))}else e.forEach("bottom"===this.options.tooltip_position?function(e){this._addClass(e,"bottom"),e.style.top="22px"}.bind(this):function(e){this._addClass(e,"top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},e){var o=e.fn.slider?"bootstrapSlider":"slider";e.bridget(o,t)}}(e),t});